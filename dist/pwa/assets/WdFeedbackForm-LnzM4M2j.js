import{o as h,e as U,a as i,h as N,r as B,b2 as j,b7 as L,b6 as O,z as D,D as H,F as W,H as J,b9 as T,a9 as P,A as Z,a_ as K,ba as G,d as X,u as Y,aA as $,_ as ee,c as C,w as c,$ as te,W as oe,f as s,bb as ae,g as E,am as Q,Q as w,Z as ne,P as le,M as q,O as z,bc as se,bd as re,be as ie}from"./index-DFzbwAJV.js";import{g as ce,a as de,Q as ue}from"./QImg-C67jHcSm.js";import{Q as me}from"./QScrollArea-om3MwnMw.js";import{u as fe}from"./use-quasar-B7xqL1Lc.js";import{c as ge}from"./index-smjOwVgM.js";import{t as A}from"./analytics-hj9MTZ8Z.js";import"./_commonjsHelpers-BosuxZz1.js";import"./___vite-browser-external_commonjs-proxy-DRaEfepn.js";import"./use-hydration-CaMfla2B.js";import"./selection-iN_AdNu3.js";import"./auth-store-BxotX82t.js";const pe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function be(u,e){return h(),U("svg",pe,e[0]||(e[0]=[i("path",{fill:"currentColor",d:"M12 2c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12S6.5 2 12 2m2.92 10.81c-1.08 0-1.97.75-2.21 1.75c-.54-.23-1.05-.17-1.42-.01c-.24-1-1.14-1.74-2.21-1.74c-1.25 0-2.26 1.01-2.26 2.26s1.01 2.26 2.26 2.26c1.2 0 2.16-.91 2.25-2.08c.2-.13.71-.39 1.34.01a2.258 2.258 0 0 0 4.51-.19c0-1.25-1.01-2.26-2.26-2.26m-5.84.64c.92 0 1.62.73 1.62 1.62s-.7 1.62-1.62 1.62c-.89 0-1.62-.73-1.62-1.62s.73-1.62 1.62-1.62m5.84 0c.89 0 1.62.73 1.62 1.62s-.73 1.62-1.62 1.62c-.92 0-1.62-.73-1.62-1.62s.7-1.62 1.62-1.62m2.91-1.95H6.17v.67h11.66zm-3.68-4.61a.67.67 0 0 0-.8-.36L12 7l-1.35-.47l-.04-.03a.67.67 0 0 0-.77.42l-1.48 3.91h7.28l-1.48-3.91z"},null,-1)]))}const ve={name:"mdi-anonymous-circle",render:be},he={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function xe(u,e){return h(),U("svg",he,e[0]||(e[0]=[i("path",{fill:"currentColor",d:"M22.11 21.46L2.39 1.73L1.11 3l2.95 2.95A9.9 9.9 0 0 0 2 12c0 5.5 4.5 10 10 10c2.28 0 4.37-.77 6.05-2.06l2.79 2.79zM8.94 10.83h-.58l.14-.42zm-2.77.67h3.44l.67.67H6.17zm8.75 5.83c-1.19 0-2.15-.91-2.25-2.07c-.63-.4-1.14-.14-1.34-.01a2.243 2.243 0 0 1-2.25 2.08c-1.25 0-2.26-1.01-2.26-2.26s1.01-2.26 2.26-2.26c1.07 0 1.97.74 2.21 1.74c.36-.15.84-.21 1.36-.01l.66.66c.06.8.69 1.41 1.47 1.47l.6.6c-.15.03-.3.06-.46.06M9.94 6.74L6.72 3.5C8.25 2.56 10.06 2 12 2c5.5 0 10 4.5 10 10c0 1.94-.56 3.75-1.5 5.28l-5.13-5.11h2.46v-.67H14.7l-.67-.67h1.61l-1.48-3.91l-.01-.03a.67.67 0 0 0-.8-.36L12 7l-1.35-.47l-.04-.03a.71.71 0 0 0-.67.24m.76 8.33c0 .89-.7 1.62-1.62 1.62c-.89 0-1.62-.73-1.62-1.62s.73-1.62 1.62-1.62c.92 0 1.62.73 1.62 1.62"},null,-1)]))}const ye={name:"mdi-anonymous-circle-off",render:xe},ke=N({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(u,{slots:e,emit:p}){const t=J(),d=B(null);let a=0;const r=[];function y(n){const m=typeof n=="boolean"?n:u.noErrorFocus!==!0,b=++a,F=(l,g)=>{p(`validation${l===!0?"Success":"Error"}`,g)},S=l=>{const g=l.validate();return typeof g.then=="function"?g.then(v=>({valid:v,comp:l}),v=>({valid:!1,comp:l,err:v})):Promise.resolve({valid:g,comp:l})};return(u.greedy===!0?Promise.all(r.map(S)).then(l=>l.filter(g=>g.valid!==!0)):r.reduce((l,g)=>l.then(()=>S(g).then(v=>{if(v.valid===!1)return Promise.reject(v)})),Promise.resolve()).catch(l=>[l])).then(l=>{if(l===void 0||l.length===0)return b===a&&F(!0),!0;if(b===a){const{comp:g,err:v}=l[0];if(v!==void 0&&console.error(v),F(!1,g),m===!0){const I=l.find(({comp:R})=>typeof R.focus=="function"&&T(R.$)===!1);I!==void 0&&I.comp.focus()}}return!1})}function o(){a++,r.forEach(n=>{typeof n.resetValidation=="function"&&n.resetValidation()})}function k(n){n!==void 0&&P(n);const m=a+1;y().then(b=>{m===a&&b===!0&&(u.onSubmit!==void 0?p("submit",n):n!==void 0&&n.target!==void 0&&typeof n.target.submit=="function"&&n.target.submit())})}function x(n){n!==void 0&&P(n),p("reset"),Z(()=>{o(),u.autofocus===!0&&u.noResetFocus!==!0&&_()})}function _(){K(()=>{if(d.value===null)return;const n=d.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||d.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||d.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(d.value.querySelectorAll("[tabindex]"),m=>m.tabIndex!==-1);n?.focus({preventScroll:!0})})}j(G,{bindComponent(n){r.push(n)},unbindComponent(n){const m=r.indexOf(n);m!==-1&&r.splice(m,1)}});let V=!1;return L(()=>{V=!0}),O(()=>{V===!0&&u.autofocus===!0&&_()}),D(()=>{u.autofocus===!0&&_()}),Object.assign(t.proxy,{validate:y,resetValidation:o,submit:k,reset:x,focus:_,getValidationComponents:()=>r}),()=>H("form",{class:"q-form",ref:d,onSubmit:k,onReset:x},W(e.default))}}),M="https://cdn.pixabay.com/photo/2014/05/11/11/12/mailbox-341744_1280.jpg",_e=X({__name:"WdFeedbackForm",setup(u,{expose:e}){e();const p=fe(),t=Y(),d="anonym@localhost:9000",a=$({email:"",subject:"",message:"",get_updates:!1,urls:[]}),r=B([]);function y(){console.debug(`Submitted form for '${a.email}'`,a.message),a.urls=r.value.map(f=>f.value),a.email==d&&(a.get_updates=!1),A("feedback-sent",{updates:a.get_updates,anonym:a.email==d}),ge.POST("/v1/feedback/",{body:a}).then(()=>{p.notify({color:"positive",textColor:"black",icon:"wd-checkmark",message:"Nachricht gesendet"}),t.go(-1),setTimeout(()=>{x()},200)}).catch(()=>{A("feedback-fail",{message:JSON.stringify(a)}),p.notify({color:"negative",textColor:"black",icon:"wd-close",message:"Nachricht konnte nicht gesendet werden"})})}const o=B(!1);function k(){a.email||a.message||a.subject?p.dialog({dark:!0,title:"Bist du sicher?",message:"Deine Eingaben gehen verloren! Schliessen?",persistent:!0,ok:{label:"Ja",flat:!0},cancel:{label:"Nein",flat:!0}}).onOk(()=>{A("feedback-cancel"),t.go(-1)}).onCancel(()=>{A("feedback-continue")}):t.go(-1)}function x(){a.email="",a.message=""}function _(){const f=r.value.length,l=f>0?r.value[f-1].id+1:0;console.log(r.value),console.log(l),r.value.push({value:"",id:l,placeholder:`URL ${l+1}`})}function V(f){r.value.splice(f,1)}function n(){t.replace({name:"support"})}const m=ce(M,{focal:"0.5,0.45",size:"800x300",quality:50});console.log(m);let b="";function F(f){f?(b=a.email,a.email=d,o.value=!0):(a.email=b,o.value=!1)}const S={$q:p,router:t,anoymDefaultEmail:d,message:a,urls:r,onSubmit:y,anonymous:o,onClose:k,onReset:x,addUrl:_,removeUrl:V,toSupport:n,imgPath:M,headerImg:m,get origEmail(){return b},set origEmail(f){b=f},setAnonym:F};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),Ce={class:"col no-wrap items-center q-py-md"},Se={class:"q-gutter-md q-pt-md"},we={class:""};function Ve(u,e,p,t,d,a){const r=ye,y=ve;return h(),C(oe,{class:te({"card--desktop":t.$q.screen.gt.xs,"card--mobile":t.$q.screen.xs})},{default:c(()=>[s(ke,{onSubmit:t.onSubmit,onReset:t.onReset,class:"fit"},{default:c(()=>[i("div",null,[s(de,{src:t.headerImg,style:{height:"140px"},class:"shadow-4"},{default:c(()=>e[8]||(e[8]=[i("div",{class:"card-header absolute-bottom text-white text-h5"},null,-1),i("div",{class:"absolute-bottom text-accent-400 text-h4 text-center card-header__text"}," Rückmeldung ",-1)])),_:1},8,["src"])]),s(ae,{style:{padding:"0",height:"calc(100% - 196px)"}},{default:c(()=>[s(me,{class:"fit",style:{padding:"0 16px 0 16px"},"thumb-style":{width:"6px",borderRadius:"8px 0 0 8px"}},{default:c(()=>[i("div",Ce,[e[12]||(e[12]=i("p",{class:"text-body1 q-pt-md"},[i("b",null,"Sag, was du denkst!"),E(" Jede Rückmeldung, egal ob positiv oder negativ, hilft weiter. ")],-1)),i("p",{class:"text-body2"},[e[9]||(e[9]=E(" Jegliche ")),i("a",{class:"link",onClick:t.toSupport},"Unterstützung"),e[10]||(e[10]=E(" für das Projekt ist willkommen. "))]),i("div",Se,[s(Q,{modelValue:t.message.subject,"onUpdate:modelValue":e[0]||(e[0]=o=>t.message.subject=o),dense:"","aria-label":"Betreff",outlined:"",counter:"",placeholder:"Betreff",maxlength:"60"},{prepend:c(()=>[s(w,{name:"wd-subject"})]),_:1},8,["modelValue"]),s(Q,{dense:"",modelValue:t.message.email,"onUpdate:modelValue":e[3]||(e[3]=o=>t.message.email=o),outlined:"","aria-label":"E-Mail",placeholder:"name@domain.com",type:"email",maxlength:"100",rules:[o=>!!o||"E-Mail fehlt"],disable:t.anonymous},{prepend:c(()=>[s(w,{name:"wd-at"})]),append:c(()=>[t.anonymous?(h(),C(r,{key:0,onClick:e[1]||(e[1]=o=>t.setAnonym(!1)),class:"anonym_icon"})):(h(),C(y,{key:1,onClick:e[2]||(e[2]=o=>t.setAnonym(!0)),class:"anonym_icon"}))]),_:1},8,["modelValue","rules","disable"]),s(Q,{modelValue:t.message.message,"onUpdate:modelValue":e[4]||(e[4]=o=>t.message.message=o),autogrow:"",counter:"","aria-label":"Nachricht",placeholder:"Nachricht",dense:"",outlined:"",type:"textarea",maxlength:"10000",rules:[o=>!!o||"Nachricht fehlt"]},{prepend:c(()=>[s(w,{name:"wd-text-outline"})]),_:1},8,["modelValue","rules"]),(h(!0),U(le,null,ne(t.urls,(o,k)=>(h(),C(Q,{key:o.id,modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,dense:"",outlined:"",maxlength:"300",placeholder:o.placeholder},{prepend:c(()=>[s(w,{name:"wd-link"})]),after:c(()=>[s(w,{name:"wd-close",onClick:x=>t.removeUrl(k),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]))),128)),i("div",we,[t.urls.length<4?(h(),C(q,{key:0,onClick:e[5]||(e[5]=o=>t.addUrl()),class:"text-grey-8 float-right",label:"URL",flat:"",icon:"wd-add-outline"})):z("",!0)]),i("div",null,[t.anonymous?z("",!0):(h(),C(se,{key:0,modelValue:t.message.get_updates,"onUpdate:modelValue":e[6]||(e[6]=o=>t.message.get_updates=o),"checked-icon":"wd-bell","unchecked-icon":"wd-bell-outline",color:"accent",size:"lg"},{default:c(()=>e[11]||(e[11]=[E(" Halte mich auf dem Laufenden."),i("br",null,null,-1),i("span",{class:"text-caption"},"Bei wichtigen Updates erhältst du eine E-Mail. ",-1)])),_:1},8,["modelValue"]))])])])]),_:1})]),_:1}),s(re),s(ie,null,{default:c(()=>[s(q,{label:"Schliessen",color:"secondary-700",flat:"",onClick:e[7]||(e[7]=o=>t.onClose()),class:"q-ml-sm"}),s(q,{label:"Zurücksetzen",type:"reset",color:"secondary-700",flat:"",class:"q-ml-sm"}),s(ue),s(q,{label:"Senden",flat:"",type:"submit",color:"accent"})]),_:1})]),_:1})]),_:1},8,["class"])}const Me=ee(_e,[["render",Ve],["__scopeId","data-v-b2a818d2"],["__file","WdFeedbackForm.vue"]]);export{Me as default};
