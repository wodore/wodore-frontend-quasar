import{g as N,b as $,Q as j,a as A}from"./imageService-BCE-N1To.js";import{h as z,l as L,s as E,aT as O,aW as T,aX as W,z as D,D as M,F as J,aY as Z,am as B,A as K,aP as X,aZ as Y,d as G,u as H,ar as ee,o as C,c as F,L as i,a7 as te,N as Q,a_ as ae,e as a,f as p,a$ as oe,g as P,a6 as V,Q as y,a as se,aq as ne,R as le,M as w,O as re,b0 as ie,b1 as ce,b2 as ue,b3 as de,_ as me}from"./index-BdMyLxH_.js";import{u as fe}from"./use-quasar-BwuFy2bB.js";import{c as pe}from"./index-k3Z972Gb.js";import"./QScrollObserver-4vZBY53e.js";import"./use-hydration-C_CvfzrY.js";import"./_commonjsHelpers-C4iS2aBk.js";const he=z({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(l,{slots:h,emit:m}){const s=L(),n=E(null);let f=0;const u=[];function x(e){const t=typeof e=="boolean"?e:l.noErrorFocus!==!0,b=++f,v=(o,r)=>{m(`validation${o===!0?"Success":"Error"}`,r)},I=o=>{const r=o.validate();return typeof r.then=="function"?r.then(d=>({valid:d,comp:o}),d=>({valid:!1,comp:o,err:d})):Promise.resolve({valid:r,comp:o})};return(l.greedy===!0?Promise.all(u.map(I)).then(o=>o.filter(r=>r.valid!==!0)):u.reduce((o,r)=>o.then(()=>I(r).then(d=>{if(d.valid===!1)return Promise.reject(d)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return b===f&&v(!0),!0;if(b===f){const{comp:r,err:d}=o[0];if(d!==void 0&&console.error(d),v(!1,r),t===!0){const R=o.find(({comp:U})=>typeof U.focus=="function"&&Z(U.$)===!1);R!==void 0&&R.comp.focus()}}return!1})}function k(){f++,u.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function _(e){e!==void 0&&B(e);const t=f+1;x().then(b=>{t===f&&b===!0&&(l.onSubmit!==void 0?m("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function S(e){e!==void 0&&B(e),m("reset"),K(()=>{k(),l.autofocus===!0&&l.noResetFocus!==!0&&g()})}function g(){X(()=>{if(n.value===null)return;const e=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),t=>t.tabIndex!==-1);e?.focus({preventScroll:!0})})}O(Y,{bindComponent(e){u.push(e)},unbindComponent(e){const t=u.indexOf(e);t!==-1&&u.splice(t,1)}});let c=!1;return T(()=>{c=!0}),W(()=>{c===!0&&l.autofocus===!0&&g()}),D(()=>{l.autofocus===!0&&g()}),Object.assign(s.proxy,{validate:x,resetValidation:k,submit:_,reset:S,focus:g,getValidationComponents:()=>u}),()=>M("form",{class:"q-form",ref:n,onSubmit:_,onReset:S},J(h.default))}}),q=l=>(ue("data-v-69cabe63"),l=l(),de(),l),ge=q(()=>p("div",{class:"card-header absolute-bottom text-white text-h5"},null,-1)),ve=q(()=>p("div",{class:"absolute-bottom text-accent-400 text-h4 text-center card-header__text"}," Rückmeldung ",-1)),be={class:"col no-wrap items-center q-py-md"},xe=q(()=>p("p",{class:"text-body1 q-pt-md"}," Sag uns, was du denkst! Jede Rückmeldung, egal ob positiv oder negativ, hilft uns weiter. ",-1)),ye={class:"q-gutter-md q-pt-md"},ke="https://cdn.pixabay.com/photo/2014/05/11/11/12/mailbox-341744_1280.jpg",_e=G({__name:"WdFeedbackForm",setup(l){const h=fe(),m=H(),s=ee({email:"",subject:"",message:"",urls:[]}),n=E([]);function f(){console.debug(`Submitted form for '${s.email}'`,s.message),s.urls=n.value.map(c=>c.value),pe.POST("/v1/feedback/",{body:s}).then(()=>{h.notify({color:"positive",textColor:"black",icon:"wd-checkmark",message:"Nachricht gesendet"}),m.go(-1),setTimeout(()=>{x()},200)}).catch(()=>{h.notify({color:"negative",textColor:"black",icon:"wd-close",message:"Nachricht konnte nicht gesendet werden"})})}function u(){s.email||s.message?h.dialog({dark:!0,title:"Confirm",message:"Do you want to close it and dismiss the data?",cancel:!0,persistent:!0}).onOk(()=>{m.go(-1)}):m.go(-1)}function x(){s.email="",s.message=""}function k(){const c=n.value.length,e=c>0?n.value[c-1].id+1:0;console.log(n.value),console.log(e),n.value.push({value:"",id:e,placeholder:`URL ${e+1}`})}function _(c){n.value.splice(c,1)}function S(){m.replace({name:"support"})}const g=N(ke,{focal:"0.5,0.45",size:"800x300",quality:50});return console.log(g),(c,e)=>(C(),F(ae,{class:te({"card--desktop":Q(h).screen.gt.xs,"card--mobile":Q(h).screen.xs})},{default:i(()=>[a(he,{onSubmit:f,onReset:x,class:"fit"},{default:i(()=>[p("div",null,[a($,{src:Q(g),style:{height:"140px"},class:"shadow-4"},{default:i(()=>[ge,ve]),_:1},8,["src"])]),a(oe,{style:{padding:"0",height:"calc(100% - 196px)"}},{default:i(()=>[a(j,{class:"fit",style:{padding:"0 16px 0 16px"},"thumb-style":{width:"6px",borderRadius:"8px 0 0 8px"}},{default:i(()=>[p("div",be,[xe,p("p",{class:"text-body2"},[P(" Jegliche "),p("a",{class:"link",onClick:S},"Unterstützung"),P(" für das Projekt ist willkommen. ")]),p("div",ye,[a(V,{modelValue:s.subject,"onUpdate:modelValue":e[0]||(e[0]=t=>s.subject=t),dense:"","aria-label":"Betreff",outlined:"",counter:"",placeholder:"Betreff",maxlength:"60"},{prepend:i(()=>[a(y,{name:"wd-subject"})]),_:1},8,["modelValue"]),a(V,{dense:"",modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=t=>s.email=t),outlined:"","aria-label":"E-Mail",placeholder:"name@domain.com",type:"email",maxlength:"100",rules:[t=>!!t||"E-Mail fehlt"]},{prepend:i(()=>[a(y,{name:"wd-at"})]),_:1},8,["modelValue","rules"]),a(V,{modelValue:s.message,"onUpdate:modelValue":e[2]||(e[2]=t=>s.message=t),autogrow:"",counter:"","aria-label":"Nachricht",placeholder:"Nachricht",dense:"",outlined:"",type:"textarea",maxlength:"10000",rules:[t=>!!t||"Nachricht fehlt"]},{prepend:i(()=>[a(y,{name:"wd-text-outline"})]),_:1},8,["modelValue","rules"]),(C(!0),se(le,null,ne(n.value,(t,b)=>(C(),F(V,{key:t.id,modelValue:t.value,"onUpdate:modelValue":v=>t.value=v,dense:"",outlined:"",maxlength:"300",placeholder:t.placeholder,rules:[v=>!!v||"URL fehlt"]},{prepend:i(()=>[a(y,{name:"wd-link"})]),append:i(()=>[a(y,{name:"wd-close",onClick:v=>_(b),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","rules"]))),128)),n.value.length<4?(C(),F(w,{key:0,onClick:e[3]||(e[3]=t=>k()),class:"text-grey-8",label:"URL",flat:"",icon:"wd-add-outline"})):re("",!0)])])]),_:1})]),_:1}),a(ie),a(ce,null,{default:i(()=>[a(w,{label:"Schliessen",color:"secondary-700",flat:"",onClick:e[4]||(e[4]=t=>u()),class:"q-ml-sm"}),a(w,{label:"Zurücksetzen",type:"reset",color:"secondary-700",flat:"",class:"q-ml-sm"}),a(A),a(w,{label:"Senden",flat:"",type:"submit",color:"accent"})]),_:1})]),_:1})]),_:1},8,["class"]))}}),Re=me(_e,[["__scopeId","data-v-69cabe63"],["__file","WdFeedbackForm.vue"]]);export{Re as default};
