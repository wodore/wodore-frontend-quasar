import{C as v,D as R,G as j,j as u,c as H,u as J,d as X,r as w,aY as K,g as W,k as ee,aG as te,aZ as oe,q as S,Q as A,t as Y,af as ae,P as U,i as O,h as I,v as se,y as E,E as C,F as k,H as b,a9 as le,N as ne,aa as ie,J as V,_ as F,z as re,A as ce,L as ue,ai as de,p as pe,a_ as fe,I as f,a$ as me,b0 as ge,M as he,R as ve,S as ye,B as T,b1 as _e}from"./index-DtbzENW4.js";import{L as be,_ as we,j as xe,F as Se,c as ke,C as $e}from"./vue-maplibre-gl.es-Cxgi7v6m.js";import{u as D}from"./use-quasar-C3-wPey1.js";import{Q as Ce}from"./QTooltip-DOjlNgBa.js";import"./_commonjsHelpers-C4iS2aBk.js";const Me={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},qe=j("path",{fill:"currentColor",d:"M17 8h-7V6a2 2 0 0 1 4 0a1 1 0 0 0 2 0a4 4 0 0 0-8 0v2H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m1 11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"},null,-1),Le=j("path",{fill:"currentColor",d:"M12 12a3 3 0 1 0 3 3a3 3 0 0 0-3-3m0 4a1 1 0 1 1 1-1a1 1 0 0 1-1 1"},null,-1),ze=[qe,Le];function je(e,t){return v(),R("svg",Me,[...ze])}const Be={name:"eva-unlock-outline",render:je},Ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Pe=j("circle",{cx:"12",cy:"15",r:"1",fill:"currentColor"},null,-1),Ie=j("path",{fill:"currentColor",d:"M17 8h-1V6.11a4 4 0 1 0-8 0V8H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m-7-1.89A2.06 2.06 0 0 1 12 4a2.06 2.06 0 0 1 2 2.11V8h-4ZM12 18a3 3 0 1 1 3-3a3 3 0 0 1-3 3"},null,-1),Qe=[Pe,Ie];function Re(e,t){return v(),R("svg",Ve,[...Qe])}const Ae={name:"eva-lock-fill",render:Re},Oe=["top","right","bottom","left"],Z={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Oe.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Ee(e,t){return{formClass:u(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:u(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:u(()=>{if(e.externalLabel===!0){const s=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(s===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Fe=["up","right","down","left"],Te=["left","center","right"],Ze=H({name:"QFab",props:{...Z,...J,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...Z.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>Fe.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Te.includes(e)}},emits:X,setup(e,{slots:t}){const s=w(null),o=w(e.modelValue===!0),i=K(),{proxy:{$q:d}}=W(),{formClass:m,labelProps:g}=Ee(e,o),r=u(()=>e.persistent!==!0),{hide:$,toggle:M}=ee({showing:o,hideOnRouteChange:r}),a=u(()=>({opened:o.value})),n=u(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${m.value}`+(o.value===!0?" q-fab--opened":" q-fab--closed")),c=u(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${o.value===!0?"opened":"closed"}`),y=u(()=>{const h={id:i.value,role:"menu"};return o.value!==!0&&(h["aria-hidden"]="true"),h}),p=u(()=>`q-fab__icon-holder  q-fab__icon-holder--${o.value===!0?"opened":"closed"}`);function q(h,z){const l=t[h],_=`q-fab__${h} absolute-full`;return l===void 0?S(U,{class:_,name:e[z]||d.iconSet.fab[z]}):S("div",{class:_},l(a.value))}function L(){const h=[];return e.hideIcon!==!0&&h.push(S("div",{class:p.value},[q("icon","icon"),q("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&h[g.value.action](S("div",g.value.data,t.label!==void 0?t.label(a.value):[e.label])),ae(t.tooltip,h)}return te(oe,{showing:o,onChildClick(h){$(h),s.value!==null&&s.value.$el.focus()}}),()=>S("div",{class:n.value},[S(A,{ref:s,class:m.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i.value,onClick:M},L),S("div",{class:c.value,...y.value},Y(t.default))])}}),He={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function We(){const{props:e,proxy:{$q:t}}=W(),s=O(se,I);if(s===I)return console.error("QPageSticky needs to be child of QLayout"),I;const o=u(()=>{const a=e.position;return{top:a.indexOf("top")!==-1,right:a.indexOf("right")!==-1,bottom:a.indexOf("bottom")!==-1,left:a.indexOf("left")!==-1,vertical:a==="top"||a==="bottom",horizontal:a==="left"||a==="right"}}),i=u(()=>s.header.offset),d=u(()=>s.right.offset),m=u(()=>s.footer.offset),g=u(()=>s.left.offset),r=u(()=>{let a=0,n=0;const c=o.value,y=t.lang.rtl===!0?-1:1;c.top===!0&&i.value!==0?n=`${i.value}px`:c.bottom===!0&&m.value!==0&&(n=`${-m.value}px`),c.left===!0&&g.value!==0?a=`${y*g.value}px`:c.right===!0&&d.value!==0&&(a=`${-y*d.value}px`);const p={transform:`translate(${a}, ${n})`};return e.offset&&(p.margin=`${e.offset[1]}px ${e.offset[0]}px`),c.vertical===!0?(g.value!==0&&(p[t.lang.rtl===!0?"right":"left"]=`${g.value}px`),d.value!==0&&(p[t.lang.rtl===!0?"left":"right"]=`${d.value}px`)):c.horizontal===!0&&(i.value!==0&&(p.top=`${i.value}px`),m.value!==0&&(p.bottom=`${m.value}px`)),p}),$=u(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function M(a){const n=Y(a.default);return S("div",{class:$.value,style:r.value},e.expand===!0?n:[S("div",n)])}return{$layout:s,getStickyContent:M}}const Ye=H({name:"QPageSticky",props:He,setup(e,{slots:t}){const{getStickyContent:s}=We();return()=>s(t)}}),Ue=["src"],De=E({__name:"WdMapStyleSwitchItem",props:{item:{}},setup(e){return(t,s)=>(v(),C(A,{round:"",style:{padding:"0"},ripple:!1,color:t.item.active?"accent-500":"primary-400"},{default:k(()=>[b(le,{size:"55px"},{default:k(()=>[j("img",{style:{padding:"3px"},src:t.item.img},null,8,Ue)]),_:1}),t.$q.platform.is.desktop?(v(),C(Ce,{key:0},{default:k(()=>[ne(ie(t.item.label),1)]),_:1})):V("",!0)]),_:1},8,["color"]))}}),Ne=F(De,[["__file","WdMapStyleSwitchItem.vue"]]),Ge=E({__name:"WdMapStyleSwitcher",props:re({mapStyle:{},position:{default:"top-left"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=D(),s=w(!1),o=w(!1),i=O(be);function d(){if(r.value!==void 0){for(let a=0,n=r.value.length;a<n;a++)if(r.value[a].active)return r.value[a]}}function m(a){if(r.value===void 0)return!1;const n=d();if(n!==void 0&&a.name==n.name)return!1;i.value.setStyle(a.style,{diff:!1});for(let c=0,y=r.value.length;c<y;c++)r.value[c].active=!1;return a.active=!0,o.value||(s.value=!1),t.localStorage.set("currentStyle",a),!0}function g(){o.value=!o.value}const r=ce(e,"modelValue");console.debug(e.mapStyle);const M="img:"+new URL("/assets/style-switch-Dvj_H7Y5.svg",import.meta.url).href;return(a,n)=>{const c=Ae,y=Be;return v(),C(Ye,{position:a.position,offset:[18,18],style:{"z-index":"5"}},{default:k(()=>[b(Ze,{ref:"fabStyleRef",push:"","vertical-actions-align":"left",icon:M,padding:"sm",direction:"right",persistent:"",color:s.value?"negative-300":"primary-100",modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=p=>s.value=p)},{default:k(()=>[(v(!0),R(ue,null,de(r.value,(p,q)=>pe((v(),C(Ne,{tabindex:q,onClick:L=>m(p),key:p.name,item:p},null,8,["tabindex","onClick","item"])),[[fe,!0]])),128)),f(t).screen.gt.xs?(v(),C(A,{key:0,round:"",flat:"",style:{padding:"0"},ripple:!1,color:o.value?"accent-500":"secondary-800",onClick:g},{default:k(()=>[b(U,null,{default:k(()=>[o.value?(v(),C(c,{key:0})):V("",!0),o.value?V("",!0):(v(),C(y,{key:1}))]),_:1})]),_:1},8,["color"])):V("",!0)]),_:1},8,["color","modelValue"])]),_:1},8,["position"])}}}),Je=F(Ge,[["__file","WdMapStyleSwitcher.vue"]]),Xe=11,Ke={"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],7,7,9,10,22,16],"text-font":["Open Sans Semibold"],"text-anchor":"bottom","icon-allow-overlap":!0,"text-allow-overlap":!1,"symbol-sort-key":["get","type_id"],"icon-overlap":"always","text-overlap":"never","text-optional":!0,"icon-image":["step",["zoom"],["coalesce",["image",["concat","wodore:simple/",["get","type_open_slug"]]],["image","wodore:simple/unknown"]],Xe,["coalesce",["image",["concat","wodore:detailed/",["get","type_open_slug"]]],["image","wodore:detailed/unknown"]]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,9,.3,20,2],visibility:"visible"},et={"icon-opacity":["interpolate",["linear"],["zoom"],7,.7,12,.8,22,.85],"text-opacity":["step",["zoom"],0,9,1],"text-halo-width":2,"text-halo-color":"#ffffff","text-translate":["interpolate",["linear"],["zoom"],9,["literal",[0,-6]],20,["literal",[0,-40]]]};function tt({name:e,tiles:t,attribution:s}){const o={version:8,sources:{},glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",layers:[{id:`${e}-raster-layer`,type:"raster",source:`${e}-raster-tiles`,minzoom:0,maxzoom:22}]};return o.sources[`${e}-raster-tiles`]={type:"raster",tiles:t,tileSize:256,attribution:s},o}const ot="/assets/outdoor-v2-BR_lxvv7.png",at="/assets/satellite-C2H1DPJ2.png",st="/assets/select_map-BPM0HDk0.png",lt="/assets/swiss-raster-D1bEQQjo.png",nt="/assets/swiss-vector-BQsQYbTX.png",it=tt({name:"swiss-raster",tiles:["https://wmts0.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts1.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts2.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts3.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts4.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts5.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts6.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts7.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts8.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts9.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg"],attribution:'<a href="https://www.swisstopo.admin.ch/" target="_blank">&copy; swisstop</a>'});function B(e){return new URL(Object.assign({"/src/assets/wodore-design/map/switch/outdoor-v2.png":ot,"/src/assets/wodore-design/map/switch/satellite.png":at,"/src/assets/wodore-design/map/switch/select_map.png":st,"/src/assets/wodore-design/map/switch/swiss-raster.png":lt,"/src/assets/wodore-design/map/switch/swiss-vector.png":nt})[`/src/assets/wodore-design/map/switch/${e}`],import.meta.url).href}const rt=me("map-styles",()=>{function e(s){for(const o of t.value)o.name==s?o.active=!0:o.active=!1}const t=w([{name:"swiss-vector",label:"Topo Vector",active:!0,img:B("swiss-vector.png"),style:"https://api.maptiler.com/maps/ch-swisstopo-lbm-vivid/style.json?key=yYYuZy3hwmMjY087FDvY"},{name:"swiss-raster",label:"Topo Raster",img:B("swiss-raster.png"),style:it},{name:"satellite",label:"Satellite",img:B("satellite.png"),style:"https://api.maptiler.com/maps/hybrid/style.json?key=cQX2iET1gmOW38bedbUh"},{name:"outdoor-osm",label:"Outdoor OSM",img:B("outdoor-v2.png"),style:"https://api.maptiler.com/maps/outdoor-v2/style.json?key=yYYuZy3hwmMjY087FDvY"}]);return{styles:t,setActiveStyle:e}}),Q=8,ct=7.5,ut=E({__name:"WdMapView",setup(e){ge(l=>({"5822682e":m.value,a7b25764:$.value,"2d45d8b2":r.value,"4debd296":g.value}));const t=D(),s=he(),o=ve(),i=rt(),d=O("_q_l_"),m=w("0"),g=w("0"),r=w("0"),$=w("0");d===void 0?console.error("MapView needs to be child of QLayout"):ye(()=>{m.value=`${d.header.offset}px`,g.value=`${d.right.offset}px`,d.footer.offset<window.innerHeight-250&&(r.value=`${d.footer.offset}px`),$.value=`${d.left.offset}px`,console.debug("Layout offsets changed: (top, right, bottom, left): ",m.value,g.value,r.value,$.value)});const M=w("https://api.wodore.com/v1/huts/huts.geojson?lang=de&limit=5000&embed_all=false&embed_type=true&embed_owner=false&embed_capacity=false&embed_sources=false&include_elevation=false&include_name=true&flat=true");function a(l){console.debug(`Maplibre version ${l.map.version} loaded`),l.map.scrollZoom.setWheelZoomRate(.003),L(l)}function n(l){if(console.debug("Hut layer clicked."),l.target.getZoom()>Q){let _=l.features?.[0];if(console.debug("  Selected huts:",l.features?.map(x=>x.properties.slug)),_){const x=_.properties.slug;o.params.slug==x?s.push({name:"map",hash:o.hash,query:o.query}):s.push({name:"map-hut",params:{slug:x},hash:o.hash,query:o.query})}}}function c(l){l.target.getZoom()>Q&&(l.target.getCanvas().style.cursor="pointer")}function y(l){l.target.getZoom()>Q&&(l.target.getCanvas().style.cursor="")}const q="https://api.wodore.com"+"/static/huts/sprite";function L(l){console.debug("Style data changed");const _=l.map.getSprite();let x=!1;for(const P of _)P.id=="wodore"&&(x=!0);x||(console.debug(`Add sprite 'wodore' from '${q}'`),l.map.addSprite("wodore",q))}const h=[8.22,46.7],z=t.localStorage.hasItem("currentStyle")?t.localStorage.getItem("currentStyle"):i.styles[0];return i.setActiveStyle(z.name),(l,_)=>{const x=Je,P=T("MglGeolocationControl"),N=T("MglGeoJsonSource");return v(),C(f($e),{language:"de","onMap:styledata":L,"onMap:load":a,hash:"p",zoom:ct,center:h,"map-style":f(z).style,style:{position:"fixed",right:"0px",top:"0",bottom:"0",left:"0"}},{default:k(()=>[b(x,{modelValue:f(i).styles,"onUpdate:modelValue":_[0]||(_[0]=G=>f(i).styles=G),"map-style":f(i).styles[0]},null,8,["modelValue","map-style"]),b(P),b(f(we)),b(f(xe)),b(f(Se),{"map-styles":f(i).styles,"map-style":f(i).styles[0],position:"top-right"},null,8,["map-styles","map-style"]),b(N,{"source-id":"huts",data:M.value},{default:k(()=>[b(f(ke),{onClick:_e(n,["prevent"]),onMouseenter:c,onMouseleave:y,layout:f(Ke),paint:f(et),"layer-id":"huts"},null,8,["layout","paint"])]),_:1},8,["data"])]),_:1},8,["map-style"])}}}),ht=F(ut,[["__file","WdMapView.vue"]]);export{ht as default};
