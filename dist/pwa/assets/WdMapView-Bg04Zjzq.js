import{C as v,D as A,G as M,y as E,E as x,F as k,H as w,a9 as ee,N as te,aa as oe,J as L,Q as O,_ as W,j as p,c as Y,u as ae,d as se,r as S,aY as le,g as F,k as ne,aG as ie,aZ as re,q as y,t as U,af as ce,P as D,i as N,h as I,v as ue,a_ as pe,aN as de,a$ as R,L as fe,ai as me,I as h,p as ge,b0 as he,b1 as ve,M as _e,R as be,S as ye,B as Z,b2 as we}from"./index-BHRrNamL.js";import{Q as xe}from"./QTooltip-jRJdIYlv.js";import{u as G}from"./use-quasar-C2S7eP6D.js";import{h as Se,_ as ke,j as $e,x as Ce,c as Be,C as qe}from"./vue-maplibre-gl.es-DrH5peyB.js";import"./_commonjsHelpers-C4iS2aBk.js";const ze={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Le=M("path",{fill:"currentColor",d:"M17 8h-7V6a2 2 0 0 1 4 0a1 1 0 0 0 2 0a4 4 0 0 0-8 0v2H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m1 11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"},null,-1),Me=M("path",{fill:"currentColor",d:"M12 12a3 3 0 1 0 3 3a3 3 0 0 0-3-3m0 4a1 1 0 1 1 1-1a1 1 0 0 1-1 1"},null,-1),je=[Le,Me];function Pe(e,t){return v(),A("svg",ze,[...je])}const Ie={name:"eva-unlock-outline",render:Pe},Re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ve=M("circle",{cx:"12",cy:"15",r:"1",fill:"currentColor"},null,-1),Qe=M("path",{fill:"currentColor",d:"M17 8h-1V6.11a4 4 0 1 0-8 0V8H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m-7-1.89A2.06 2.06 0 0 1 12 4a2.06 2.06 0 0 1 2 2.11V8h-4ZM12 18a3 3 0 1 1 3-3a3 3 0 0 1-3 3"},null,-1),Te=[Ve,Qe];function Ae(e,t){return v(),A("svg",Re,[...Te])}const Ee={name:"eva-lock-fill",render:Ae},Oe=["src"],We=E({__name:"WdBasemapSwitchItem",props:{label:{},img:{},active:{type:Boolean},tooltip:{type:Boolean}},setup(e){return(t,a)=>(v(),x(O,{round:"",style:{padding:"0"},ripple:!1,color:t.active?"accent-500":"primary-400"},{default:k(()=>[w(ee,{size:"55px"},{default:k(()=>[M("img",{style:{padding:"3px"},src:t.img},null,8,Oe)]),_:1}),t.tooltip?(v(),x(xe,{key:0},{default:k(()=>[te(oe(t.label),1)]),_:1})):L("",!0)]),_:1},8,["color"]))}}),Ze=W(We,[["__file","WdBasemapSwitchItem.vue"]]),He=["top","right","bottom","left"],H={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>He.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Ye(e,t){return{formClass:p(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:p(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:p(()=>{if(e.externalLabel===!0){const a=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(a===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Fe=["up","right","down","left"],Ue=["left","center","right"],De=Y({name:"QFab",props:{...H,...ae,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...H.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>Fe.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Ue.includes(e)}},emits:se,setup(e,{slots:t}){const a=S(null),o=S(e.modelValue===!0),l=le(),{proxy:{$q:s}}=F(),{formClass:d,labelProps:c}=Ye(e,o),u=p(()=>e.persistent!==!0),{hide:_,toggle:B}=ne({showing:o,hideOnRouteChange:u}),n=p(()=>({opened:o.value})),m=p(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${d.value}`+(o.value===!0?" q-fab--opened":" q-fab--closed")),r=p(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${o.value===!0?"opened":"closed"}`),$=p(()=>{const f={id:l.value,role:"menu"};return o.value!==!0&&(f["aria-hidden"]="true"),f}),b=p(()=>`q-fab__icon-holder  q-fab__icon-holder--${o.value===!0?"opened":"closed"}`);function z(f,i){const C=t[f],g=`q-fab__${f} absolute-full`;return C===void 0?y(D,{class:g,name:e[i]||s.iconSet.fab[i]}):y("div",{class:g},C(n.value))}function j(){const f=[];return e.hideIcon!==!0&&f.push(y("div",{class:b.value},[z("icon","icon"),z("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&f[c.value.action](y("div",c.value.data,t.label!==void 0?t.label(n.value):[e.label])),ce(t.tooltip,f)}return ie(re,{showing:o,onChildClick(f){_(f),a.value!==null&&a.value.$el.focus()}}),()=>y("div",{class:m.value},[y(O,{ref:a,class:d.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":l.value,onClick:B},j),y("div",{class:r.value,...$.value},U(t.default))])}}),Ne={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Ge(){const{props:e,proxy:{$q:t}}=F(),a=N(ue,I);if(a===I)return console.error("QPageSticky needs to be child of QLayout"),I;const o=p(()=>{const n=e.position;return{top:n.indexOf("top")!==-1,right:n.indexOf("right")!==-1,bottom:n.indexOf("bottom")!==-1,left:n.indexOf("left")!==-1,vertical:n==="top"||n==="bottom",horizontal:n==="left"||n==="right"}}),l=p(()=>a.header.offset),s=p(()=>a.right.offset),d=p(()=>a.footer.offset),c=p(()=>a.left.offset),u=p(()=>{let n=0,m=0;const r=o.value,$=t.lang.rtl===!0?-1:1;r.top===!0&&l.value!==0?m=`${l.value}px`:r.bottom===!0&&d.value!==0&&(m=`${-d.value}px`),r.left===!0&&c.value!==0?n=`${$*c.value}px`:r.right===!0&&s.value!==0&&(n=`${-$*s.value}px`);const b={transform:`translate(${n}, ${m})`};return e.offset&&(b.margin=`${e.offset[1]}px ${e.offset[0]}px`),r.vertical===!0?(c.value!==0&&(b[t.lang.rtl===!0?"right":"left"]=`${c.value}px`),s.value!==0&&(b[t.lang.rtl===!0?"left":"right"]=`${s.value}px`)):r.horizontal===!0&&(l.value!==0&&(b.top=`${l.value}px`),d.value!==0&&(b.bottom=`${d.value}px`)),b}),_=p(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function B(n){const m=U(n.default);return y("div",{class:_.value,style:u.value},e.expand===!0?m:[y("div",m)])}return{$layout:a,getStickyContent:B}}const Je=Y({name:"QPageSticky",props:Ne,setup(e,{slots:t}){const{getStickyContent:a}=Ge();return()=>a(t)}}),Xe="/assets/oe-raster-EIpPqIBW.png",Ke="/assets/outdoor-v2-BR_lxvv7.png",et="/assets/satellite-C2H1DPJ2.png",tt="/assets/select_map-BPM0HDk0.png",ot="/assets/swiss-raster-D1bEQQjo.png",at="/assets/swiss-vector-BQsQYbTX.png",st=11,lt={"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],7,7,9,10,22,16],"text-font":["Open Sans Semibold"],"text-anchor":"bottom","icon-allow-overlap":!0,"text-allow-overlap":!1,"symbol-sort-key":["get","type_id"],"icon-overlap":"always","text-overlap":"never","text-optional":!0,"icon-image":["step",["zoom"],["coalesce",["image",["concat","wodore:simple/",["get","type_open_slug"]]],["image","wodore:simple/unknown"]],st,["coalesce",["image",["concat","wodore:detailed/",["get","type_open_slug"]]],["image","wodore:detailed/unknown"]]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,9,.3,20,2],visibility:"visible"},nt={"icon-opacity":["interpolate",["linear"],["zoom"],7,.7,12,.8,22,.85],"text-opacity":["step",["zoom"],0,9,1],"text-halo-width":2,"text-halo-color":"#ffffff","text-translate":["interpolate",["linear"],["zoom"],9,["literal",[0,-6]],20,["literal",[0,-40]]]};function J({name:e,tiles:t,attribution:a,tileSize:o=256}){const l={version:8,sources:{},glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",layers:[{id:`${e}-raster-layer`,type:"raster",source:`${e}-raster-tiles`,minzoom:0,maxzoom:22}]};return l.sources[`${e}-raster-tiles`]={type:"raster",tiles:t,tileSize:o,attribution:a},l}const it=J({name:"swiss-raster",tiles:["https://wmts0.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts1.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts2.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts3.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts4.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts5.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts6.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts7.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts8.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts9.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg"],attribution:'<a href="https://www.swisstopo.admin.ch/" target="_blank">&copy; swisstop</a>'}),V="bmaphidpi",Q="jpeg",rt=J({name:"oe-raster",tiles:["https://maps1.wien.gv.at/basemap/"+V+"/normal/google3857/{z}/{y}/{x}."+Q,"https://maps2.wien.gv.at/basemap/"+V+"/normal/google3857/{z}/{y}/{x}."+Q,"https://maps3.wien.gv.at/basemap/"+V+"/normal/google3857/{z}/{y}/{x}."+Q],attribution:'<a href="https://www.swisstopo.admin.ch/" target="_blank">&copy; swisstop</a>',tileSize:512});function q(e){return new URL(Object.assign({"/src/assets/wodore-design/map/switch/oe-raster.png":Xe,"/src/assets/wodore-design/map/switch/outdoor-v2.png":Ke,"/src/assets/wodore-design/map/switch/satellite.png":et,"/src/assets/wodore-design/map/switch/select_map.png":tt,"/src/assets/wodore-design/map/switch/swiss-raster.png":ot,"/src/assets/wodore-design/map/switch/swiss-vector.png":at})[`/src/assets/wodore-design/map/switch/${e}`],import.meta.url).href}const X=pe("basemap",()=>{const e=Se();function t(){for(const s of o)if(s.active)return s}function a(s,d=!1){const c=t();if(c!==void 0&&s.name==c.name&&!d)return console.debug("Active baselayer is already set."),!1;e.map?.setStyle(s.style,{diff:!1});for(const u of o)u.name==s.name?u.active=!0:u.active=!1;return R.set("basemapStyle",s),console.debug("Map layer is set to ",s.label),!0}const o=de([{name:"swiss-vector",label:"Schweiz Topo Vector",active:!0,show:!0,img:q("swiss-vector.png"),style:"https://api.maptiler.com/maps/ch-swisstopo-lbm-vivid/style.json?key=yYYuZy3hwmMjY087FDvY"},{name:"swiss-raster",label:"Schweiz Topo Raster",show:!0,img:q("swiss-raster.png"),style:it},{name:"satellite",label:"Satellite",show:!0,img:q("satellite.png"),style:"https://api.maptiler.com/maps/hybrid/style.json?key=cQX2iET1gmOW38bedbUh"},{name:"outdoor-osm",label:"Outdoor OSM",show:!1,img:q("outdoor-v2.png"),style:"https://api.maptiler.com/maps/outdoor-v2/style.json?key=yYYuZy3hwmMjY087FDvY"},{name:"oe-vector",label:"Östereich Topo Vector",active:!0,show:!1,img:q("swiss-vector.png"),style:"styles/basemapv-bmapv-3857-resources-styles-root.json"},{name:"oe-raster",label:"Östereich Topo Raster",show:!0,img:q("oe-raster.png"),style:rt}]),l=R.hasItem("basemapStyle")?R.getItem("basemapStyle"):o[0];return a(l),{basemaps:o,setBasemap:a,getBasemap:t}}),ct=E({__name:"WdBasemapSwitch",props:{position:{default:"top-left"},direction:{default:"right"}},setup(e){const t=X(),a=G(),o=S(!1),l=S(!1);function s(u){return t.setBasemap(u),l.value||(o.value=!1),!0}function d(){l.value=!l.value}const c="img:"+new URL("/assets/style-switch-Dvj_H7Y5.svg",import.meta.url).href;return(u,_)=>{const B=Ze,n=Ee,m=Ie;return v(),x(Je,{position:u.position,offset:[18,24],style:{"z-index":"5"}},{default:k(()=>[w(De,{ref:"fabStyleRef",push:"","vertical-actions-align":"left",icon:c,padding:"sm",direction:u.direction,persistent:"",color:o.value?"negative-400":"primary-100",modelValue:o.value,"onUpdate:modelValue":_[0]||(_[0]=r=>o.value=r)},{default:k(()=>[(v(!0),A(fe,null,me(h(t).basemaps,(r,$)=>ge((v(),x(B,{tabindex:$,onClick:b=>s(r),key:r.name,label:r.label,img:r.img,active:r.active,tooltip:h(a).platform.is.desktop},null,8,["tabindex","onClick","label","img","active","tooltip"])),[[he,r.show]])),128)),h(a).screen.gt.xs?(v(),x(O,{key:0,round:"",flat:"",style:{padding:"0"},ripple:!1,color:l.value?"accent-500":"secondary-800",onClick:d},{default:k(()=>[w(D,null,{default:k(()=>[l.value?(v(),x(n,{key:0})):L("",!0),l.value?L("",!0):(v(),x(m,{key:1}))]),_:1})]),_:1},8,["color"])):L("",!0)]),_:1},8,["direction","color","modelValue"])]),_:1},8,["position"])}}}),ut=W(ct,[["__file","WdBasemapSwitch.vue"]]),T=8,pt=7.5,dt=E({__name:"WdMapView",setup(e){ve(i=>({d86e3c72:d.value,"3560e456":_.value,"81b3670e":u.value,"760ee3e4":c.value}));const t=G(),a=_e(),o=be(),l=X(),s=N("_q_l_"),d=S("0"),c=S("0"),u=S("0"),_=S("0");s===void 0?console.error("MapView needs to be child of QLayout"):ye(()=>{d.value=`${s.header.offset}px`,c.value=`${s.right.offset}px`,s.footer.offset<window.innerHeight-250&&(u.value=`${s.footer.offset}px`),_.value=`${s.left.offset}px`,console.debug("Layout offsets changed: (top, right, bottom, left): ",d.value,c.value,u.value,_.value)});const B=S("https://api.wodore.com/v1/huts/huts.geojson?lang=de&limit=5000&embed_all=false&embed_type=true&embed_owner=false&embed_capacity=false&embed_sources=false&include_elevation=false&include_name=true&flat=true");function n(i){console.debug(`Maplibre version ${i.map.version} loaded`),i.map.scrollZoom.setWheelZoomRate(.003),j(i)}function m(i){if(console.debug("Hut layer clicked."),i.target.getZoom()>T){let C=i.features?.[0];if(console.debug("  Selected huts:",i.features?.map(g=>g.properties.slug)),C){const g=C.properties.slug;o.params.slug==g?a.push({name:"map",hash:o.hash,query:o.query}):a.push({name:"map-hut",params:{slug:g},hash:o.hash,query:o.query})}}}function r(i){i.target.getZoom()>T&&(i.target.getCanvas().style.cursor="pointer")}function $(i){i.target.getZoom()>T&&(i.target.getCanvas().style.cursor="")}const z="https://api.wodore.com"+"/static/huts/sprite";function j(i){console.debug("Style data changed");const C=i.map.getSprite();let g=!1;for(const P of C)P.id=="wodore"&&(g=!0);g||(console.debug(`Add sprite 'wodore' from '${z}'`),i.map.addSprite("wodore",z))}const f=[8.22,46.7];return(i,C)=>{const g=ut,P=Z("MglGeolocationControl"),K=Z("MglGeoJsonSource");return v(),x(h(qe),{language:"de","onMap:styledata":j,"onMap:load":n,hash:"p","map-style":h(l).getBasemap()?.style,zoom:pt,"attribution-control":!1,center:f,style:{position:"fixed",right:"0px",top:"0",bottom:"0",left:"0"}},{default:k(()=>[w(g,{position:"bottom-right",direction:"left"}),w(P),h(t).platform.is.desktop?(v(),x(h(ke),{key:0})):L("",!0),w(h($e)),w(h(Ce),{position:"bottom-right"}),w(K,{"source-id":"huts",data:B.value},{default:k(()=>[w(h(Be),{onClick:we(m,["prevent"]),onMouseenter:r,onMouseleave:$,layout:h(lt),paint:h(nt),"layer-id":"huts"},null,8,["layout","paint"])]),_:1},8,["data"])]),_:1},8,["map-style"])}}}),_t=W(dt,[["__file","WdMapView.vue"]]);export{_t as default};
