import{bo as Se,g as ue,r as $,b3 as Ee,aO as K,n as He,aM as q,w as W,o as Re,p as z,aR as I,aS as N,bp as X,aJ as je,b9 as Ce,c as Ae,u as We,ab as B,aU as $e,d as Pe,j as k,aV as Me,f as ke,ac as qe,k as ze,aW as Le,aY as Oe,s as Z,Y as De,v as Ue,am as Be,bq as ee,bj as Fe,br as Ie}from"./index-u1bw1PO_.js";function Q(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Se.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const ce={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},rt={...ce,contextMenu:Boolean};function Ne({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:o,proxy:i,emit:r}=ue(),l=$(null);let a=null;function d(u){return l.value===null?!1:u===void 0||u.touches===void 0||u.touches.length<=1}const s={};n===void 0&&(Object.assign(s,{hide(u){i.hide(u)},toggle(u){i.toggle(u),u.qAnchorHandled=!0},toggleKey(u){Ee(u,13)===!0&&s.toggle(u)},contextClick(u){i.hide(u),K(u),He(()=>{i.show(u),u.qAnchorHandled=!0})},prevent:K,mobileTouch(u){if(s.mobileCleanup(u),d(u)!==!0)return;i.hide(u),l.value.classList.add("non-selectable");const f=u.target;q(s,"anchor",[[f,"touchmove","mobileCleanup","passive"],[f,"touchend","mobileCleanup","passive"],[f,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","prevent","notPassive"]]),a=setTimeout(()=>{a=null,i.show(u),u.qAnchorHandled=!0},300)},mobileCleanup(u){l.value.classList.remove("non-selectable"),a!==null&&(clearTimeout(a),a=null),e.value===!0&&u!==void 0&&Q()}}),n=function(u=o.contextMenu){if(o.noParentEvent===!0||l.value===null)return;let f;u===!0?i.$q.platform.is.mobile===!0?f=[[l.value,"touchstart","mobileTouch","passive"]]:f=[[l.value,"mousedown","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:f=[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],q(s,"anchor",f)});function c(){I(s,"anchor")}function x(u){for(l.value=u;l.value.classList.contains("q-anchor--skip");)l.value=l.value.parentNode;n()}function S(){if(o.target===!1||o.target===""||i.$el.parentNode===null)l.value=null;else if(o.target===!0)x(i.$el.parentNode);else{let u=o.target;if(typeof o.target=="string")try{u=document.querySelector(o.target)}catch{u=void 0}u!=null?(l.value=u.$el||u,n()):(l.value=null,console.error(`Anchor: target "${o.target}" not found`))}}return W(()=>o.contextMenu,u=>{l.value!==null&&(c(),n(u))}),W(()=>o.target,()=>{l.value!==null&&c(),S()}),W(()=>o.noParentEvent,u=>{l.value!==null&&(u===!0?c():n())}),Re(()=>{S(),t!==!0&&o.modelValue===!0&&l.value===null&&r("update:modelValue",!1)}),z(()=>{a!==null&&clearTimeout(a),c()}),{anchorEl:l,canShow:d,anchorEvents:s}}function Qe(e,t){const n=$(null);let o;function i(a,d){const s=`${d!==void 0?"add":"remove"}EventListener`,c=d!==void 0?d:o;a!==window&&a[s]("scroll",c,N.passive),window[s]("scroll",c,N.passive),o=d}function r(){n.value!==null&&(i(n.value),n.value=null)}const l=W(()=>e.noParentEvent,()=>{n.value!==null&&(r(),t())});return z(l),{localScrollTarget:n,unconfigureScrollTarget:r,changeScrollEvent:i}}const{notPassiveCapture:L}=N,j=[];function O(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=X.length-1;for(;n>=0;){const o=X[n].$;if(o.type.name==="QTooltip"){n--;continue}if(o.type.name!=="QDialog")break;if(o.props.seamless!==!0)return;n--}for(let o=j.length-1;o>=0;o--){const i=j[o];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function Ge(e){j.push(e),j.length===1&&(document.addEventListener("mousedown",O,L),document.addEventListener("touchstart",O,L))}function te(e){const t=j.findIndex(n=>n===e);t!==-1&&(j.splice(t,1),j.length===0&&(document.removeEventListener("mousedown",O,L),document.removeEventListener("touchstart",O,L)))}let ne,oe;function ie(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ve(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const G={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{G[`${e}#ltr`]=e,G[`${e}#rtl`]=e});function le(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:G[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function _e(e,t){let{top:n,left:o,right:i,bottom:r,width:l,height:a}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],o-=t[0],r+=t[1],i+=t[0],l+=t[0],a+=t[1]),{top:n,bottom:r,height:a,left:o,right:i,width:l,middle:o+(i-o)/2,center:n+(r-n)/2}}function Ye(e,t,n){let{top:o,left:i}=e.getBoundingClientRect();return o+=t.top,i+=t.left,n!==void 0&&(o+=n[1],i+=n[0]),{top:o,bottom:o+1,height:1,left:i,right:i+1,width:1,middle:i,center:o}}function Je(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function re(e,t,n,o){return{top:e[n.vertical]-t[o.vertical],left:e[n.horizontal]-t[o.horizontal]}}function de(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{de(e,t+1)},10);return}const{targetEl:n,offset:o,anchorEl:i,anchorOrigin:r,selfOrigin:l,absoluteOffset:a,fit:d,cover:s,maxHeight:c,maxWidth:x}=e;if(je.is.ios===!0&&window.visualViewport!==void 0){const m=document.body.style,{offsetLeft:y,offsetTop:v}=window.visualViewport;y!==ne&&(m.setProperty("--q-pe-left",y+"px"),ne=y),v!==oe&&(m.setProperty("--q-pe-top",v+"px"),oe=v)}const{scrollLeft:S,scrollTop:u}=n,f=a===void 0?_e(i,s===!0?[0,0]:o):Ye(i,a,o);Object.assign(n.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:x||"100vw",maxHeight:c||"100vh",visibility:"visible"});const{offsetWidth:T,offsetHeight:E}=n,{elWidth:P,elHeight:H}=d===!0||s===!0?{elWidth:Math.max(f.width,T),elHeight:s===!0?Math.max(f.height,E):E}:{elWidth:T,elHeight:E};let g={maxWidth:x,maxHeight:c};(d===!0||s===!0)&&(g.minWidth=f.width+"px",s===!0&&(g.minHeight=f.height+"px")),Object.assign(n.style,g);const w=Je(P,H);let h=re(f,w,r,l);if(a===void 0||o===void 0)F(h,f,w,r,l);else{const{top:m,left:y}=h;F(h,f,w,r,l);let v=!1;if(h.top!==m){v=!0;const p=2*o[1];f.center=f.top-=p,f.bottom-=p+2}if(h.left!==y){v=!0;const p=2*o[0];f.middle=f.left-=p,f.right-=p+2}v===!0&&(h=re(f,w,r,l),F(h,f,w,r,l))}g={top:h.top+"px",left:h.left+"px"},h.maxHeight!==void 0&&(g.maxHeight=h.maxHeight+"px",f.height>h.maxHeight&&(g.minHeight=g.maxHeight)),h.maxWidth!==void 0&&(g.maxWidth=h.maxWidth+"px",f.width>h.maxWidth&&(g.minWidth=g.maxWidth)),Object.assign(n.style,g),n.scrollTop!==u&&(n.scrollTop=u),n.scrollLeft!==S&&(n.scrollLeft=S)}function F(e,t,n,o,i){const r=n.bottom,l=n.right,a=Ce(),d=window.innerHeight-a,s=document.body.clientWidth;if(e.top<0||e.top+r>d)if(i.vertical==="center")e.top=t[o.vertical]>d/2?Math.max(0,d-r):0,e.maxHeight=Math.min(r,d);else if(t[o.vertical]>d/2){const c=Math.min(d,o.vertical==="center"?t.center:o.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,c),e.top=Math.max(0,c-r)}else e.top=Math.max(0,o.vertical==="center"?t.center:o.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,d-e.top);if(e.left<0||e.left+l>s)if(e.maxWidth=Math.min(l,s),i.horizontal==="middle")e.left=t[o.horizontal]>s/2?Math.max(0,s-l):0;else if(t[o.horizontal]>s/2){const c=Math.min(s,o.horizontal==="middle"?t.middle:o.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(l,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,o.horizontal==="middle"?t.middle:o.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(l,s-e.left)}const at=Ae({name:"QTooltip",inheritAttrs:!1,props:{...ce,...We,...B,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...B.transitionShow,default:"jump-down"},transitionHide:{...B.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ie},self:{type:String,default:"top middle",validator:ie},offset:{type:Array,default:()=>[14,14],validator:Ve},scrollTarget:$e,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Pe],setup(e,{slots:t,emit:n,attrs:o}){let i,r;const l=ue(),{proxy:{$q:a}}=l,d=$(null),s=$(!1),c=k(()=>le(e.anchor,a.lang.rtl)),x=k(()=>le(e.self,a.lang.rtl)),S=k(()=>e.persistent!==!0),{registerTick:u,removeTick:f}=Me(),{registerTimeout:T}=ke(),{transitionProps:E,transitionStyle:P}=qe(e),{localScrollTarget:H,changeScrollEvent:g,unconfigureScrollTarget:w}=Qe(e,Y),{anchorEl:h,canShow:m,anchorEvents:y}=Ne({showing:s,configureAnchorEl:we}),{show:v,hide:p}=ze({showing:s,canShow:m,handleShow:ve,handleHide:pe,hideOnRouteChange:S,processOnMount:!0});Object.assign(y,{delayShow:ye,delayHide:be});const{showPortal:C,hidePortal:V,renderPortal:ge}=Le(l,d,Te,"tooltip");if(a.platform.is.mobile===!0){const b={anchorEl:h,innerRef:d,onClickOutside(R){return p(R),R.target.classList.contains("q-dialog__backdrop")&&Be(R),!0}},U=k(()=>e.modelValue===null&&e.persistent!==!0&&s.value===!0);W(U,R=>{(R===!0?Ge:te)(b)}),z(()=>{te(b)})}function ve(b){C(),u(()=>{r=new MutationObserver(()=>M()),r.observe(d.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),M(),Y()}),i===void 0&&(i=W(()=>a.screen.width+"|"+a.screen.height+"|"+e.self+"|"+e.anchor+"|"+a.lang.rtl,M)),T(()=>{C(!0),n("show",b)},e.transitionDuration)}function pe(b){f(),V(),_(),T(()=>{V(!0),n("hide",b)},e.transitionDuration)}function _(){r!==void 0&&(r.disconnect(),r=void 0),i!==void 0&&(i(),i=void 0),w(),I(y,"tooltipTemp")}function M(){de({targetEl:d.value,offset:e.offset,anchorEl:h.value,anchorOrigin:c.value,selfOrigin:x.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ye(b){if(a.platform.is.mobile===!0){Q(),document.body.classList.add("non-selectable");const U=h.value,R=["touchmove","touchcancel","touchend","click"].map(J=>[U,J,"delayHide","passiveCapture"]);q(y,"tooltipTemp",R)}T(()=>{v(b)},e.delay)}function be(b){a.platform.is.mobile===!0&&(I(y,"tooltipTemp"),Q(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),T(()=>{p(b)},e.hideDelay)}function we(){if(e.noParentEvent===!0||h.value===null)return;const b=a.platform.is.mobile===!0?[[h.value,"touchstart","delayShow","passive"]]:[[h.value,"mouseenter","delayShow","passive"],[h.value,"mouseleave","delayHide","passive"]];q(y,"anchor",b)}function Y(){if(h.value!==null||e.scrollTarget!==void 0){H.value=Oe(h.value,e.scrollTarget);const b=e.noParentEvent===!0?M:p;g(H.value,b)}}function xe(){return s.value===!0?Z("div",{...o,ref:d,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",o.class],style:[o.style,P.value],role:"tooltip"},Ue(t.default)):null}function Te(){return Z(De,E.value,xe)}return z(_),Object.assign(l.proxy,{updatePosition:M}),ge}}),Ke={"Content-Type":"application/json"},Xe=/\{[^{}]+\}/g;class Ze extends Request{constructor(t,n){super(t,n);for(const o in n)o in this||(this[o]=n[o])}}function et(e){let{baseUrl:t="",fetch:n=globalThis.fetch,querySerializer:o,bodySerializer:i,headers:r,...l}={...e};t.endsWith("/")&&(t=t.substring(0,t.length-1)),r=se(Ke,r);const a=[];async function d(s,c){const{fetch:x=n,headers:S,params:u={},parseAs:f="json",querySerializer:T,bodySerializer:E=i??nt,...P}=c||{};let H=typeof o=="function"?o:ae(o);T&&(H=typeof T=="function"?T:ae({...typeof o=="object"?o:{},...T}));const g={redirect:"follow",...l,...P,headers:se(r,S,u.header)};g.body&&(g.body=E(g.body)),g.body instanceof FormData&&g.headers.delete("Content-Type");let w=new Ze(ot(s,{baseUrl:t,params:u,querySerializer:H}),g);const h={baseUrl:t,fetch:x,parseAs:f,querySerializer:H,bodySerializer:E};for(const v of a)if(v&&typeof v=="object"&&typeof v.onRequest=="function"){w.schemaPath=s,w.params=u;const p=await v.onRequest(w,h);if(p){if(!(p instanceof Request))throw new Error("Middleware must return new Request() when modifying the request");w=p}}let m=await x(w);for(let v=a.length-1;v>=0;v--){const p=a[v];if(p&&typeof p=="object"&&typeof p.onResponse=="function"){const C=await p.onResponse(m,h);if(C){if(!(C instanceof Response))throw new Error("Middleware must return new Response() when modifying the response");m=C}}}if(m.status===204||m.headers.get("Content-Length")==="0")return m.ok?{data:{},response:m}:{error:{},response:m};if(m.ok)return f==="stream"?{data:m.body,response:m}:{data:await m[f](),response:m};let y=await m.text();try{y=JSON.parse(y)}catch{}return{error:y,response:m}}return{async GET(s,c){return d(s,{...c,method:"GET"})},async PUT(s,c){return d(s,{...c,method:"PUT"})},async POST(s,c){return d(s,{...c,method:"POST"})},async DELETE(s,c){return d(s,{...c,method:"DELETE"})},async OPTIONS(s,c){return d(s,{...c,method:"OPTIONS"})},async HEAD(s,c){return d(s,{...c,method:"HEAD"})},async PATCH(s,c){return d(s,{...c,method:"PATCH"})},async TRACE(s,c){return d(s,{...c,method:"TRACE"})},use(...s){for(const c of s)if(c){if(typeof c!="object"||!("onRequest"in c||"onResponse"in c))throw new Error("Middleware must be an object with one of `onRequest()` or `onResponse()`");a.push(c)}},eject(...s){for(const c of s){const x=a.indexOf(c);x!==-1&&a.splice(x,1)}}}}function D(e,t,n){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arenâ€™t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function fe(e,t,n){if(!t||typeof t!="object")return"";const o=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const a in t)o.push(a,n.allowReserved===!0?t[a]:encodeURIComponent(t[a]));const l=o.join(",");switch(n.style){case"form":return`${e}=${l}`;case"label":return`.${l}`;case"matrix":return`;${e}=${l}`;default:return l}}for(const l in t){const a=n.style==="deepObject"?`${e}[${l}]`:l;o.push(D(a,t[l],n))}const r=o.join(i);return n.style==="label"||n.style==="matrix"?`${i}${r}`:r}function he(e,t,n){if(!Array.isArray(t))return"";if(n.explode===!1){const r={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",l=(n.allowReserved===!0?t:t.map(a=>encodeURIComponent(a))).join(r);switch(n.style){case"simple":return l;case"label":return`.${l}`;case"matrix":return`;${e}=${l}`;default:return`${e}=${l}`}}const o={simple:",",label:".",matrix:";"}[n.style]||"&",i=[];for(const r of t)n.style==="simple"||n.style==="label"?i.push(n.allowReserved===!0?r:encodeURIComponent(r)):i.push(D(e,r,n));return n.style==="label"||n.style==="matrix"?`${o}${i.join(o)}`:i.join(o)}function ae(e){return function(n){const o=[];if(n&&typeof n=="object")for(const i in n){const r=n[i];if(r!=null){if(Array.isArray(r)){o.push(he(i,r,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof r=="object"){o.push(fe(i,r,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}o.push(D(i,r,e))}}return o.join("&")}}function tt(e,t){let n=e;for(const o of e.match(Xe)??[]){let i=o.substring(1,o.length-1),r=!1,l="simple";if(i.endsWith("*")&&(r=!0,i=i.substring(0,i.length-1)),i.startsWith(".")?(l="label",i=i.substring(1)):i.startsWith(";")&&(l="matrix",i=i.substring(1)),!t||t[i]===void 0||t[i]===null)continue;const a=t[i];if(Array.isArray(a)){n=n.replace(o,he(i,a,{style:l,explode:r}));continue}if(typeof a=="object"){n=n.replace(o,fe(i,a,{style:l,explode:r}));continue}if(l==="matrix"){n=n.replace(o,`;${D(i,a)}`);continue}n=n.replace(o,l==="label"?`.${a}`:a)}return n}function nt(e){return JSON.stringify(e)}function ot(e,t){let n=`${t.baseUrl}${e}`;t.params?.path&&(n=tt(n,t.params.path));let o=t.querySerializer(t.params.query??{});return o.startsWith("?")&&(o=o.substring(1)),o&&(n+=`?${o}`),n}function se(...e){const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const o=n instanceof Headers?n.entries():Object.entries(n);for(const[i,r]of o)if(r===null)t.delete(i);else if(Array.isArray(r))for(const l of r)t.append(i,l);else r!==void 0&&t.set(i,r)}return t}const A={},it={async onRequest(e,t){return console.debug("Fetch: Request data from",e,t),A[e.url]="start",setTimeout(()=>{A[e.url]=="start"&&(A[e.url]="loading",ee.start(),console.debug("  start loading bar"))},300),e},async onResponse(e,t){return console.debug("Fetch: Received data from",e,t),e.url in A&&A[e.url]=="loading"&&(ee.stop(),console.debug("  stop loading bar")),A[e.url]="stopped",e}},me=et({baseUrl:"https://api.wodore.com"});me.use(it);const st=Fe("huts",()=>{const e={type:"FeatureCollection",features:[]},t=$(e);async function n({date:l="now",days:a=8}){me.GET("/v1/huts/bookings.geojson",{params:{query:{date:l,days:a}}}).then(({data:d})=>{d&&(t.value=d)}).catch(()=>{Ie.create({type:"negative",position:"bottom",caption:"Reservations Service nicht erreichbar",message:"Fehler",progress:!0,timeout:1800})})}function o(){t.value=e}const i=$(void 0),r=k(()=>i.value!==void 0?i.value.split(".")[1]:(new Date().getMonth()+1).toString().padStart(2,"0"));return{bookingsGeojson:t,fetchHutBookingsGeojson:n,removeBookings:o,selectedDate:i,selectedMonth:r}});export{at as Q,Ne as a,st as b,me as c,Q as d,Ve as e,Qe as f,Ge as g,le as p,te as r,de as s,rt as u,ie as v};
