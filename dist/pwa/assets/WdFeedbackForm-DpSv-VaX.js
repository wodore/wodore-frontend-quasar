import{o as h,a as U,f as i,h as M,l as L,s as E,aT as N,aW as j,aX as O,z as W,D,F as T,aY as H,am as R,A as J,aP as Z,aZ as K,d as X,u as Y,ar as G,c as x,L as r,a7 as ee,O as q,a_ as te,e as l,a$ as oe,g as B,a6 as Q,Q as C,aq as ae,R as ne,M as I,P as z,b0 as le,b1 as se,b2 as ce,b3 as ie,b4 as re,_ as de}from"./index-BOuKsgst.js";import{g as ue,b as me,Q as fe,a as pe}from"./imageService-CdgYoCPb.js";import{u as he}from"./use-quasar-CAElz5rk.js";import{c as ge}from"./index-ADO-1el_.js";import"./QScrollObserver-BLLcwUq0.js";import"./use-hydration-Dj3QYcdA.js";import"./_commonjsHelpers-C4iS2aBk.js";const ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},be=i("path",{fill:"currentColor",d:"M12 2c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12S6.5 2 12 2m2.92 10.81c-1.08 0-1.97.75-2.21 1.75c-.54-.23-1.05-.17-1.42-.01c-.24-1-1.14-1.74-2.21-1.74c-1.25 0-2.26 1.01-2.26 2.26s1.01 2.26 2.26 2.26c1.2 0 2.16-.91 2.25-2.08c.2-.13.71-.39 1.34.01a2.258 2.258 0 0 0 4.51-.19c0-1.25-1.01-2.26-2.26-2.26m-5.84.64c.92 0 1.62.73 1.62 1.62s-.7 1.62-1.62 1.62c-.89 0-1.62-.73-1.62-1.62s.73-1.62 1.62-1.62m5.84 0c.89 0 1.62.73 1.62 1.62s-.73 1.62-1.62 1.62c-.92 0-1.62-.73-1.62-1.62s.7-1.62 1.62-1.62m2.91-1.95H6.17v.67h11.66zm-3.68-4.61a.67.67 0 0 0-.8-.36L12 7l-1.35-.47l-.04-.03a.67.67 0 0 0-.77.42l-1.48 3.91h7.28l-1.48-3.91z"},null,-1),_e=[be];function xe(c,f){return h(),U("svg",ve,[..._e])}const ye={name:"mdi-anonymous-circle",render:xe},ke={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ce=i("path",{fill:"currentColor",d:"M22.11 21.46L2.39 1.73L1.11 3l2.95 2.95A9.9 9.9 0 0 0 2 12c0 5.5 4.5 10 10 10c2.28 0 4.37-.77 6.05-2.06l2.79 2.79zM8.94 10.83h-.58l.14-.42zm-2.77.67h3.44l.67.67H6.17zm8.75 5.83c-1.19 0-2.15-.91-2.25-2.07c-.63-.4-1.14-.14-1.34-.01a2.243 2.243 0 0 1-2.25 2.08c-1.25 0-2.26-1.01-2.26-2.26s1.01-2.26 2.26-2.26c1.07 0 1.97.74 2.21 1.74c.36-.15.84-.21 1.36-.01l.66.66c.06.8.69 1.41 1.47 1.47l.6.6c-.15.03-.3.06-.46.06M9.94 6.74L6.72 3.5C8.25 2.56 10.06 2 12 2c5.5 0 10 4.5 10 10c0 1.94-.56 3.75-1.5 5.28l-5.13-5.11h2.46v-.67H14.7l-.67-.67h1.61l-1.48-3.91l-.01-.03a.67.67 0 0 0-.8-.36L12 7l-1.35-.47l-.04-.03a.71.71 0 0 0-.67.24m.76 8.33c0 .89-.7 1.62-1.62 1.62c-.89 0-1.62-.73-1.62-1.62s.73-1.62 1.62-1.62c.92 0 1.62.73 1.62 1.62"},null,-1),Se=[Ce];function we(c,f){return h(),U("svg",ke,[...Se])}const Ve={name:"mdi-anonymous-circle-off",render:we},$e=M({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(c,{slots:f,emit:g}){const w=L(),t=E(null);let s=0;const p=[];function v(o){const u=typeof o=="boolean"?o:c.noErrorFocus!==!0,b=++s,d=(n,e)=>{g(`validation${n===!0?"Success":"Error"}`,e)},a=n=>{const e=n.validate();return typeof e.then=="function"?e.then(m=>({valid:m,comp:n}),m=>({valid:!1,comp:n,err:m})):Promise.resolve({valid:e,comp:n})};return(c.greedy===!0?Promise.all(p.map(a)).then(n=>n.filter(e=>e.valid!==!0)):p.reduce((n,e)=>n.then(()=>a(e).then(m=>{if(m.valid===!1)return Promise.reject(m)})),Promise.resolve()).catch(n=>[n])).then(n=>{if(n===void 0||n.length===0)return b===s&&d(!0),!0;if(b===s){const{comp:e,err:m}=n[0];if(m!==void 0&&console.error(m),d(!1,e),u===!0){const k=n.find(({comp:P})=>typeof P.focus=="function"&&H(P.$)===!1);k!==void 0&&k.comp.focus()}}return!1})}function V(){s++,p.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function y(o){o!==void 0&&R(o);const u=s+1;v().then(b=>{u===s&&b===!0&&(c.onSubmit!==void 0?g("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function $(o){o!==void 0&&R(o),g("reset"),J(()=>{V(),c.autofocus===!0&&c.noResetFocus!==!0&&_()})}function _(){Z(()=>{if(t.value===null)return;const o=t.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||t.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||t.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(t.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);o?.focus({preventScroll:!0})})}N(K,{bindComponent(o){p.push(o)},unbindComponent(o){const u=p.indexOf(o);u!==-1&&p.splice(u,1)}});let F=!1;return j(()=>{F=!0}),O(()=>{F===!0&&c.autofocus===!0&&_()}),W(()=>{c.autofocus===!0&&_()}),Object.assign(w.proxy,{validate:v,resetValidation:V,submit:y,reset:$,focus:_,getValidationComponents:()=>p}),()=>D("form",{class:"q-form",ref:t,onSubmit:y,onReset:$},T(f.default))}}),S=c=>(ie("data-v-4b3da9c3"),c=c(),re(),c),Fe=S(()=>i("div",{class:"card-header absolute-bottom text-white text-h5"},null,-1)),Qe=S(()=>i("div",{class:"absolute-bottom text-accent-400 text-h4 text-center card-header__text"}," Rückmeldung ",-1)),Ie={class:"col no-wrap items-center q-py-md"},qe=S(()=>i("p",{class:"text-body1 q-pt-md"}," Sag uns, was du denkst! Jede Rückmeldung, egal ob positiv oder negativ, hilft uns weiter. ",-1)),Be={class:"q-gutter-md q-pt-md"},Ee={class:""},Ue=S(()=>i("br",null,null,-1)),Ae=S(()=>i("span",{class:"text-caption"},"Wir senden dir bei wichtigen Updates eine E-Mail. ",-1)),Pe="https://cdn.pixabay.com/photo/2014/05/11/11/12/mailbox-341744_1280.jpg",Re=X({__name:"WdFeedbackForm",setup(c){const f=he(),g=Y(),w="anonym@wodore.com",t=G({email:"",subject:"",message:"",get_updates:!1,urls:[]}),s=E([]);function p(){console.debug(`Submitted form for '${t.email}'`,t.message),t.urls=s.value.map(d=>d.value),t.email==w&&(t.get_updates=!1),ge.POST("/v1/feedback/",{body:t}).then(()=>{f.notify({color:"positive",textColor:"black",icon:"wd-checkmark",message:"Nachricht gesendet"}),g.go(-1),setTimeout(()=>{y()},200)}).catch(()=>{f.notify({color:"negative",textColor:"black",icon:"wd-close",message:"Nachricht konnte nicht gesendet werden"})})}const v=E(!1);function V(){t.email||t.message?f.dialog({dark:!0,title:"Bist du sicher?",message:"Deine Eingaben gehen verloren! Schliessen?",persistent:!0,ok:{label:"Ja",flat:!0},cancel:{label:"Nein",flat:!0}}).onOk(()=>{g.go(-1)}):g.go(-1)}function y(){t.email="",t.message=""}function $(){const d=s.value.length,a=d>0?s.value[d-1].id+1:0;console.log(s.value),console.log(a),s.value.push({value:"",id:a,placeholder:`URL ${a+1}`})}function _(d){s.value.splice(d,1)}function F(){g.replace({name:"support"})}const o=ue(Pe,{focal:"0.5,0.45",size:"800x300",quality:50});console.log(o);let u="";function b(d){d?(u=t.email,t.email=w,v.value=!0):(t.email=u,v.value=!1)}return(d,a)=>{const A=Ve,n=ye;return h(),x(te,{class:ee({"card--desktop":q(f).screen.gt.xs,"card--mobile":q(f).screen.xs})},{default:r(()=>[l($e,{onSubmit:p,onReset:y,class:"fit"},{default:r(()=>[i("div",null,[l(me,{src:q(o),style:{height:"140px"},class:"shadow-4"},{default:r(()=>[Fe,Qe]),_:1},8,["src"])]),l(oe,{style:{padding:"0",height:"calc(100% - 196px)"}},{default:r(()=>[l(fe,{class:"fit",style:{padding:"0 16px 0 16px"},"thumb-style":{width:"6px",borderRadius:"8px 0 0 8px"}},{default:r(()=>[i("div",Ie,[qe,i("p",{class:"text-body2"},[B(" Jegliche "),i("a",{class:"link",onClick:F},"Unterstützung"),B(" für das Projekt ist willkommen. ")]),i("div",Be,[l(Q,{modelValue:t.subject,"onUpdate:modelValue":a[0]||(a[0]=e=>t.subject=e),dense:"","aria-label":"Betreff",outlined:"",counter:"",placeholder:"Betreff",maxlength:"60"},{prepend:r(()=>[l(C,{name:"wd-subject"})]),_:1},8,["modelValue"]),l(Q,{dense:"",modelValue:t.email,"onUpdate:modelValue":a[3]||(a[3]=e=>t.email=e),outlined:"","aria-label":"E-Mail",placeholder:"name@domain.com",type:"email",maxlength:"100",rules:[e=>!!e||"E-Mail fehlt"],disable:v.value},{prepend:r(()=>[l(C,{name:"wd-at"})]),append:r(()=>[v.value?(h(),x(A,{key:0,onClick:a[1]||(a[1]=e=>b(!1)),class:"anonym_icon"})):(h(),x(n,{key:1,onClick:a[2]||(a[2]=e=>b(!0)),class:"anonym_icon"}))]),_:1},8,["modelValue","rules","disable"]),l(Q,{modelValue:t.message,"onUpdate:modelValue":a[4]||(a[4]=e=>t.message=e),autogrow:"",counter:"","aria-label":"Nachricht",placeholder:"Nachricht",dense:"",outlined:"",type:"textarea",maxlength:"10000",rules:[e=>!!e||"Nachricht fehlt"]},{prepend:r(()=>[l(C,{name:"wd-text-outline"})]),_:1},8,["modelValue","rules"]),(h(!0),U(ne,null,ae(s.value,(e,m)=>(h(),x(Q,{key:e.id,modelValue:e.value,"onUpdate:modelValue":k=>e.value=k,dense:"",outlined:"",maxlength:"300",placeholder:e.placeholder},{prepend:r(()=>[l(C,{name:"wd-link"})]),after:r(()=>[l(C,{name:"wd-close",onClick:k=>_(m),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]))),128)),i("div",Ee,[s.value.length<4?(h(),x(I,{key:0,onClick:a[5]||(a[5]=e=>$()),class:"text-grey-8 float-right",label:"URL",flat:"",icon:"wd-add-outline"})):z("",!0)]),i("div",null,[v.value?z("",!0):(h(),x(le,{key:0,modelValue:t.get_updates,"onUpdate:modelValue":a[6]||(a[6]=e=>t.get_updates=e),"checked-icon":"wd-bell","unchecked-icon":"wd-bell-outline",color:"accent",size:"lg"},{default:r(()=>[B(" Halte mich auf dem Laufenden."),Ue,Ae]),_:1},8,["modelValue"]))])])])]),_:1})]),_:1}),l(se),l(ce,null,{default:r(()=>[l(I,{label:"Schliessen",color:"secondary-700",flat:"",onClick:a[7]||(a[7]=e=>V()),class:"q-ml-sm"}),l(I,{label:"Zurücksetzen",type:"reset",color:"secondary-700",flat:"",class:"q-ml-sm"}),l(pe),l(I,{label:"Senden",flat:"",type:"submit",color:"accent"})]),_:1})]),_:1})]),_:1},8,["class"])}}}),De=de(Re,[["__scopeId","data-v-4b3da9c3"],["__file","WdFeedbackForm.vue"]]);export{De as default};
