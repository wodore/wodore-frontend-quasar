import{o as h,e as A,a as c,h as z,l as j,s as U,b3 as L,b6 as O,b7 as D,A as H,E as J,G as T,b8 as W,ac as N,B as G,a$ as K,b9 as X,d as Z,u as Y,aE as ee,c as x,w as r,a0 as te,O as q,X as oe,f as l,ba as ae,g as I,aq as B,Q as S,$ as ne,R as le,M as E,P,bb as se,bc as ce,bd as ie,a3 as re,a4 as de,_ as ue}from"./index-BMytnz0s.js";import{g as me,a as fe,Q as pe}from"./imageService-UsH-XsIp.js";import{Q as he}from"./QScrollArea-C6f4hk-c.js";import{u as ge}from"./use-quasar-CzmYKQT1.js";import{c as be}from"./index-Cwomnkrr.js";import{t as F}from"./analytics-hj9MTZ8Z.js";import"./_commonjsHelpers-BosuxZz1.js";import"./___vite-browser-external_commonjs-proxy-DRaEfepn.js";import"./use-hydration-Bx7niFMT.js";import"./selection-BYwaAy4f.js";import"./auth-store-D-XRlcA_.js";const ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_e=c("path",{fill:"currentColor",d:"M12 2c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12S6.5 2 12 2m2.92 10.81c-1.08 0-1.97.75-2.21 1.75c-.54-.23-1.05-.17-1.42-.01c-.24-1-1.14-1.74-2.21-1.74c-1.25 0-2.26 1.01-2.26 2.26s1.01 2.26 2.26 2.26c1.2 0 2.16-.91 2.25-2.08c.2-.13.71-.39 1.34.01a2.258 2.258 0 0 0 4.51-.19c0-1.25-1.01-2.26-2.26-2.26m-5.84.64c.92 0 1.62.73 1.62 1.62s-.7 1.62-1.62 1.62c-.89 0-1.62-.73-1.62-1.62s.73-1.62 1.62-1.62m5.84 0c.89 0 1.62.73 1.62 1.62s-.73 1.62-1.62 1.62c-.92 0-1.62-.73-1.62-1.62s.7-1.62 1.62-1.62m2.91-1.95H6.17v.67h11.66zm-3.68-4.61a.67.67 0 0 0-.8-.36L12 7l-1.35-.47l-.04-.03a.67.67 0 0 0-.77.42l-1.48 3.91h7.28l-1.48-3.91z"},null,-1),xe=[_e];function ye(i,f){return h(),A("svg",ve,[...xe])}const ke={name:"mdi-anonymous-circle",render:ye},Ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Se=c("path",{fill:"currentColor",d:"M22.11 21.46L2.39 1.73L1.11 3l2.95 2.95A9.9 9.9 0 0 0 2 12c0 5.5 4.5 10 10 10c2.28 0 4.37-.77 6.05-2.06l2.79 2.79zM8.94 10.83h-.58l.14-.42zm-2.77.67h3.44l.67.67H6.17zm8.75 5.83c-1.19 0-2.15-.91-2.25-2.07c-.63-.4-1.14-.14-1.34-.01a2.243 2.243 0 0 1-2.25 2.08c-1.25 0-2.26-1.01-2.26-2.26s1.01-2.26 2.26-2.26c1.07 0 1.97.74 2.21 1.74c.36-.15.84-.21 1.36-.01l.66.66c.06.8.69 1.41 1.47 1.47l.6.6c-.15.03-.3.06-.46.06M9.94 6.74L6.72 3.5C8.25 2.56 10.06 2 12 2c5.5 0 10 4.5 10 10c0 1.94-.56 3.75-1.5 5.28l-5.13-5.11h2.46v-.67H14.7l-.67-.67h1.61l-1.48-3.91l-.01-.03a.67.67 0 0 0-.8-.36L12 7l-1.35-.47l-.04-.03a.71.71 0 0 0-.67.24m.76 8.33c0 .89-.7 1.62-1.62 1.62c-.89 0-1.62-.73-1.62-1.62s.73-1.62 1.62-1.62c.92 0 1.62.73 1.62 1.62"},null,-1),we=[Se];function Ve(i,f){return h(),A("svg",Ce,[...we])}const $e={name:"mdi-anonymous-circle-off",render:Ve},Qe=z({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(i,{slots:f,emit:g}){const y=j(),e=U(null);let s=0;const p=[];function b(o){const u=typeof o=="boolean"?o:i.noErrorFocus!==!0,v=++s,d=(n,t)=>{g(`validation${n===!0?"Success":"Error"}`,t)},a=n=>{const t=n.validate();return typeof t.then=="function"?t.then(m=>({valid:m,comp:n}),m=>({valid:!1,comp:n,err:m})):Promise.resolve({valid:t,comp:n})};return(i.greedy===!0?Promise.all(p.map(a)).then(n=>n.filter(t=>t.valid!==!0)):p.reduce((n,t)=>n.then(()=>a(t).then(m=>{if(m.valid===!1)return Promise.reject(m)})),Promise.resolve()).catch(n=>[n])).then(n=>{if(n===void 0||n.length===0)return v===s&&d(!0),!0;if(v===s){const{comp:t,err:m}=n[0];if(m!==void 0&&console.error(m),d(!1,t),u===!0){const C=n.find(({comp:M})=>typeof M.focus=="function"&&W(M.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function V(){s++,p.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function k(o){o!==void 0&&N(o);const u=s+1;b().then(v=>{u===s&&v===!0&&(i.onSubmit!==void 0?g("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function $(o){o!==void 0&&N(o),g("reset"),G(()=>{V(),i.autofocus===!0&&i.noResetFocus!==!0&&_()})}function _(){K(()=>{if(e.value===null)return;const o=e.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||e.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||e.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(e.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);o?.focus({preventScroll:!0})})}L(X,{bindComponent(o){p.push(o)},unbindComponent(o){const u=p.indexOf(o);u!==-1&&p.splice(u,1)}});let Q=!1;return O(()=>{Q=!0}),D(()=>{Q===!0&&i.autofocus===!0&&_()}),H(()=>{i.autofocus===!0&&_()}),Object.assign(y.proxy,{validate:b,resetValidation:V,submit:k,reset:$,focus:_,getValidationComponents:()=>p}),()=>J("form",{class:"q-form",ref:e,onSubmit:k,onReset:$},T(f.default))}}),w=i=>(re("data-v-b2a818d2"),i=i(),de(),i),Be=w(()=>c("div",{class:"card-header absolute-bottom text-white text-h5"},null,-1)),Ee=w(()=>c("div",{class:"absolute-bottom text-accent-400 text-h4 text-center card-header__text"}," Rückmeldung ",-1)),Fe={class:"col no-wrap items-center q-py-md"},Ie=w(()=>c("p",{class:"text-body1 q-pt-md"},[c("b",null,"Sag, was du denkst!"),I(" Jede Rückmeldung, egal ob positiv oder negativ, hilft weiter. ")],-1)),qe={class:"q-gutter-md q-pt-md"},Ue={class:""},Ae=w(()=>c("br",null,null,-1)),Re=w(()=>c("span",{class:"text-caption"},"Bei wichtigen Updates erhältst du eine E-Mail. ",-1)),Me="https://cdn.pixabay.com/photo/2014/05/11/11/12/mailbox-341744_1280.jpg",Ne=Z({__name:"WdFeedbackForm",setup(i){const f=ge(),g=Y(),y="anonym@wodore.com",e=ee({email:"",subject:"",message:"",get_updates:!1,urls:[]}),s=U([]);function p(){console.debug(`Submitted form for '${e.email}'`,e.message),e.urls=s.value.map(d=>d.value),e.email==y&&(e.get_updates=!1),F("feedback-sent",{updates:e.get_updates,anonym:e.email==y}),be.POST("/v1/feedback/",{body:e}).then(()=>{f.notify({color:"positive",textColor:"black",icon:"wd-checkmark",message:"Nachricht gesendet"}),g.go(-1),setTimeout(()=>{k()},200)}).catch(()=>{F("feedback-fail",{message:JSON.stringify(e)}),f.notify({color:"negative",textColor:"black",icon:"wd-close",message:"Nachricht konnte nicht gesendet werden"})})}const b=U(!1);function V(){e.email||e.message||e.subject?f.dialog({dark:!0,title:"Bist du sicher?",message:"Deine Eingaben gehen verloren! Schliessen?",persistent:!0,ok:{label:"Ja",flat:!0},cancel:{label:"Nein",flat:!0}}).onOk(()=>{F("feedback-cancel"),g.go(-1)}).onCancel(()=>{F("feedback-continue")}):g.go(-1)}function k(){e.email="",e.message=""}function $(){const d=s.value.length,a=d>0?s.value[d-1].id+1:0;console.log(s.value),console.log(a),s.value.push({value:"",id:a,placeholder:`URL ${a+1}`})}function _(d){s.value.splice(d,1)}function Q(){g.replace({name:"support"})}const o=me(Me,{focal:"0.5,0.45",size:"800x300",quality:50});console.log(o);let u="";function v(d){d?(u=e.email,e.email=y,b.value=!0):(e.email=u,b.value=!1)}return(d,a)=>{const R=$e,n=ke;return h(),x(oe,{class:te({"card--desktop":q(f).screen.gt.xs,"card--mobile":q(f).screen.xs})},{default:r(()=>[l(Qe,{onSubmit:p,onReset:k,class:"fit"},{default:r(()=>[c("div",null,[l(fe,{src:q(o),style:{height:"140px"},class:"shadow-4"},{default:r(()=>[Be,Ee]),_:1},8,["src"])]),l(ae,{style:{padding:"0",height:"calc(100% - 196px)"}},{default:r(()=>[l(he,{class:"fit",style:{padding:"0 16px 0 16px"},"thumb-style":{width:"6px",borderRadius:"8px 0 0 8px"}},{default:r(()=>[c("div",Fe,[Ie,c("p",{class:"text-body2"},[I(" Jegliche "),c("a",{class:"link",onClick:Q},"Unterstützung"),I(" für das Projekt ist willkommen. ")]),c("div",qe,[l(B,{modelValue:e.subject,"onUpdate:modelValue":a[0]||(a[0]=t=>e.subject=t),dense:"","aria-label":"Betreff",outlined:"",counter:"",placeholder:"Betreff",maxlength:"60"},{prepend:r(()=>[l(S,{name:"wd-subject"})]),_:1},8,["modelValue"]),l(B,{dense:"",modelValue:e.email,"onUpdate:modelValue":a[3]||(a[3]=t=>e.email=t),outlined:"","aria-label":"E-Mail",placeholder:"name@domain.com",type:"email",maxlength:"100",rules:[t=>!!t||"E-Mail fehlt"],disable:b.value},{prepend:r(()=>[l(S,{name:"wd-at"})]),append:r(()=>[b.value?(h(),x(R,{key:0,onClick:a[1]||(a[1]=t=>v(!1)),class:"anonym_icon"})):(h(),x(n,{key:1,onClick:a[2]||(a[2]=t=>v(!0)),class:"anonym_icon"}))]),_:1},8,["modelValue","rules","disable"]),l(B,{modelValue:e.message,"onUpdate:modelValue":a[4]||(a[4]=t=>e.message=t),autogrow:"",counter:"","aria-label":"Nachricht",placeholder:"Nachricht",dense:"",outlined:"",type:"textarea",maxlength:"10000",rules:[t=>!!t||"Nachricht fehlt"]},{prepend:r(()=>[l(S,{name:"wd-text-outline"})]),_:1},8,["modelValue","rules"]),(h(!0),A(le,null,ne(s.value,(t,m)=>(h(),x(B,{key:t.id,modelValue:t.value,"onUpdate:modelValue":C=>t.value=C,dense:"",outlined:"",maxlength:"300",placeholder:t.placeholder},{prepend:r(()=>[l(S,{name:"wd-link"})]),after:r(()=>[l(S,{name:"wd-close",onClick:C=>_(m),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]))),128)),c("div",Ue,[s.value.length<4?(h(),x(E,{key:0,onClick:a[5]||(a[5]=t=>$()),class:"text-grey-8 float-right",label:"URL",flat:"",icon:"wd-add-outline"})):P("",!0)]),c("div",null,[b.value?P("",!0):(h(),x(se,{key:0,modelValue:e.get_updates,"onUpdate:modelValue":a[6]||(a[6]=t=>e.get_updates=t),"checked-icon":"wd-bell","unchecked-icon":"wd-bell-outline",color:"accent",size:"lg"},{default:r(()=>[I(" Halte mich auf dem Laufenden."),Ae,Re]),_:1},8,["modelValue"]))])])])]),_:1})]),_:1}),l(ce),l(ie,null,{default:r(()=>[l(E,{label:"Schliessen",color:"secondary-700",flat:"",onClick:a[7]||(a[7]=t=>V()),class:"q-ml-sm"}),l(E,{label:"Zurücksetzen",type:"reset",color:"secondary-700",flat:"",class:"q-ml-sm"}),l(pe),l(E,{label:"Senden",flat:"",type:"submit",color:"accent"})]),_:1})]),_:1})]),_:1},8,["class"])}}}),Ke=ue(Ne,[["__scopeId","data-v-b2a818d2"],["__file","WdFeedbackForm.vue"]]);export{Ke as default};
