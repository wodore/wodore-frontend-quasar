import{d as Et,o as ue,c as Ee,w as be,f as ve,Q as Uo,a0 as ui,M as io,_ as xt,t as ae,h as Hn,i as di,k as pi,s as ye,bo as fi,l as jo,v as hi,b3 as gi,bp as mi,E as Ne,G as Wn,aP as vi,q as Jn,r as Po,H as yi,an as bi,W as Yn,bq as Zn,aE as Qn,V as Ae,br as _i,y as Xn,a as et,e as ao,R as Kn,$ as er,O as re,D as tr,aG as or,Y as wi,g as Ei,Z as xi,P as oo,bs as Si,bt as Ci,A as Ti,bu as Oi,u as Ii,ao as Mi}from"./index-Cvb2ZXuK.js";import{u as Bo}from"./use-quasar-CT81o--S.js";import{b as Li}from"./huts-store-klB6QY_A.js";import{useMap as so,MglMap as ki,MglGeolocateControl as Pi,MglNavigationControl as Ni,MglAttributionControl as Ai,MglScaleControl as Fi}from"./vue-maplibre-gl.es-D-j8TEUf.js";import{Q as Ri}from"./QTooltip-CG78b4GF.js";import{Q as Di}from"./QNoSsr-D6UGDLwD.js";import{c as wt,g as zi}from"./_commonjsHelpers-BosuxZz1.js";import"./selection-CFgbpy7I.js";import"./index-B5DT3WU3.js";import"./auth-store-tekYrnG_.js";import"./___vite-browser-external_commonjs-proxy-DRaEfepn.js";import"./use-hydration-BtbU6B47.js";const Ui=Et({__name:"WdOverlaySwitchItem",props:{label:{},icon:{},active:{type:Boolean},tooltip:{type:Boolean}},setup(l){return(p,x)=>(ue(),Ee(io,{"fab-mini":"",round:"",style:{padding:"0"},ripple:!1,color:p.active?"accent-200":"icon"},{default:be(()=>[ve(Uo,{name:p.icon,class:ui({"icon-active":p.active,"icon-inactive":!p.active})},null,8,["name","class"])]),_:1},8,["color"]))}}),ji=xt(Ui,[["__file","WdOverlaySwitchItem.vue"]]),Bi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20512%20512'%20style='enable-background:new%200%200%20512%20512;'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20d='M330.667,122.667c23.467,0,42.667-19.2,42.667-42.667s-19.2-42.667-42.667-42.667S288,56.533,288,80%20S307.2,122.667,330.667,122.667z'/%3e%3cpath%20d='M106.667,261.333C48,261.333,0,309.333,0,368s48,106.667,106.667,106.667c58.667,0,106.667-48,106.667-106.667%20S165.333,261.333,106.667,261.333z%20M106.667,442.667C65.067,442.667,32,409.6,32,368s33.067-74.667,74.667-74.667%20c41.6,0,74.667,33.067,74.667,74.667S148.267,442.667,106.667,442.667z'/%3e%3cpath%20d='M404.267,238.933v-42.667c-32,0-58.667-11.733-77.867-30.933L284.8,124.8c-6.4-7.467-17.067-12.8-28.8-12.8%20s-22.4,4.267-29.867,12.8l-58.667,58.667c-7.467,7.467-12.8,18.133-12.8,29.867s5.333,22.4,12.8,30.933l67.2,59.733v106.667%20h42.667V277.333L230.4,230.4l50.133-51.2l16,16C323.2,222.933,360.533,238.933,404.267,238.933z'/%3e%3cpath%20d='M405.333,261.333c-58.667,0-106.667,48-106.667,106.667s48,106.667,106.667,106.667C464,474.667,512,426.667,512,368%20S464,261.333,405.333,261.333z%20M405.333,442.667c-41.6,0-74.667-33.067-74.667-74.667s33.067-74.667,74.667-74.667%20C446.933,293.333,480,326.4,480,368S446.933,442.667,405.333,442.667z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",$i="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='black'%20d='M415%2026.08c-45.5-.55-114%20109.42-124%20148.32c-7.9%2037%2071.8%2092.2%2085.3-22.3c4.1-34.8%2055.5-120.32%2043.6-125.42v-.1c-.1%200-.3-.1-.6-.1c-1.4-.25-2.9-.39-4.3-.4m57.7%2021.96c-12.2-1.44-34.4%2093.16-55.4%20120.66c-69.9%2091.7%2025.7%20107.4%2045.6%2075.3c20.8-36%2049.1-169.82%2010.9-195.52c-.1-.1-.3-.2-.5-.3s-.4-.12-.6-.14M130.3%20202.5C84.67%20203%2026.14%20322.6%2020.16%20363.1c-4.03%2037.6%2081.04%2084.2%2082.64-31c.4-35.1%2042.7-125.5%2030.3-129.4v-.1h-.6c-.7-.1-1.4-.1-2.2-.1m57.6%2016c-12.3-.1-24.6%2096.4-42.6%20125.8c-60.06%2098.5%2036.7%20104.2%2053.1%2070.2c17-38%2031.3-174.1-9.4-195.7c-.1-.1-.3-.1-.5-.2s-.4-.1-.6-.1m116.3%2011.9c-9.1-.1-16.7%203.2-19.9%209.5c-5.3%2010.9%203.9%2026.5%2020.8%2035c16.8%208.4%2035%206.4%2040.3-4.4c5.5-10.9-3.8-26.5-20.7-34.9c-1.1-.6-2.1-1-3.1-1.4c-6-2.6-12-3.8-17.4-3.8m77.4%2031.7c-12%200-21.9%204.8-24.5%2013.1c-3.7%2011.5%208%2025.6%2026%2031.2c18%205.7%2035.5.9%2039.2-10.7c3.5-10.7-6.6-23.8-22.7-30l-3.3-1.2c-5-1.6-10.1-2.3-14.7-2.4M41.81%20417.2c-10.35.3-18.76%204.5-21.53%2011.7c-4.14%2011.4%206.63%2026%2024.32%2032.7c17.58%206.6%2035.44%202.7%2039.64-8.6c4.4-11.4-6.5-25.9-24.22-32.5c-1.16-.5-2.19-.8-3.23-1.1c-5.16-1.6-10.27-2.3-14.98-2.2m82.39%2023.6c-14.2-.1-25.85%206-27.85%2015.7c-2.51%2011.8%2010.65%2024.6%2029.15%2028.3c18.5%203.8%2035.4-2.8%2037.9-14.7c2.4-11-9-23-25.7-27.5c-1.1-.2-2.2-.5-3.4-.8c-3.4-.7-6.9-1-10.1-1'%20/%3e%3c/svg%3e",Vi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='currentColor'%20d='m139.3%2020.25l-16.1%204.5c9.4%2033.5%2022.3%2051.1%2037%2060.3c14.9%209.4%2032.1%2010.2%2050.9%208.5c25-2.3%2053.2-9.6%2082%201.1c7.8%203.5%2016%207.95%2024.7%2013.85c4.6-1.4%208.6-3.2%2012.6-4.5c0%200%203.2-10.25-2-23.35c-4.5-11.5-15.7-26-44-36.2l-5.6%2015.6c17.4%206.4%2026.8%2014.3%2031.6%2021.8c.7%201.1%201.2%202.1%201.7%203.1c-3.8-2-7.7-3.8-11.5-5.2c-28.1-13-50.6-13.8-68.6-15.8c-9.6-1-17.7-2.2-24.4-7c-6.7-4.9-11.7-13.4-16-28.2l-16%204.7c5.7%2019.6%2013.3%2030.4%2022.2%2036.9c4%202.9%208.3%205%2012.9%206.5c-15.8.85-30.7.67-41.7-5.9c-12.2-7.7-21.9-22.9-29.7-50.7m89.5%203.6c-.9%2011.2%201.1%2020.3%204.4%2027.7c7.7.96%2014.4%201.1%2021.4%202.3c-5.4-6-10.2-15.2-9.2-28.8zm120.3%2013.5l-10.9%2012.5c8.2%207.2%2010.5%2015.8%2010.5%2023.1c-4.4-3.92-8.4-6.53-13.1-8.9c7.2%208.42%208.2%2023.36%208.7%2031.4l15.5%201.7s17.6-35.2-10.7-59.8m-80.7%2069.35c-17.5%202-26.8-2.6-32.4%2013.8c0%200%2018.8%2027.9%2068.9%2027.2c-2.8%2011.4-1.5%2019.8-1.5%2029.9c0%2033.6-27%2062.9-86.5%2062.9c-30.2%200-66.9%205.4-94.9%2020.5c-19.9%2010.7-35.47%2026.2-42.36%2047.7l7.81%2010.9l14.95.2v61.7l-18.24%2028.3l5.24%2082h17.3l1.5-66c8.6-5%2028.3-18%2045.1-38c22.8-26.9%2040.3-66%2019.7-114.4l15.4-6.5c16.9%2039.7%2011%2074.1-3.8%20101.8c28.3-.9%2052.6-2.7%2073.2-6.1l-4.7-56.3l16.6-1.4l15.8%20186.9h17.2l2.9-121.7c13.7-5.8%2044.9-27.1%2059.5-101.1c1.8-9%202.8-16.6%203.3-23.1c2.3-16.5%203.6-35.1%204-56.3l-24.5-7.7h75.3l7.3-16.5c-7.1.3-15.6-3.4-15.6-3.4l1.7-8h15.8l-85.5-44.3c-9.5%203.6-19.5%208.3-26.5%2014c-5.6-4-25-16.5-52-17m95.5%20226.6c-9.7%2018.1-20.1%2031.6-29.1%2041.2l47.1%2020.8l-20.9%2047.5l15%207l33.4-64.8l-44.3-37.4c-.4-2.3-.9-6.8-1.2-14.3m-153.8%2050.8c-11.3.7-23.3%201.2-36.1%201.4c-8.7%2011.5-18.7%2022.6-29.1%2031.2l8.7%2075h17.1v-65c7.3-6%2024.9-21.3%2039.4-42.6'/%3e%3c/svg%3e",Gi="/assets/deer2-MSks7fup.svg",qi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2056%2056'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M43.882%2022.666c1.508-.66%202.652-1.778%203.725-2.9c1.223-1.279%201.239-2.882%201.239-3.721c0-1.334-1.253-2.386-3.29-2.435c-1.079-.026-1.738.243-2.637.898c-.644.468-2.153%202-1.48%203.253c.035.065.092.144.173.237a.519.519%200%200%201%20.008.668a.47.47%200%200%201-.651.073l-.106-.082c-1.33-1.016-2.054-1.394-2.054-2.899c0-2.832%203.737-5.553%207.346-5.466c3.605.087%206.412%202.69%206.412%205.725c0%201.66-1.058%204.015-2.788%205.825a11.509%2011.509%200%200%201-3.921%202.684c.094.155.191.322.29.503c.98%201.786.852%202.003.977%204.234c.124%202.232-.536%206.222-.283%208.188c.254%201.965%201.523%202.184%201.802%203.6c.177.897.616%204.791%201.317%2011.68a1.001%201.001%200%200%201-.996%201.104h-2.057a.998.998%200%200%201-.998-.998v-.497c0-.315.148-.612.4-.8l.318-.239a1%201%200%200%200%20.383-.986c-.547-2.912-1.028-4.665-1.442-5.259c-.306-.44-1.688-1.157-3.47-2.547c-.319-.25-.893-.78-1.72-1.592a.5.5%200%200%200-.848.296c-.15%201.203-.338%202.217-.561%203.042c-.27.994-1.1%203.587-2.489%207.777a1%201%200%200%201-.95.686h-2.618a.895.895%200%200%201-.894-.894v-.06a1%201%200%200%201%20.821-.985l1.123-.206c.806-2.944%201.157-5.1%201.055-6.469c-.072-.968-.726-2.094-1.385-4.054c-.137-.408-.33-1.24-.578-2.5a.5.5%200%200%200-.617-.387l-6.663%201.726a.5.5%200%200%200-.316.72l.157.296c.3.562.456%201.19.456%201.827v9.36c0%20.311-.145.605-.392.795l-1.397%201.07a1.001%201.001%200%200%201-.61.207H22.67a1.001%201.001%200%200%201-1-1.001v-.51c0-.363.195-.698.512-.875l.72-.402a1%201%200%200%200%20.51-.958c-.114-1.351-.254-2.379-.422-3.083c-.172-.726-.59-2.022-1.253-3.886a.5.5%200%200%200-.799-.21l-.195.168c-.489.423-1.086.7-1.724.803l-6.252%201a.5.5%200%200%200-.291.83l.665.732c.168.184.26.424.26.673v.654a1.001%201.001%200%200%201-1.03%201l-.82-.024a1.001%201.001%200%200%201-.767-.394L9.75%2046.327a1.001%201.001%200%200%201-.205-.607v-1.988c0-.347.18-.67.475-.852c4.271-2.64%206.587-4.099%206.948-4.38c.374-.29.53-.775.468-1.454c-.696-2.067-1.811-2.799-2.312-4.023c-.5-1.223-1.43-5.03-1.89-6.492c-.925-2.94-1.737-4.495-1.956-4.96c-.492-1.044-1.36-1.192-2.277-1.552c-.917-.361-2.66-.306-3.794-1.301c-1.133-.996-1.029-2.036-1.293-3.168v-1.385c0-.553.449-1.001%201.002-1.001h2.716c.367%200%20.704-.2.88-.523c.31-.569.805-1.113%201.486-1.631a8.629%208.629%200%200%201%203.039-1.469c-.25-3.114-.25-4.873%200-5.277c.25-.404.945.228%202.087%201.896c.163-1.964.481-2.684.955-2.16c.442.49%201.205%202.27%202.288%205.34c.142.4.347.778.607%201.115c.455.588.865%201.292%201.232%202.11c.697%201.556%201.511%205.62%202.952%207.619c1.44%201.999%202.281%202.163%204.361%202.533c1.382.246%206.147-.54%2010.05-.692c3.006-.118%205.424.388%205.86.5c.157.041.307.086.453.14'/%3e%3c/svg%3e",Hi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2056%2056'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M43.882%2022.666c1.508-.66%202.652-1.778%203.725-2.9c1.223-1.279%201.239-2.882%201.239-3.721c0-1.334-1.253-2.386-3.29-2.435c-1.079-.026-1.738.243-2.637.898c-.644.468-2.153%202-1.48%203.253c.035.065.092.144.173.237a.519.519%200%200%201%20.008.668a.47.47%200%200%201-.651.073l-.106-.082c-1.33-1.016-2.054-1.394-2.054-2.899c0-2.832%203.737-5.553%207.346-5.466c3.605.087%206.412%202.69%206.412%205.725c0%201.66-1.058%204.015-2.788%205.825a11.509%2011.509%200%200%201-3.921%202.684c.094.155.191.322.29.503c.98%201.786.852%202.003.977%204.234c.124%202.232-.536%206.222-.283%208.188c.254%201.965%201.523%202.184%201.802%203.6c.177.897.616%204.791%201.317%2011.68a1.001%201.001%200%200%201-.996%201.104h-2.057a.998.998%200%200%201-.998-.998v-.497c0-.315.148-.612.4-.8l.318-.239a1%201%200%200%200%20.383-.986c-.547-2.912-1.028-4.665-1.442-5.259c-.306-.44-1.688-1.157-3.47-2.547c-.319-.25-.893-.78-1.72-1.592a.5.5%200%200%200-.848.296c-.15%201.203-.338%202.217-.561%203.042c-.27.994-1.1%203.587-2.489%207.777a1%201%200%200%201-.95.686h-2.618a.895.895%200%200%201-.894-.894v-.06a1%201%200%200%201%20.821-.985l1.123-.206c.806-2.944%201.157-5.1%201.055-6.469c-.072-.968-.726-2.094-1.385-4.054c-.137-.408-.33-1.24-.578-2.5a.5.5%200%200%200-.617-.387l-6.663%201.726a.5.5%200%200%200-.316.72l.157.296c.3.562.456%201.19.456%201.827v9.36c0%20.311-.145.605-.392.795l-1.397%201.07a1.001%201.001%200%200%201-.61.207H22.67a1.001%201.001%200%200%201-1-1.001v-.51c0-.363.195-.698.512-.875l.72-.402a1%201%200%200%200%20.51-.958c-.114-1.351-.254-2.379-.422-3.083c-.172-.726-.59-2.022-1.253-3.886a.5.5%200%200%200-.799-.21l-.195.168c-.489.423-1.086.7-1.724.803l-6.252%201a.5.5%200%200%200-.291.83l.665.732c.168.184.26.424.26.673v.654a1.001%201.001%200%200%201-1.03%201l-.82-.024a1.001%201.001%200%200%201-.767-.394L9.75%2046.327a1.001%201.001%200%200%201-.205-.607v-1.988c0-.347.18-.67.475-.852c4.271-2.64%206.587-4.099%206.948-4.38c.374-.29.53-.775.468-1.454c-.696-2.067-1.811-2.799-2.312-4.023c-.5-1.223-1.43-5.03-1.89-6.492c-.925-2.94-1.737-4.495-1.956-4.96c-.492-1.044-1.36-1.192-2.277-1.552c-.917-.361-2.66-.306-3.794-1.301c-1.133-.996-1.029-2.036-1.293-3.168v-1.385c0-.553.449-1.001%201.002-1.001h2.716c.367%200%20.704-.2.88-.523c.31-.569.805-1.113%201.486-1.631a8.629%208.629%200%200%201%203.039-1.469c-.25-3.114-.25-4.873%200-5.277c.25-.404.945.228%202.087%201.896c.163-1.964.481-2.684.955-2.16c.442.49%201.205%202.27%202.288%205.34c.142.4.347.778.607%201.115c.455.588.865%201.292%201.232%202.11c.697%201.556%201.511%205.62%202.952%207.619c1.44%201.999%202.281%202.163%204.361%202.533c1.382.246%206.147-.54%2010.05-.692c3.006-.118%205.424.388%205.86.5c.157.041.307.086.453.14'/%3e%3c/svg%3e",Wi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='m7%2023l3.075-15.55q.15-.725.675-1.088T11.85%206t1.063.25t.787.75l1%201.6q.45.725%201.163%201.313t1.637.862V9H19v14h-1.5V12.85q-1.2-.275-2.225-.875T13.5%2010.5l-.6%203l2.1%202V23h-2v-6l-2.1-2l-1.8%208zm.425-9.875l-2.125-.4q-.4-.075-.625-.413t-.15-.762l.75-3.925q.15-.8.85-1.263t1.5-.312l1.15.225zM13.5%205.5q-.825%200-1.412-.587T11.5%203.5t.588-1.412T13.5%201.5t1.413.588T15.5%203.5t-.587%201.413T13.5%205.5'/%3e%3c/svg%3e",Ji="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20id='Layer_1'%20enable-background='new%200%200%20479.994%20479.994'%20height='512'%20viewBox='0%200%20479.994%20479.994'%20width='512'%20version='1.1'%20sodipodi:docname='hillslope.svg'%20inkscape:version='1.3.2%20(091e20ef0f,%202023-11-25)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs8'%20/%3e%3csodipodi:namedview%20id='namedview8'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:zoom='1.1367188'%20inkscape:cx='220.37112'%20inkscape:cy='333.41579'%20inkscape:window-width='2560'%20inkscape:window-height='1375'%20inkscape:window-x='2240'%20inkscape:window-y='0'%20inkscape:window-maximized='1'%20inkscape:current-layer='Layer_1'%20/%3e%3cpath%20d='m%20451.19421,229.40195%20c%20-1.41721,-4.83386%20-6.10866,-7.27326%20-10.18435,-5.28351%20-23.15133,11.33031%20-47.584,8.98646%20-67.85008,-4.19309%20-2.88329,-1.87734%20-6.43119,-1.39395%20-8.92352,1.10167%20-15.2394,15.30645%20-39.36126,15.4627%20-52.99382,-2.63052%20-2.44346,-3.2488%20-6.54849,-3.99074%20-9.74453,-1.77616%20-27.08627,18.74635%20-63.55154,15.01642%20-85.57007,-10.85931%20-3.02012,-3.54107%20-8.02433,-3.36121%20-10.96626,0.2698%20-34.62875,42.81894%20-71.07545,84.03034%20-108.92957,123.17331%20-5.219236,5.38468%20-1.925448,15.32219%205.0824,15.32219%20h%2092.71475%20c%2010.35051,0%2010.35051,17.98643%200,17.98643%20-173.887557,0%20-144.563071,-0.0978%20-161.45424,0.23607%20C%2017.391605,363.04448%205.369769,378.10474%206.7967512,395.65275%208.057578,411.22226%2019.795974,422.90219%2033.3914,422.90219%20h%20416.27809%20c%2014.65784,0%2026.44901,-13.80458%2026.14505,-30.65561%20-0.98716,-55.8816%20-9.24607,-110.49289%20-24.62033,-162.84463%20z%20M%20238.19267,362.51276%20h%20-6.55825%20c%20-10.3505,0%20-10.3505,-17.98643%200,-17.98643%20h%206.55825%20c%2010.35051,0%2010.35051,17.98643%200,17.98643%20z'%20id='path1'%20style='stroke-width:1.0482'%20/%3e%3cpath%20d='m%20237.35115,109.59547%20c%207.25512,-7.03607%2017.25769,4.37857%2010.87927,13.06826%20-47.28589,64.70281%20-99.88485,127.54514%20-155.257625,185.45695%20-3.36025,0.45077%20-5.784164,0.77565%20-9.144414,1.22756%20-17.380839,-10.77386%20-27.942463,-30.43078%20-27.888707,-52.53948%200,-26.59855%2014.228772,-53.58943%2034.941518,-66.22378%2015.902058,-9.70142%2033.289738,-10.00494%2049.621848,-1.03421%2010.35441,-13.41675%2026.75787,-16.84317%2039.76002,-7.80162%2059.52471,-75.66778%2055.20173,-70.32469%2057.08809,-72.15368%20z'%20id='path4'%20style='stroke-width:1.0482'%20/%3e%3cpath%20d='m%20440.08818,195.32778%20c%201.61855,4.50223%20-0.16127,9.68232%20-4.03073,11.66421%20-22.82879,11.69566%20-47.42859,6.7033%20-64.76447,-10.3928%20-3.97014,-3.8963%20-10.03188,-2.31574%20-12.18799,3.06894%20-4.31028,10.73565%20-16.58624,17.00842%20-26.81946,13.68093%20-7.46722,-2.42817%20-12.90147,-9.7464%20-13.51722,-18.20002%20-0.57862,-7.93426%20-9.20893,-11.17182%20-13.7225,-5.11489%20-19.46559,26.08706%20-58.69588,27.63839%20-79.15353,1.66262%20-2.68878,-3.41405%20-2.67119,-8.61662%200.004,-12.04416%2021.49857,-27.54509%2043.73407,-57.75892%2064.99709,-88.54494%2026.44609,-38.280741%2077.57212,-36.455118%20101.76534,3.912048%2018.8606,31.469512%2034.87309,65.375042%2047.42956,100.308062%20z'%20id='path8'%20style='stroke-width:1.0482'%20/%3e%3c/svg%3e",Yi="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20version='1.1'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m0.6249%2027.824c0%201.125%200.8906%201.8047%201.9922%201.8047%200.6797%200%201.2187-0.3281%201.6875-0.7969l22.875-20.836c0.2578-0.2578%200.5391-0.3516%200.8437-0.3516%200.2813%200%200.5391%200.0938%200.8203%200.3516l22.852%2020.836c0.492%200.4688%201.031%200.7969%201.6872%200.7969%201.1016%200%201.9925-0.6797%201.9925-1.8047%200-0.7031-0.2578-1.1484-0.7032-1.5468l-8.1096-7.3829v-13.852c0-1.0313-0.6562-1.6875-1.6872-1.6875h-3.0705c-1.0078%200-1.711%200.6562-1.711%201.6875v7.9687l-9.2812-8.4843c-0.8203-0.7735-1.8281-1.1485-2.8125-1.1485s-1.9687%200.375-2.8125%201.1485l-23.859%2021.75c-0.4218%200.3984-0.7031%200.8437-0.7031%201.5468zm6.7031%2019.664c0%203.2578%201.9688%205.1562%205.2735%205.1562h30.82c3.3048%200%205.2503-1.8984%205.2503-5.1562v-17.156l-19.898-17.93c-0.2579-0.2344-0.5391-0.3515-0.8203-0.3515-0.2579%200-0.5157%200.1171-0.7969%200.375l-19.828%2018.023z'/%3e%3c/svg%3e",Zi="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20id='Layer_1'%20enable-background='new%200%200%20512%20512'%20height='512'%20viewBox='0%200%20512%20512'%20width='512'%20version='1.1'%20sodipodi:docname='mtb.svg'%20inkscape:version='1.3.2%20(091e20ef0f,%202023-11-25)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs5'%20/%3e%3csodipodi:namedview%20id='namedview5'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:zoom='1.1367188'%20inkscape:cx='253.80069'%20inkscape:cy='332.53608'%20inkscape:window-width='2560'%20inkscape:window-height='1375'%20inkscape:window-x='2240'%20inkscape:window-y='0'%20inkscape:window-maximized='1'%20inkscape:current-layer='Layer_1'%20/%3e%3cg%20id='Layer_2_00000007405547900734707610000009233547936779136646_'%20transform='rotate(-22.23363,186.32649,345.92562)'%3e%3cg%20id='cycling'%3e%3cg%20id='icon'%3e%3cpath%20d='m%20285,197.3%20-49,40.1%20c%2011.7,7.6%2022,14.5%2032.5,21.2%209.2,5.9%2013.5,14%2013.4,25%20-0.2,32.7%200,65.4%20-0.1,98.1%20-0.1,16.5%20-10.1,27.5%20-24.6,27.5%20-14.5,0%20-24.6,-10.9%20-24.6,-27.5%20-0.1,-24.9%20-0.5,-49.8%200.2,-74.6%200.2,-8.9%20-2.2,-14.4%20-10.1,-18.8%20-12.4,-6.9%20-24.3,-14.8%20-36.1,-22.6%20-29.8,-19.7%20-31.2,-54.7%20-3.2,-76.6%2019.6,-15.3%2039.3,-30.5%2059.1,-45.6%2019.8,-15.2%2034.9,-15%2054.9,0.4%2011.8,9.1%2024,17.8%2035.3,27.5%207,6%2014.3,8.2%2023.3,7.7%209.6,-0.5%2019.2,-0.3%2028.8,0%2014.8,0.5%2025.2,11%2025.2,24.8%200,14.7%20-9.5,24.2%20-24.9,24.4%20-17,0.3%20-34.1,0.5%20-51.2,-0.2%20-5.6,-0.4%20-10.9,-2.2%20-15.5,-5.4%20-11.3,-7.6%20-21.7,-16.3%20-33.4,-25.4%20z'%20id='path1'%20/%3e%3cpath%20d='m%20218.2,84%20c%208.8,6.9%2015.8,15.6%2018.5,24.7%201.4,4.8%20-0.9,11.3%20-4.8,14.3%20-26.2,20.5%20-53,40.3%20-79.8,60%20-6.8,5%20-13.4,3.7%20-18.7,-2.9%20-10.9,-13.5%20-22,-26.9%20-32.6,-40.7%20-6.7,-8.7%20-5.8,-13.9%203.1,-20.7%2016.6,-12.8%2033,-25.9%2050.4,-37.5%201.4,-0.9%202.9,-1.8%204.4,-2.6%2019.2,-10.1%2042.5,-8%2059.5,5.4%20z'%20id='path2'%20/%3e%3cpath%20d='m%20409.6,255.8%20c%20-56.6,0%20-102.4,45.8%20-102.4,102.4%200,56.6%2045.8,102.4%20102.4,102.4%2056.6,0%20102.4,-45.8%20102.4,-102.4%200,-56.5%20-45.8,-102.4%20-102.4,-102.4%20z%20m%200,162.1%20c%20-33,0%20-59.7,-26.7%20-59.8,-59.7%200,-33%2026.7,-59.7%2059.7,-59.7%2033,0%2059.7,26.7%2059.8,59.7%200,33%20-26.7,59.7%20-59.7,59.7%20z'%20id='path3'%20/%3e%3cpath%20d='M%20102.4,255.8%20C%2045.8,255.8%200,301.7%200,358.2%20c%200,56.5%2045.8,102.4%20102.4,102.4%2056.6,0%20102.4,-45.8%20102.4,-102.4%200,-56.5%20-45.8,-102.4%20-102.4,-102.4%20z%20m%200,162.1%20c%20-33,0%20-59.7,-26.7%20-59.8,-59.7%200,-33%2026.7,-59.7%2059.7,-59.7%2033,0%2059.7,26.7%2059.8,59.7%200,33%20-26.7,59.7%20-59.7,59.7%20z'%20id='path4'%20/%3e%3cpath%20d='m%20358.5,89.8%20c%20-0.2,20.2%20-17.4,37.5%20-37.3,37.6%20-20.2,0.1%20-37.8,-17.9%20-37.5,-38.4%200.2,-20.2%2017.4,-37.5%2037.3,-37.6%2020.1,-0.1%2037.7,17.9%2037.5,38.4%20z'%20id='path5'%20/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Qi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill='black'%20fill-rule='evenodd'%20d='M14.98%202.5A6%206%200%200%200%2015%202V1h-1.75a6%206%200%200%200-5.761%204.32A5.99%205.99%200%200%200%202.75%203H1v1a6%206%200%200%200%206%206h.25v4.25a.75.75%200%200%200%201.5%200V8H9a6%206%200%200%200%205.98-5.5m-6.203%204a4.5%204.5%200%200%201%204.473-4h.223A4.5%204.5%200%200%201%209%206.5zm-6.027-2a4.5%204.5%200%200%201%204.473%204H7a4.5%204.5%200%200%201-4.473-4z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",Xi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%20256%20256'%3e%3cpath%20fill='currentColor'%20d='M176%2092a32%2032%200%201%200-32-32a32%2032%200%200%200%2032%2032m0-40a8%208%200%201%201-8%208a8%208%200%200%201%208-8M28.48%2080.64a12%2012%200%200%201%2014.88-8.16l67.5%2019.68l8.66-8.65a12%2012%200%200%201%2017%200L165%20112h35a12%2012%200%200%201%200%2024h-40a12%2012%200%200%201-8.48-3.51l-4.89-4.89l-110-32.07a12%2012%200%200%201-8.15-14.89m210.17%20130.93A73.77%2073.77%200%200%201%20177%20221L20.65%20175.51a12%2012%200%201%201%206.71-23l79.92%2023.27l13.81-13.81l-36.39-10.44a12%2012%200%201%201%206.6-23.07l56%2016a12%2012%200%200%201%205.19%2020l-18.93%2018.94l50.1%2014.6a49.81%2049.81%200%200%200%2041.68-6.39a12%2012%200%200%201%2013.31%2020Z'/%3e%3c/svg%3e",Ki="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20enable-background='new%200%200%20512.002%20512.002'%20version='1.1'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath%20d='m245.07%2029.846c-19.832%206.6603-30.791%2028.981-24.433%2049.754%200.67442%202.2004%202.2768%203.9516%204.3454%204.7492%201.5139%200.5837%203.1528%200.60864%204.6582%200.10308%200.4218-0.14166%200.8277-0.33731%201.222-0.56219%207.0607%2012.183%2021.423%2018.212%2034.935%2013.674%2015.814-5.3109%2024.553-23.108%2019.483-39.674-0.78222-2.5559-1.8858-4.9946-3.2524-7.2555%201.6179-1.2417%202.6792-3.137%202.8943-5.2444%200.23447-2.2998-0.55652-4.5829-2.145-6.1896-10.074-10.198-24.522-13.782-37.707-9.3544zm-9.4295%2085.753c-3.2878%201.0059-6.3699%202.5936-9.1222%204.6573l-74.676%2025.08c-15.814%205.3109-24.553%2023.108-19.483%2039.674l19.534%2063.826-140.72%20119.92c-3.0664%202.6145-3.5301%207.3392-1.0333%2010.551%201.9153%202.4652%205.0165%203.3239%207.7409%202.4089%200.82631-0.27751%201.6172-0.71807%202.3313-1.3265l143.53-122.32c15.081-5.8273%2024.107-22.323%2021.111-39.011l-5.9928-33.374c-0.84605-5.4903-3.0075-6.648%2013.188-12.305l18.341-6.1596-10.613%2071.975c-0.87345%205.9179-0.0633%2014.603%200.62542%2019.189l15.437%2083.374-34.861%2073.988c-1.5569%203.3047%200.61164%2010.646%203.4804%2012.778l31.204%2023.192c1.9126%201.4212%204.2597%201.7146%206.3339%201.0232l6e-3%20-2e-3%20252.7-84.867c11.553-3.88%2019.771-15.583%2025.321-26.885l2.6514-5.3987c1.8092-3.6824%200.42532-8.2042-3.0909-10.099-3.5162-1.895-7.8328-0.44525-9.6408%203.2378l-2.6513%205.3987c-3.801%207.738-10.251%2013.462-18.163%2016.119l-104.18%2034.99%2013.722-204.26c0.27813-4.1322-2.6943-7.7168-6.6387-8.0072-3.9462-0.29294-7.3684%202.823-7.6456%206.955l-0.80782%2012.03-57.768-11.478-23.761-42.587c-7.5782-13.582-21.045-22.35-36.049-23.456-3.5737-0.26316-7.0673%200.16031-10.355%201.1662zm29.659%2092.635%209.2091%2011.109c6.9312%208.3594%2016.965%2013.318%2027.532%2013.606l58.671%201.6001-10.452%20155.62-10.429%203.5026-24.876-81.281c-2.5026-8.177-6.8531-15.745-12.581-21.885l-37.761-40.475c-3.4412-4.6341-5.6953-9.6141-2.9645-22.308zm1.0356%20123.98%2030.121%2076.026-50.34%2016.906-11.216-12.057%2027.345-55.677c0.35203-0.7168%200.59044-1.4881%200.70847-2.2849zm-151.93%20137.17c-3.7652%201.2645-5.8391%205.4874-4.632%209.4317%201.2071%203.9442%207.0063%2010.398%2010.771%209.1333l65.584-22.026c3.7652-1.2645%204.0712-9.7685%202.8641-13.713-1.2071-3.9442-5.2384-6.1168-9.0036-4.8522z'%20stroke-width='.97704'/%3e%3c/g%3e%3c/svg%3e",ea="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M8.5%2023q-.45%200-1.088-.475t-1.037-.975L4%2018.5l1.175-.95l1.15%201.475L9.2%2017l1.6-8.125l-1.8.7V13H7V8.275l4.125-1.725q.8-.35%201.175-.45T13%206q.525%200%20.963.275T14.7%207l1%201.575q.65%201.025%201.763%201.725T20%2011v2q-1.65%200-3.088-.7T14.5%2010.475l-.6%203l2.1%202V21.5q.375-.025.713-.125t.637-.275q.1-.05.187-.075t.188-.025q.35%200%20.562.238t.213.512q0%20.2-.088.363t-.287.287q-.5.3-1.062.45t-1.188.15H12v-1.5h2v-4.525l-2.1-2L11%2018.2l-3.425%202.425l.075.1q.225.3.512.5t.638.325q.225.125.35.263t.125.412q0%20.325-.225.55T8.5%2023m6-17.5q-.825%200-1.413-.587T12.5%203.5t.588-1.412T14.5%201.5t1.413.588T16.5%203.5t-.587%201.413T14.5%205.5'/%3e%3c/svg%3e",ta="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M18%2011H6V6h12m-1.5%2011a1.5%201.5%200%200%201-1.5-1.5a1.5%201.5%200%200%201%201.5-1.5a1.5%201.5%200%200%201%201.5%201.5a1.5%201.5%200%200%201-1.5%201.5m-9%200A1.5%201.5%200%200%201%206%2015.5A1.5%201.5%200%200%201%207.5%2014A1.5%201.5%200%200%201%209%2015.5A1.5%201.5%200%200%201%207.5%2017M4%2016c0%20.88.39%201.67%201%202.22V20a1%201%200%200%200%201%201h1a1%201%200%200%200%201-1v-1h8v1a1%201%200%200%200%201%201h1a1%201%200%200%200%201-1v-1.78c.61-.55%201-1.34%201-2.22V6c0-3.5-3.58-4-8-4s-8%20.5-8%204z'/%3e%3c/svg%3e",oa=["top","right","bottom","left"],jn={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:l=>oa.includes(l)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function na(l,p){return{formClass:ae(()=>`q-fab--form-${l.square===!0?"square":"rounded"}`),stacked:ae(()=>l.externalLabel===!1&&["top","bottom"].includes(l.labelPosition)),labelProps:ae(()=>{if(l.externalLabel===!0){const x=l.hideLabel===null?p.value===!1:l.hideLabel;return{action:"push",data:{class:[l.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${l.labelPosition}`+(x===!0?" q-fab__label--external-hidden":"")],style:l.labelStyle}}}return{action:["left","top"].includes(l.labelPosition)?"unshift":"push",data:{class:[l.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${l.labelPosition}`+(l.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:l.labelStyle}}})}}const ra=["up","right","down","left"],ia=["left","center","right"],nr=Hn({name:"QFab",props:{...jn,...di,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...jn.hideLabel,default:null},direction:{type:String,default:"right",validator:l=>ra.includes(l)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:l=>ia.includes(l)}},emits:pi,setup(l,{slots:p}){const x=ye(null),m=ye(l.modelValue===!0),S=fi(),{proxy:{$q:_}}=jo(),{formClass:D,labelProps:N}=na(l,m),P=ae(()=>l.persistent!==!0),{hide:F,toggle:z}=hi({showing:m,hideOnRouteChange:P}),I=ae(()=>({opened:m.value})),C=ae(()=>`q-fab z-fab row inline justify-center q-fab--align-${l.verticalActionsAlign} ${D.value}`+(m.value===!0?" q-fab--opened":" q-fab--closed")),E=ae(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${l.direction} q-fab__actions--${m.value===!0?"opened":"closed"}`),L=ae(()=>{const Y={id:S.value,role:"menu"};return m.value!==!0&&(Y["aria-hidden"]="true"),Y}),h=ae(()=>`q-fab__icon-holder  q-fab__icon-holder--${m.value===!0?"opened":"closed"}`);function O(Y,G){const U=p[Y],Ve=`q-fab__${Y} absolute-full`;return U===void 0?Ne(Uo,{class:Ve,name:l[G]||_.iconSet.fab[G]}):Ne("div",{class:Ve},U(I.value))}function J(){const Y=[];return l.hideIcon!==!0&&Y.push(Ne("div",{class:h.value},[O("icon","icon"),O("active-icon","activeIcon")])),(l.label!==""||p.label!==void 0)&&Y[N.value.action](Ne("div",N.value.data,p.label!==void 0?p.label(I.value):[l.label])),vi(p.tooltip,Y)}return gi(mi,{showing:m,onChildClick(Y){F(Y),x.value!==null&&x.value.$el.focus()}}),()=>Ne("div",{class:C.value},[Ne(io,{ref:x,class:D.value,...l,noWrap:!0,stack:l.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":m.value===!0?"true":"false","aria-haspopup":"true","aria-controls":S.value,onClick:z},J),Ne("div",{class:E.value,...L.value},Wn(p.default))])}}),aa={position:{type:String,default:"bottom-right",validator:l=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(l)},offset:{type:Array,validator:l=>l.length===2},expand:Boolean};function sa(){const{props:l,proxy:{$q:p}}=jo(),x=Jn(yi,Po);if(x===Po)return console.error("QPageSticky needs to be child of QLayout"),Po;const m=ae(()=>{const I=l.position;return{top:I.indexOf("top")!==-1,right:I.indexOf("right")!==-1,bottom:I.indexOf("bottom")!==-1,left:I.indexOf("left")!==-1,vertical:I==="top"||I==="bottom",horizontal:I==="left"||I==="right"}}),S=ae(()=>x.header.offset),_=ae(()=>x.right.offset),D=ae(()=>x.footer.offset),N=ae(()=>x.left.offset),P=ae(()=>{let I=0,C=0;const E=m.value,L=p.lang.rtl===!0?-1:1;E.top===!0&&S.value!==0?C=`${S.value}px`:E.bottom===!0&&D.value!==0&&(C=`${-D.value}px`),E.left===!0&&N.value!==0?I=`${L*N.value}px`:E.right===!0&&_.value!==0&&(I=`${-L*_.value}px`);const h={transform:`translate(${I}, ${C})`};return l.offset&&(h.margin=`${l.offset[1]}px ${l.offset[0]}px`),E.vertical===!0?(N.value!==0&&(h[p.lang.rtl===!0?"right":"left"]=`${N.value}px`),_.value!==0&&(h[p.lang.rtl===!0?"left":"right"]=`${_.value}px`)):E.horizontal===!0&&(S.value!==0&&(h.top=`${S.value}px`),D.value!==0&&(h.bottom=`${D.value}px`)),h}),F=ae(()=>`q-page-sticky row flex-center fixed-${l.position} q-page-sticky--${l.expand===!0?"expand":"shrink"}`);function z(I){const C=Wn(I.default);return Ne("div",{class:F.value,style:P.value},l.expand===!0?C:[Ne("div",C)])}return{$layout:x,getStickyContent:z}}const rr=Hn({name:"QPageSticky",props:aa,setup(l,{slots:p}){const{getStickyContent:x}=sa();return()=>x(p)}});function ut({name:l,layers:p,tiles:x,attribution:m="",tileSize:S=256,minZoom:_=0,maxZoom:D=22,suffix:N="wd-",cdn:P=!1}){p=p===void 0?[l]:typeof p=="string"?[p]:p;const F={version:8,name:l,sources:{},glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",layers:[]};for(const z of p)F.layers.push({id:`${N}${z}`,type:"raster",source:`${N}${z}`,minzoom:_,maxzoom:D}),F.sources[`${N}${z}`]={type:"raster",tiles:x.map(I=>(P?"https://res.cloudinary.com/wodore/image/fetch/f_auto/q_auto/":"")+I.replace("<NAME>",z)),tileSize:S,attribution:m};return console.debug(`Add style spec ${l}`,p,F),F}function dt({name:l,layers:p,label:x,icon:m="fa-solid fa-notdef",format:S="png",active:_=!1,show:D=!0,onLayer:N="ways",tileMatrixSet:P=3857,attribution:F="",opacity:z=.7,minZoom:I=0,maxZoom:C=22,tileSize:E=256}){const L=ut({name:l,layers:p,attribution:F,tiles:[`https://wmts0.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts1.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts2.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts3.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts4.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts5.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts6.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts7.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts8.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`,`https://wmts9.geo.admin.ch/1.0.0/<NAME>/default/current/${P}/{z}/{x}/{y}.${S}`],minZoom:I,maxZoom:C,tileSize:E});return{name:L.name,label:x,show:D,active:_,onLayer:N,icon:m,opacity:z,style:L}}function no(l,p,x){return["case",["in","train",["get","types"]],l,["in","bus",["get","types"]],p,x]}function ca(){return["interpolate",["linear"],["zoom"],7,no(3,2,1),9,no(4,3,3),16,no(9,8,8)]}const la={"circle-color":no("#C60018","#2d327d","#0079C7"),"circle-stroke-color":"#F6F6F6","circle-stroke-width":["interpolate",["linear"],["zoom"],10,0,12,1,16,2],"circle-radius":ca(),"circle-opacity":["interpolate",["linear"],["zoom"],6,0,7,.3,10,.6,14,1]},ua={version:8,sources:{"transport-stops":{type:"geojson",data:"https://raw.githubusercontent.com/wodore/bav-haltestellen/main/static/bav_list.geojson",promoteId:"id"}},layers:[{id:"transport-stops",type:"circle",source:"transport-stops",layout:{visibility:"none"},paint:la}]},{bookingsGeojson:ro}=bi(Li()),da=so(),pa=11,fa={"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],7,7,9,10,22,16],"text-font":["Open Sans Semibold"],"text-anchor":"bottom","icon-allow-overlap":!0,"text-allow-overlap":!1,"symbol-sort-key":["get","type_id"],"icon-overlap":"always","text-overlap":"never","text-optional":!0,"icon-image":["step",["zoom"],["coalesce",["image",["concat","wodore:simple/",["get","type_open_slug"]]],["image","wodore:simple/unknown"]],pa,["coalesce",["image",["concat","wodore:detailed/",["get","type_open_slug"]]],["image","wodore:detailed/unknown"]]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,9,.3,20,2],visibility:"visible"},ha={"icon-opacity":["interpolate",["linear"],["zoom"],7,.7,12,.8,22,.85],"text-opacity":["step",["zoom"],0,9,1],"text-halo-width":2,"text-halo-color":"#ffffff","text-translate":["interpolate",["linear"],["zoom"],9,["literal",[0,-6]],20,["literal",[0,-40]]]},ga={"circle-blur":.7,"circle-color":["case",["boolean",["feature-state","color"],!1],["feature-state","color"],"#3366ff"],"circle-opacity":["case",["boolean",["feature-state","selected"],!1],.7,0],"circle-radius":["interpolate",["linear"],["zoom"],7,10,15,40]};function ma(l){return["match",["get","occupancy_status",["at",l,["get","bookings"]]],"empty","#f7fd25","low","#82cf06","medium","#eab138","high","#e16f07","full","#d32226","#d4d4d4"]}const va={"circle-color":ma(0),"circle-radius":["interpolate",["linear"],["zoom"],7,4,9,10,20,60],"circle-opacity":["interpolate",["linear"],["zoom"],6,.8,10,.6,11,.5,13,0]};function ya(l){return{visibility:"visible","text-field":["case",["<",l,["length",["get","bookings"]]],["concat",["get","free",["at",l,["get","bookings"]]],`
`,["get","total",["at",l,["get","bookings"]]]],""],"text-size":["interpolate",["linear"],["zoom"],12,7,14,10],"text-font":["Open Sans Semibold"],"icon-allow-overlap":!0,"text-allow-overlap":!0,"icon-image":["coalesce",["image",["concat","wodore:occupation_",["case",["<",l,["length",["get","bookings"]]],["get","occupancy_status",["at",l,["get","bookings"]]],"unknown"]]],["image","wodore:occupation_unknown"]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,12,.3,15,.6]}}function Bn(l){return["interpolate",["linear"],["zoom"],9,["literal",[(l-1.5)*7,11+Math.abs(l-1.5)*-2]],20,["literal",[(l-1.5)*40,90+Math.abs(l-1.5)*-10]]]}function ba(l){return{"icon-translate":Bn(l),"text-translate":Bn(l),"text-opacity":["interpolate",["linear"],["zoom"],11,0,12,.4,14,.6],"icon-opacity":["interpolate",["linear"],["zoom"],8,0,10,.8,11,1,13,1,15,.7]}}function eo(l){return{id:`wd-huts-occupation-day${l}`,type:"symbol",source:"wd-bookings",minzoom:8,layout:ya(l),paint:ba(l)}}const ir={version:8,sources:{"wd-huts":{type:"geojson",data:"https://api.wodore.com/v1/huts/huts.geojson?lang=de&limit=5000&embed_all=false&embed_type=true&embed_owner=false&embed_capacity=false&embed_sources=false&include_elevation=false&include_name=true&flat=true",promoteId:"slug"},"wd-bookings":{type:"geojson",data:ro.value,promoteId:"hut_id"}},layers:[eo(0),eo(1),eo(2),eo(3),{id:"wd-huts-occupation",type:"circle",source:"wd-bookings",maxzoom:13,layout:{visibility:"visible"},paint:va},{id:"wd-huts-selected",type:"circle",source:"wd-huts",layout:{visibility:"visible"},paint:ga},{id:"wd-huts",type:"symbol",source:"wd-huts",layout:fa,paint:ha}]};Yn(()=>{console.debug("Booking geojson updated");const l=ir.sources["wd-bookings"];l.data=ro.value;const p=da.map?.getSource("wd-bookings");p&&ro.value!==void 0&&p.setData(ro.value)});function Re({zoomOut:l=0,zoomMain:p=.8,zoomIn:x=.3}){return["interpolate",["linear"],["zoom"],10,l,11,p*.8,15,p,18,x]}const _a={name:"huts",label:"Huts",show:!0,active:!0,onLayer:"ways",icon:"huts",style:ir},wa={name:"transport-stops",label:"Haltestellen",onLayer:"ways",show:!0,active:!1,icon:"transport",opacity:!1,style:ua},Ea=dt({name:"ch.swisstopo-karto.skitouren",label:"Skitouren",icon:"skitouren",opacity:Re({}),minZoom:8}),xa=dt({name:"ch.swisstopo.schneeschuhwandern",label:"Schneeschuh",icon:"snowshoeing",opacity:Re({}),minZoom:8}),Sa=dt({name:"wildruhe_und_jagdbann",layers:["ch.bafu.wrz-wildruhezonen_portal","ch.bafu.wrz-jagdbanngebiete_select"],label:"Naturschutz",icon:"deer2",onLayer:"background",opacity:Re({zoomOut:.7,zoomMain:.5,zoomIn:.3})}),Ca=dt({name:"ch.bafu.alpweiden-herdenschutzhunde",label:"Hedenschutzhunde",icon:"dog",onLayer:"background",opacity:Re({zoomOut:.7,zoomMain:.5,zoomIn:.3})}),Ta=dt({name:"ch.swisstopo.hangneigung-ueber_30",label:"Hangneigung",icon:"hillslopes",onLayer:"background",opacity:Re({zoomOut:.1,zoomMain:.2,zoomIn:.4}),minZoom:10}),Oa={name:"slopes",label:"Skipisten",opacity:Re({zoomOut:.3,zoomMain:.6}),icon:"skislopes",onLayer:"ways",show:!0,style:ut({name:"slopes",tiles:["https://tile.waymarkedtrails.org/slopes/{z}/{x}/{y}.png"],minZoom:8})},Ia=dt({name:"ch.swisstopo.swisstlm3d-wanderwege",label:"Wanderwege",icon:"hiking",opacity:Re({zoomOut:.4,zoomMain:.9,zoomIn:.7})}),Ma={name:"cycling",label:"Fahrrad",opacity:Re({zoomOut:.6,zoomMain:.9,zoomIn:.7}),icon:"cycling",onLayer:"ways",show:!0,style:ut({name:"cycling",tiles:["https://tile.waymarkedtrails.org/cycling/{z}/{x}/{y}.png"]})},La={name:"mtb",label:"Mountainbike",opacity:Re({zoomOut:.6,zoomMain:.9,zoomIn:.7}),icon:"mtb",onLayer:"ways",show:!0,style:ut({name:"mtb",tiles:["https://tile.waymarkedtrails.org/mtb/{z}/{x}/{y}.png"]})},ka=Zn("overlay",()=>{function l(S){return S.active=!S.active,Ae.set("overlays",p),S.active}const p=Qn([_a,wa,Ia,La,Ma,Ta,Ea,xa,Oa,Sa,Ca]),m=(Ae.hasItem("overlays")?Ae.getItem("overlays"):[]).reduce((S,_)=>(S[_.name]=_,S),{});for(const S of p){const _=S.name;_ in m&&(S.active=m[_].active,S.show=m[_].show)}return{overlays:p,toggleOverlay:l}}),Pa="/assets/oe-raster-EIpPqIBW.png",Na="/assets/outdoor-v2-BR_lxvv7.png",Aa="/assets/satellite-C2H1DPJ2.png",Fa="/assets/select_map-BPM0HDk0.png",Ra="/assets/swiss-raster-D1bEQQjo.png",Da="/assets/swiss-vector-BQsQYbTX.png",za=ut({name:"ch-swisstopo-raster",tiles:["https://wmts0.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts1.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts2.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts3.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts4.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts5.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts6.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts7.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts8.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts9.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg"],attribution:'<a href="https://www.swisstopo.admin.ch/" target="_blank">&copy; swisstopo</a>',suffix:"",tileSize:_i.is.mobile?128:156}),No="bmaphidpi",Ao="jpeg",Ua=ut({name:"oe-raster",tiles:["https://maps1.wien.gv.at/basemap/"+No+"/normal/google3857/{z}/{y}/{x}."+Ao,"https://maps2.wien.gv.at/basemap/"+No+"/normal/google3857/{z}/{y}/{x}."+Ao,"https://maps3.wien.gv.at/basemap/"+No+"/normal/google3857/{z}/{y}/{x}."+Ao],attribution:"basemap.at",tileSize:512});function lt(l){return new URL(Object.assign({"/src/assets/wodore-design/map/switch/oe-raster.png":Pa,"/src/assets/wodore-design/map/switch/outdoor-v2.png":Na,"/src/assets/wodore-design/map/switch/satellite.png":Aa,"/src/assets/wodore-design/map/switch/select_map.png":Fa,"/src/assets/wodore-design/map/switch/swiss-raster.png":Ra,"/src/assets/wodore-design/map/switch/swiss-vector.png":Da})[`/src/assets/wodore-design/map/switch/${l}`],import.meta.url).href}const $o=Zn("basemap",()=>{const l=so();function p(){for(const _ of m)if(_.active)return _}function x(_,D=!1){const N=p();if(N!==void 0&&_.name==N.name&&!D)return console.debug("Active baselayer is already set."),!1;l.map?.setStyle(_.style,{diff:!0});for(const P of m)P.name==_.name?P.active=!0:P.active=!1;return Ae.set("basemapStyle",_),console.debug("Map layer is set to ",_.label),!0}const m=Qn([{name:"ch-swisstopo-raster",label:"Schweiz Topo Raster",show:!0,active:!0,img:lt("swiss-raster.png"),style:za,layers:{ways:{before:void 0},background:{before:void 0}}},{name:"CH swisstopo LBM Vivid",label:"Schweiz Topo Vector",show:!0,img:lt("swiss-vector.png"),style:"https://api.maptiler.com/maps/ch-swisstopo-lbm-vivid/style.json?key=yYYuZy3hwmMjY087FDvY",layers:{ways:{before:"Other place labels"},background:{before:"Building line"}}},{name:"Satellite Hybrid",label:"Satellite",show:!0,img:lt("satellite.png"),style:"https://api.maptiler.com/maps/hybrid/style.json?key=cQX2iET1gmOW38bedbUh",layers:{ways:{before:"Tunnel"},background:{before:"State labels"}}},{name:"outdoor-osm",label:"Outdoor OSM",show:!1,img:lt("outdoor-v2.png"),style:"https://api.maptiler.com/maps/outdoor-v2/style.json?key=yYYuZy3hwmMjY087FDvY",layers:{background:{before:"Contour index"},ways:{before:"Park"}}},{name:"oe-vector",label:"Östereich Topo Vector",active:!0,show:!1,img:lt("swiss-vector.png"),style:"styles/basemapv-bmapv-3857-resources-styles-root.json",layers:{ways:{before:void 0},background:{before:void 0}}},{name:"oe-raster",label:"Östereich Topo Raster",show:!1,img:lt("oe-raster.png"),style:Ua,layers:{ways:{before:void 0},background:{before:void 0}}}]),S=Ae.hasItem("basemapStyle")?Ae.getItem("basemapStyle"):m[0];return x(S),{basemaps:m,setBasemap:x,getBasemap:p}}),ja={class:"overlay-scroll"},Ba=Et({__name:"WdOverlaySwitch",props:{position:{default:"top-left"},direction:{default:"right"},offset:{default:void 0}},setup(l){const p=ka(),x=$o(),m=so(),S=Bo(),_=ye(Ae.hasItem("switcherOpen")?Ae.getItem("switcherOpen"):!0);Xn(_,C=>{Ae.set("switcherOpen",C)});function D(C){return console.debug("toogle",C),p.toggleOverlay(C),N(C),!0}function N(C){if(m.map===void 0)return!1;for(const E of C.style.layers)m.map.getLayer(E.id)&&(E.layout||(E.layout={visibility:"none"}),E.layout&&(C.active?E.layout.visibility="visible":E.layout.visibility="none",m.map.setLayoutProperty(E.id,"visibility",E.layout?.visibility)));return!0}function P({layer:C,onLayer:E=void 0,defaultOpacity:L=void 0}){const h=x.getBasemap(),O=E!==void 0?h?.layers[E]?.opacity:void 0;let J=!1;if((L===void 0||L==!0)&&(J=!0,L=["interpolate",["linear"],["zoom"],8,.9,14,.6,22,.5]),m.map?.getLayer(C.id)===void 0){let Y=L!=!1?L:void 0,G;E&&(G=h?.layers[E]?.before),O!==void 0&&(Y=O);const U="source"in C?C.source:void 0;U&&m.map?.getSource(U)||U===void 0?(console.debug(`Add layer '${C.id}' (before layer '${G}')`),m.map?.addLayer(C,G),C.paint!==void 0&&`${C.type}-opacity`in C.paint&&(L=!1),L==!1?Y=void 0:J==!1&&(Y=L),Y!==void 0&&(console.debug(`  Set paint '${C.type}-opacity' property for layer '${C.id}' to ${Y}`),m.map?.setPaintProperty(C.id,`${C.type}-opacity`,Y))):console.error(`Source '${U}' not added, tried to add layer '${C.id}'.`)}}function F(){const C=p.overlays.slice().filter(h=>h.onLayer=="background"),L=p.overlays.slice().filter(h=>h.onLayer=="ways").concat(C).reverse();for(const h of L){for(const O in h.style.sources)if(m.map?.getSource(O)===void 0){const J=h.style.sources[O];console.debug(`Add ${J.type} source '${O}'`),m.map?.addSource(O,J)}N(h);for(const O of h.style.layers)console.debug("Add layer",O),P({layer:O,defaultOpacity:h.opacity,onLayer:h.onLayer})}}m.map?.on("styledata",F),m.map?.on("load",F);const z="img:"+new URL("data:image/svg+xml,%3csvg%20clip-rule='evenodd'%20fill-rule='evenodd'%20height='512'%20stroke-linejoin='round'%20stroke-miterlimit='2'%20viewBox='0%200%2048%2048'%20width='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20transform='translate(0%20-576)'%3e%3cg%20id='FLAT-LINE'%20transform='scale(1.5)'%3e%3cg%20transform='matrix(.754%200%200%20.754%20-2.053%20-49.493)'%3e%3cpath%20d='m12.683%20600h22.508l6.719%203.073c.359.164.59.527.59.927s-.231.763-.59.927c-4.418%202.021-14.734%206.739-17.358%207.939-.391.179-.839.179-1.231%200-2.623-1.2-12.939-5.918-17.358-7.939-.359-.164-.589-.527-.589-.927s.23-.763.589-.927z'%20fill='%23f9a824'/%3e%3c/g%3e%3cg%20transform='matrix(.754%200%200%20.754%20-2.053%20-49.493)'%3e%3cpath%20d='m35.191%20592%206.719%203.073c.359.164.59.527.59.927s-.231.763-.59.927c-4.418%202.021-14.734%206.739-17.358%207.939-.391.179-.839.179-1.231%200-2.623-1.2-12.939-5.918-17.358-7.939-.359-.164-.589-.527-.589-.927s.23-.763.589-.927l6.72-3.073z'%20fill='%23f44336'/%3e%3c/g%3e%3cg%20transform='matrix(.827%200%200%20.986%20-4.456%20-193.901)'%3e%3cpath%20d='m24.188%20589.715c.358-.137.766-.137%201.124%200%202.394.919%2011.807%204.529%2015.839%206.076.327.125.538.403.538.709s-.211.584-.538.709c-4.032%201.547-13.445%205.157-15.839%206.076-.358.137-.766.137-1.124%200-2.394-.919-11.807-4.529-15.839-6.076-.327-.125-.538-.403-.538-.709s.211-.584.538-.709c4.032-1.547%2013.445-5.157%2015.839-6.076z'%20fill='%238bc349'/%3e%3c/g%3e%3cg%20transform='matrix(.667%200%200%20.667%20-4.123%20388)'%3e%3ccircle%20cx='14'%20cy='30'%20r='1'/%3e%3c/g%3e%3cg%20transform='scale(.667)'%3e%3cpath%20d='m8.864%20595.475-5.613%202.567c-.759.347-1.251%201.112-1.251%201.958s.492%201.611%201.251%201.958l5.613%202.567-5.613%202.567c-.759.347-1.251%201.112-1.251%201.958s.492%201.611%201.251%201.958l1.333.61c.502.229%201.096.008%201.325-.494.23-.502.009-1.095-.493-1.325l-1.333-.61c-.053-.024-.083-.08-.083-.139s.03-.115.083-.139l7.185-3.286%2011.62%205.314c.707.323%201.517.323%202.224%200%201.452-.664%203.687-1.686%207.504-3.432.502-.23.723-.824.494-1.325-.23-.502-.824-.723-1.325-.494-3.818%201.746-6.053%202.768-7.505%203.432-.178.082-.382.082-.56%200%200%200-19.637-8.981-19.637-8.981-.053-.024-.083-.08-.083-.139s.03-.115.083-.139l7.185-3.286%2011.62%205.314c.707.323%201.517.323%202.224%200l11.62-5.314%207.185%203.286c.053.024.083.08.083.139s-.03.115-.083.139c0%200-9.333%204.269-9.333%204.269-.502.229-.723.823-.493%201.325.229.502.823.723%201.325.493l1.316-.601%207.185%203.286c.053.024.083.08.083.139s-.03.115-.083.139c0%200-19.637%208.981-19.637%208.981-.178.082-.382.082-.56%200-2.209-1.01-12.804-5.856-12.804-5.856-.502-.229-1.096-.008-1.325.494-.23.502-.009%201.096.493%201.325%200%200%2010.595%204.846%2012.804%205.856.707.324%201.517.324%202.224%200%202.968-1.357%2014.638-6.695%2019.637-8.981.759-.347%201.251-1.112%201.251-1.958s-.492-1.611-1.251-1.958l-5.613-2.567%205.613-2.567c.759-.347%201.251-1.112%201.251-1.958s-.492-1.611-1.251-1.958l-5.613-2.567%205.613-2.567c.759-.347%201.251-1.112%201.251-1.958s-.492-1.611-1.251-1.958l-19.637-8.981c-.707-.324-1.517-.324-2.224%200-.333.152-1.304.596-1.304.596-.502.23-.723.824-.493%201.325.229.502.823.723%201.325.494%200%200%20.971-.444%201.304-.596.178-.082.382-.082.56%200%200%200%2019.637%208.981%2019.637%208.981.053.024.083.08.083.139s-.03.115-.083.139c0%200-19.637%208.981-19.637%208.981-.178.082-.382.082-.56%200%200%200-19.637-8.981-19.637-8.981-.053-.024-.083-.08-.083-.139s.03-.115.083-.139c0%200%2015.563-7.118%2015.563-7.118.502-.23.723-.824.494-1.326-.23-.502-.823-.723-1.325-.493-4.21%201.925-12.303%205.627-15.564%207.118-.759.347-1.251%201.112-1.251%201.958s.492%201.611%201.251%201.958z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",import.meta.url).href;function I(C){return"img:"+new URL(Object.assign({"/src/assets/wodore-design/overlays/exports/cycling.svg":Bi,"/src/assets/wodore-design/overlays/exports/deer-track.svg":$i,"/src/assets/wodore-design/overlays/exports/deer.svg":Vi,"/src/assets/wodore-design/overlays/exports/deer2.svg":Gi,"/src/assets/wodore-design/overlays/exports/dog (copy).svg":qi,"/src/assets/wodore-design/overlays/exports/dog.svg":Hi,"/src/assets/wodore-design/overlays/exports/hiking.svg":Wi,"/src/assets/wodore-design/overlays/exports/hillslopes.svg":Ji,"/src/assets/wodore-design/overlays/exports/huts.svg":Yi,"/src/assets/wodore-design/overlays/exports/mtb.svg":Zi,"/src/assets/wodore-design/overlays/exports/nature.svg":Qi,"/src/assets/wodore-design/overlays/exports/skislopes.svg":Xi,"/src/assets/wodore-design/overlays/exports/skitouren.svg":Ki,"/src/assets/wodore-design/overlays/exports/snowshoeing.svg":ea,"/src/assets/wodore-design/overlays/exports/transport.svg":ta})[`/src/assets/wodore-design/overlays/exports/${C}.svg`],import.meta.url).href}return(C,E)=>{const L=ji;return ue(),Ee(rr,{position:C.position,offset:C.offset,style:{"z-index":"5"}},{default:be(()=>[ve(nr,{ref:"fabStyleRef",push:"","vertical-actions-align":"center",icon:z,padding:"sm",direction:C.direction,persistent:"",color:_.value?"negative-400":"icon",modelValue:_.value,"onUpdate:modelValue":E[0]||(E[0]=h=>_.value=h)},{default:be(()=>[et("div",ja,[(ue(!0),ao(Kn,null,er(re(p).overlays,(h,O)=>tr((ue(),Ee(L,{tabindex:O,onClick:J=>D(h),key:h.name,label:h.label,icon:I(h.icon),active:h.active,tooltip:re(S).platform.is.desktop},null,8,["tabindex","onClick","label","icon","active","tooltip"])),[[or,h.show]])),128))])]),_:1},8,["direction","color","modelValue"])]),_:1},8,["position","offset"])}}}),$a=xt(Ba,[["__file","WdOverlaySwitch.vue"]]),Va={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ga=et("path",{fill:"currentColor",d:"M17 8h-7V6a2 2 0 0 1 4 0a1 1 0 0 0 2 0a4 4 0 0 0-8 0v2H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m1 11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"},null,-1),qa=et("path",{fill:"currentColor",d:"M12 12a3 3 0 1 0 3 3a3 3 0 0 0-3-3m0 4a1 1 0 1 1 1-1a1 1 0 0 1-1 1"},null,-1),Ha=[Ga,qa];function Wa(l,p){return ue(),ao("svg",Va,[...Ha])}const Ja={name:"eva-unlock-outline",render:Wa},Ya={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Za=et("circle",{cx:"12",cy:"15",r:"1",fill:"currentColor"},null,-1),Qa=et("path",{fill:"currentColor",d:"M17 8h-1V6.11a4 4 0 1 0-8 0V8H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m-7-1.89A2.06 2.06 0 0 1 12 4a2.06 2.06 0 0 1 2 2.11V8h-4ZM12 18a3 3 0 1 1 3-3a3 3 0 0 1-3 3"},null,-1),Xa=[Za,Qa];function Ka(l,p){return ue(),ao("svg",Ya,[...Xa])}const es={name:"eva-lock-fill",render:Ka},ts=["src"],os=Et({__name:"WdBasemapSwitchItem",props:{label:{},img:{},active:{type:Boolean},tooltip:{type:Boolean}},setup(l){return(p,x)=>(ue(),Ee(io,{round:"",style:{padding:"0"},ripple:!1,color:p.active?"accent-500":"primary-400"},{default:be(()=>[ve(wi,{size:"55px"},{default:be(()=>[et("img",{style:{padding:"3px"},src:p.img},null,8,ts)]),_:1}),p.tooltip?(ue(),Ee(Ri,{key:0},{default:be(()=>[Ei(xi(p.label),1)]),_:1})):oo("",!0)]),_:1},8,["color"]))}}),ns=xt(os,[["__file","WdBasemapSwitchItem.vue"]]),rs=Et({__name:"WdBasemapSwitch",props:{position:{default:"top-left"},direction:{default:"right"},offset:{default:void 0}},setup(l){const p=$o(),x=Bo(),m=ye(!1),S=ye(!1);function _(P){const F=p.setBasemap(P);return!S.value&&F?(m.value=!1,!0):F}function D(){S.value=!S.value}const N="img:"+new URL("/assets/basemap-switch-Dvj_H7Y5.svg",import.meta.url).href;return(P,F)=>{const z=ns,I=es,C=Ja;return ue(),Ee(rr,{position:P.position,offset:P.offset,style:{"z-index":"5"}},{default:be(()=>[ve(nr,{ref:"fabStyleRef",push:"","vertical-actions-align":"left",icon:N,padding:"sm",direction:P.direction,persistent:"",color:m.value?"negative-400":"icon",modelValue:m.value,"onUpdate:modelValue":F[0]||(F[0]=E=>m.value=E)},{default:be(()=>[(ue(!0),ao(Kn,null,er(re(p).basemaps,(E,L)=>tr((ue(),Ee(z,{tabindex:L,onClick:h=>_(E),key:E.name,label:E.label,img:E.img,active:E.active,tooltip:re(x).platform.is.desktop},null,8,["tabindex","onClick","label","img","active","tooltip"])),[[or,E.show]])),128)),re(x).screen.gt.xs?(ue(),Ee(io,{key:0,round:"",flat:"",style:{padding:"0"},ripple:!1,color:S.value?"accent-500":"secondary-800",onClick:D},{default:be(()=>[ve(Uo,null,{default:be(()=>[S.value?(ue(),Ee(I,{key:0})):oo("",!0),S.value?oo("",!0):(ue(),Ee(C,{key:1}))]),_:1})]),_:1},8,["color"])):oo("",!0)]),_:1},8,["direction","color","modelValue"])]),_:1},8,["position","offset"])}}}),is=xt(rs,[["__file","WdBasemapSwitch.vue"]]);function as(l){return Si()?(Ci(l),!0):!1}function Do(l){return typeof l=="function"?l():re(l)}const ss=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $n=()=>{};function cs(l,p){function x(...m){return new Promise((S,_)=>{Promise.resolve(l(()=>p.apply(this,m),{fn:p,thisArg:this,args:m})).then(S).catch(_)})}return x}function ls(l,p={}){let x,m,S=$n;const _=N=>{clearTimeout(N),S(),S=$n};return N=>{const P=Do(l),F=Do(p.maxWait);return x&&_(x),P<=0||F!==void 0&&F<=0?(m&&(_(m),m=null),Promise.resolve(N())):new Promise((z,I)=>{S=p.rejectOnCancel?I:z,F&&!m&&(m=setTimeout(()=>{x&&_(x),m=null,z(N())},F)),x=setTimeout(()=>{m&&_(m),m=null,z(N())},P)})}}function us(l,p=200,x={}){return cs(ls(p,x),l)}function Vn(l){var p;const x=Do(l);return(p=x?.$el)!=null?p:x}const ds=ss?window:void 0;function ps(){const l=ye(!1),p=jo();return p&&Ti(()=>{l.value=!0},p),l}function fs(l){const p=ps();return ae(()=>(p.value,!!l()))}function hs(l,p,x={}){const{window:m=ds,...S}=x;let _;const D=fs(()=>m&&"ResizeObserver"in m),N=()=>{_&&(_.disconnect(),_=void 0)},P=ae(()=>Array.isArray(l)?l.map(I=>Vn(I)):[Vn(l)]),F=Xn(P,I=>{if(N(),D.value&&m){_=new ResizeObserver(p);for(const C of I)C&&_.observe(C,S)}},{immediate:!0,flush:"post"}),z=()=>{N(),F()};return as(z),{isSupported:D,stop:z}}var ar={exports:{}};(function(l,p){(function(x,m){l.exports=m()})(wt,function(){var x=function(e,t){var o={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on:function(i,a,d){if(o[i]===void 0)throw new Error("Invalid event type: "+i);o[i].push({selector:a,fn:d})},render:function(i){t.store.featureChanged(i)}},r=function(i,a){for(var d=o[i],f=d.length;f--;){var y=d[f];if(y.selector(a)){y.fn.call(n,a)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop:function(){e.stop&&e.stop()},trash:function(){e.trash&&(e.trash(),t.store.render())},combineFeatures:function(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures:function(){e.uncombineFeatures&&e.uncombineFeatures()},drag:function(i){r("drag",i)},click:function(i){r("click",i)},mousemove:function(i){r("mousemove",i)},mousedown:function(i){r("mousedown",i)},mouseup:function(i){r("mouseup",i)},mouseout:function(i){r("mouseout",i)},keydown:function(i){r("keydown",i)},keyup:function(i){r("keyup",i)},touchstart:function(i){r("touchstart",i)},touchmove:function(i){r("touchmove",i)},touchend:function(i){r("touchend",i)},tap:function(i){r("tap",i)}}};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function S(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var o=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var i=Function.bind.apply(t,r);return new i}return t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(o,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),o}var _={},D={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},N=D;function P(e){var t=0;if(e&&e.length>0){t+=Math.abs(F(e[0]));for(var o=1;o<e.length;o++)t-=Math.abs(F(e[o]))}return t}function F(e){var t,o,n,r,i,a,d=0,f=e.length;if(f>2){for(a=0;a<f;a++)a===f-2?(n=f-2,r=f-1,i=0):a===f-1?(n=f-1,r=0,i=1):(n=a,r=a+1,i=a+2),t=e[n],o=e[r],d+=(z(e[i][0])-z(t[0]))*Math.sin(z(o[1]));d=d*N.RADIUS*N.RADIUS/2}return d}function z(e){return e*Math.PI/180}_.geometry=function e(t){var o,n=0;switch(t.type){case"Polygon":return P(t.coordinates);case"MultiPolygon":for(o=0;o<t.coordinates.length;o++)n+=P(t.coordinates[o]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(o=0;o<t.geometries.length;o++)n+=e(t.geometries[o]);return n}},_.ring=F;var I={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},C={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},E={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},L={POLYGON:"polygon",LINE:"line_string",POINT:"point"},h={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},O={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},J={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},Y={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},G={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},U={ACTIVE:"true",INACTIVE:"false"},Ve=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],j=-85,xe=Object.freeze({__proto__:null,classes:I,sources:C,cursors:E,types:L,geojsonTypes:h,modes:O,events:J,updateActions:Y,meta:G,activeStates:U,interactions:Ve,LAT_MIN:-90,LAT_RENDERED_MIN:j,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),pe={Point:0,LineString:1,MultiLineString:1,Polygon:2};function pt(e,t){var o=pe[e.geometry.type]-pe[t.geometry.type];return o===0&&e.geometry.type===h.POLYGON?e.area-t.area:o}function Vo(e){return e.map(function(t){return t.geometry.type===h.POLYGON&&(t.area=_.geometry({type:h.FEATURE,property:{},geometry:t.geometry})),t}).sort(pt).map(function(t){return delete t.area,t})}function Go(e,t){return t===void 0&&(t=0),[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function fe(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,o=e.length;t<o;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}fe.prototype.add=function(e){return this.has(e)||(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length),this},fe.prototype.delete=function(e){return this.has(e)===!1||(this._length--,delete this._items[e],delete this._nums[e]),this},fe.prototype.has=function(e){return(typeof e=="string"||typeof e=="number")&&(this._items[e]!==void 0||this._nums[e]!==void 0)},fe.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach(function(o){t.push({k:o,v:e._items[o]})}),Object.keys(this._nums).forEach(function(o){t.push({k:JSON.parse(o),v:e._nums[o]})}),t.sort(function(o,n){return o.v-n.v}).map(function(o){return o.k})},fe.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var cr=[G.FEATURE,G.MIDPOINT,G.VERTEX],tt={click:function(e,t,o){return qo(e,t,o,o.options.clickBuffer)},touch:function(e,t,o){return qo(e,t,o,o.options.touchBuffer)}};function qo(e,t,o,n){if(o.map===null)return[];var r=e?Go(e,n):t,i={};o.options.styles&&(i.layers=o.options.styles.map(function(y){return y.id}).filter(function(y){return o.map.getLayer(y)!=null}));var a=o.map.queryRenderedFeatures(r,i).filter(function(y){return cr.indexOf(y.properties.meta)!==-1}),d=new fe,f=[];return a.forEach(function(y){var b=y.properties.id;d.has(b)||(d.add(b),f.push(y))}),Vo(f)}function St(e,t){var o=tt.click(e,null,t),n={mouse:E.NONE};return o[0]&&(n.mouse=o[0].properties.active===U.ACTIVE?E.MOVE:E.POINTER,n.feature=o[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(n.mouse=E.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),o[0]}function co(e,t){var o=e.x-t.x,n=e.y-t.y;return Math.sqrt(o*o+n*n)}function lo(e,t,o){o===void 0&&(o={});var n=o.fineTolerance!=null?o.fineTolerance:4,r=o.grossTolerance!=null?o.grossTolerance:12,i=o.interval!=null?o.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;var a=co(e.point,t.point);return a<n||a<r&&t.time-e.time<i}function uo(e,t,o){o===void 0&&(o={});var n=o.tolerance!=null?o.tolerance:25,r=o.interval!=null?o.interval:250;return e.point=e.point||t.point,e.time=e.time||t.time,co(e.point,t.point)<n&&t.time-e.time<r}var Ho={exports:{}},po=Ho.exports=function(e,t){if(t||(t=16),e===void 0&&(e=128),e<=0)return"0";for(var o=Math.log(Math.pow(2,e))/Math.log(t),n=2;o===1/0;n*=2)o=Math.log(Math.pow(2,e/n))/Math.log(t)*n;var r=o-Math.floor(o),i="";for(n=0;n<Math.floor(o);n++)i=Math.floor(Math.random()*t).toString(t)+i;if(r){var a=Math.pow(t,r);i=Math.floor(Math.random()*a).toString(t)+i}var d=parseInt(i,t);return d!==1/0&&d>=Math.pow(2,e)?po(e,t):i};po.rack=function(e,t,o){var n=function(i){var a=0;do{if(a++>10){if(!o)throw new Error("too many ID collisions, use more bits");e+=o}var d=po(e,t)}while(Object.hasOwnProperty.call(r,d));return r[d]=i,d},r=n.hats={};return n.get=function(i){return n.hats[i]},n.set=function(i,a){return n.hats[i]=a,n},n.bits=e||128,n.base=t||16,n};var fo=m(Ho.exports),se=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||fo(),this.type=t.geometry.type};se.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},se.prototype.incomingCoords=function(e){this.setCoordinates(e)},se.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},se.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},se.prototype.setProperty=function(e,t){this.properties[e]=t},se.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:h.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},se.prototype.internal=function(e){var t={id:this.id,meta:G.FEATURE,"meta:type":this.type,active:U.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(var o in this.properties)t["user_"+o]=this.properties[o];return{type:h.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Ge=function(e,t){se.call(this,e,t)};(Ge.prototype=Object.create(se.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Ge.prototype.updateCoordinate=function(e,t,o){this.coordinates=arguments.length===3?[t,o]:[e,t],this.changed()},Ge.prototype.getCoordinate=function(){return this.getCoordinates()};var Oe=function(e,t){se.call(this,e,t)};(Oe.prototype=Object.create(se.prototype)).isValid=function(){return this.coordinates.length>1},Oe.prototype.addCoordinate=function(e,t,o){this.changed();var n=parseInt(e,10);this.coordinates.splice(n,0,[t,o])},Oe.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},Oe.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},Oe.prototype.updateCoordinate=function(e,t,o){var n=parseInt(e,10);this.coordinates[n]=[t,o],this.changed()};var he=function(e,t){se.call(this,e,t),this.coordinates=this.coordinates.map(function(o){return o.slice(0,-1)})};(he.prototype=Object.create(se.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(e){return e.length>2})},he.prototype.incomingCoords=function(e){this.coordinates=e.map(function(t){return t.slice(0,-1)}),this.changed()},he.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},he.prototype.addCoordinate=function(e,t,o){this.changed();var n=e.split(".").map(function(r){return parseInt(r,10)});this.coordinates[n[0]].splice(n[1],0,[t,o])},he.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map(function(n){return parseInt(n,10)}),o=this.coordinates[t[0]];o&&(o.splice(t[1],1),o.length<3&&this.coordinates.splice(t[0],1))},he.prototype.getCoordinate=function(e){var t=e.split(".").map(function(n){return parseInt(n,10)}),o=this.coordinates[t[0]];return JSON.parse(JSON.stringify(o[t[1]]))},he.prototype.getCoordinates=function(){return this.coordinates.map(function(e){return e.concat([e[0]])})},he.prototype.updateCoordinate=function(e,t,o){this.changed();var n=e.split("."),r=parseInt(n[0],10),i=parseInt(n[1],10);this.coordinates[r]===void 0&&(this.coordinates[r]=[]),this.coordinates[r][i]=[t,o]};var lr={MultiPoint:Ge,MultiLineString:Oe,MultiPolygon:he},Ct=function(e,t,o,n,r){var i=o.split("."),a=parseInt(i[0],10),d=i[1]?i.slice(1).join("."):null;return e[a][t](d,n,r)},de=function(e,t){if(se.call(this,e,t),delete this.coordinates,this.model=lr[t.geometry.type],this.model===void 0)throw new TypeError(t.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function A(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(de.prototype=Object.create(se.prototype))._coordinatesToFeatures=function(e){var t=this,o=this.model.bind(this);return e.map(function(n){return new o(t.ctx,{id:fo(),type:h.FEATURE,properties:{},geometry:{coordinates:n,type:t.type.replace("Multi","")}})})},de.prototype.isValid=function(){return this.features.every(function(e){return e.isValid()})},de.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},de.prototype.getCoordinate=function(e){return Ct(this.features,"getCoordinate",e)},de.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(e){return e.type===h.POLYGON?e.getCoordinates():e.coordinates})))},de.prototype.updateCoordinate=function(e,t,o){Ct(this.features,"updateCoordinate",e,t,o),this.changed()},de.prototype.addCoordinate=function(e,t,o){Ct(this.features,"addCoordinate",e,t,o),this.changed()},de.prototype.removeCoordinate=function(e){Ct(this.features,"removeCoordinate",e),this.changed()},de.prototype.getFeatures=function(){return this.features},A.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},A.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce(function(o,n){return o[n.feature_id]===void 0&&(o[n.feature_id]=!0,t._ctx.store.get(n.feature_id).changed()),o},{})},A.prototype.getSelected=function(){return this._ctx.store.getSelected()},A.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},A.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},A.prototype.getFeature=function(e){return this._ctx.store.get(e)},A.prototype.select=function(e){return this._ctx.store.select(e)},A.prototype.deselect=function(e){return this._ctx.store.deselect(e)},A.prototype.deleteFeature=function(e,t){return t===void 0&&(t={}),this._ctx.store.delete(e,t)},A.prototype.addFeature=function(e){return this._ctx.store.add(e)},A.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},A.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},A.prototype.setActionableState=function(e){e===void 0&&(e={});var t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},A.prototype.changeMode=function(e,t,o){return t===void 0&&(t={}),o===void 0&&(o={}),this._ctx.events.changeMode(e,t,o)},A.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},A.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},A.prototype.featuresAt=function(e,t,o){if(o===void 0&&(o="click"),o!=="click"&&o!=="touch")throw new Error("invalid buffer type");return tt[o](e,t,this._ctx)},A.prototype.newFeature=function(e){var t=e.geometry.type;return t===h.POINT?new Ge(this._ctx,e):t===h.LINE_STRING?new Oe(this._ctx,e):t===h.POLYGON?new he(this._ctx,e):new de(this._ctx,e)},A.prototype.isInstanceOf=function(e,t){if(e===h.POINT)return t instanceof Ge;if(e===h.LINE_STRING)return t instanceof Oe;if(e===h.POLYGON)return t instanceof he;if(e==="MultiFeature")return t instanceof de;throw new Error("Unknown feature class: "+e)},A.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},A.prototype.onSetup=function(){},A.prototype.onDrag=function(){},A.prototype.onClick=function(){},A.prototype.onMouseMove=function(){},A.prototype.onMouseDown=function(){},A.prototype.onMouseUp=function(){},A.prototype.onMouseOut=function(){},A.prototype.onKeyUp=function(){},A.prototype.onKeyDown=function(){},A.prototype.onTouchStart=function(){},A.prototype.onTouchMove=function(){},A.prototype.onTouchEnd=function(){},A.prototype.onTap=function(){},A.prototype.onStop=function(){},A.prototype.onTrash=function(){},A.prototype.onCombineFeature=function(){},A.prototype.onUncombineFeature=function(){},A.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Wo={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},ur=Object.keys(Wo);function dr(e){var t=Object.keys(e);return function(o,n){n===void 0&&(n={});var r={},i=t.reduce(function(a,d){return a[d]=e[d],a},new A(o));return{start:function(){var a=this;r=i.onSetup(n),ur.forEach(function(d){var f,y=Wo[d],b=function(){return!1};e[y]&&(b=function(){return!0}),a.on(d,b,(f=y,function(g){return i[f](r,g)}))})},stop:function(){i.onStop(r)},trash:function(){i.onTrash(r)},combineFeatures:function(){i.onCombineFeatures(r)},uncombineFeatures:function(){i.onUncombineFeatures(r)},render:function(a,d){i.toDisplayFeatures(r,a,d)}}}}function ft(e){return[].concat(e).filter(function(t){return t!==void 0})}function pr(){var e=this;if(!(e.ctx.map&&e.ctx.map.getSource(C.HOT)!==void 0))return f();var t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});var o=[],n=[];e.isDirty?n=e.getAllIds():(o=e.getChangedIds().filter(function(y){return e.get(y)!==void 0}),n=e.sources.hot.filter(function(y){return y.properties.id&&o.indexOf(y.properties.id)===-1&&e.get(y.properties.id)!==void 0}).map(function(y){return y.properties.id})),e.sources.hot=[];var r=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(function(y){var b=y.properties.id||y.properties.parent;return o.indexOf(b)===-1});var i=r!==e.sources.cold.length||n.length>0;function a(y,b){var g=e.get(y).internal(t);e.ctx.events.currentModeRender(g,function(M){e.sources[b].push(M)})}if(o.forEach(function(y){return a(y,"hot")}),n.forEach(function(y){return a(y,"cold")}),i&&e.ctx.map.getSource(C.COLD).setData({type:h.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(C.HOT).setData({type:h.FEATURE_COLLECTION,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire(J.SELECTION_CHANGE,{features:e.getSelected().map(function(y){return y.toGeoJSON()}),points:e.getSelectedCoordinates().map(function(y){return{type:h.FEATURE,properties:{},geometry:{type:h.POINT,coordinates:y.coordinates}}})}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){var d=e._deletedFeaturesToEmit.map(function(y){return y.toGeoJSON()});e._deletedFeaturesToEmit=[],e.ctx.map.fire(J.DELETE,{features:d})}function f(){e.isDirty=!1,e.clearChangedIds()}f(),e.ctx.map.fire(J.RENDER,{})}function q(e){var t,o=this;this._features={},this._featureIds=new fe,this._selectedFeatureIds=new fe,this._selectedCoordinates=[],this._changedFeatureIds=new fe,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=function(){t||(t=requestAnimationFrame(function(){t=null,pr.call(o)}))},this.isDirty=!1}function Jo(e,t){var o=e._selectedCoordinates.filter(function(n){return e._selectedFeatureIds.has(n.feature_id)});e._selectedCoordinates.length===o.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=o}q.prototype.createRenderBatch=function(){var e=this,t=this.render,o=0;return this.render=function(){o++},function(){e.render=t,o>0&&e.render()}},q.prototype.setDirty=function(){return this.isDirty=!0,this},q.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},q.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},q.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},q.prototype.getAllIds=function(){return this._featureIds.values()},q.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},q.prototype.delete=function(e,t){var o=this;return t===void 0&&(t={}),ft(e).forEach(function(n){o._featureIds.has(n)&&(o._featureIds.delete(n),o._selectedFeatureIds.delete(n),t.silent||o._deletedFeaturesToEmit.indexOf(o._features[n])===-1&&o._deletedFeaturesToEmit.push(o._features[n]),delete o._features[n],o.isDirty=!0)}),Jo(this,t),this},q.prototype.get=function(e){return this._features[e]},q.prototype.getAll=function(){var e=this;return Object.keys(this._features).map(function(t){return e._features[t]})},q.prototype.select=function(e,t){var o=this;return t===void 0&&(t={}),ft(e).forEach(function(n){o._selectedFeatureIds.has(n)||(o._selectedFeatureIds.add(n),o._changedFeatureIds.add(n),t.silent||(o._emitSelectionChange=!0))}),this},q.prototype.deselect=function(e,t){var o=this;return t===void 0&&(t={}),ft(e).forEach(function(n){o._selectedFeatureIds.has(n)&&(o._selectedFeatureIds.delete(n),o._changedFeatureIds.add(n),t.silent||(o._emitSelectionChange=!0))}),Jo(this,t),this},q.prototype.clearSelected=function(e){return e===void 0&&(e={}),this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},q.prototype.setSelected=function(e,t){var o=this;return t===void 0&&(t={}),e=ft(e),this.deselect(this._selectedFeatureIds.values().filter(function(n){return e.indexOf(n)===-1}),{silent:t.silent}),this.select(e.filter(function(n){return!o._selectedFeatureIds.has(n)}),{silent:t.silent}),this},q.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},q.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},q.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},q.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map(function(t){return e.get(t)})},q.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map(function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}})},q.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},q.prototype.setFeatureProperty=function(e,t,o){this.get(e).setProperty(t,o),this.featureChanged(e)},q.prototype.storeMapConfig=function(){var e=this;Ve.forEach(function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())})},q.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach(function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()})},q.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]===void 0||this._mapInitialConfig[e]};var fr=function(){for(var e=arguments,t={},o=0;o<arguments.length;o++){var n=e[o];for(var r in n)hr.call(n,r)&&(t[r]=n[r])}return t},hr=Object.prototype.hasOwnProperty,De=m(fr),gr=["mode","feature","mouse"];function mr(e){var t=null,o=null,n={onRemove:function(){return e.map.off("load",n.connect),clearInterval(o),n.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect:function(){e.map.off("load",n.connect),clearInterval(o),n.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd:function(r){var i=r.fire;return r.fire=function(a,d){var f=arguments;return i.length===1&&arguments.length!==1&&(f=[De({},{type:a},d)]),i.apply(r,f)},e.map=r,e.events=function(a){var d=Object.keys(a.options.modes).reduce(function(u,w){return u[w]=dr(a.options.modes[w]),u},{}),f={},y={},b={},g=null,M=null;b.drag=function(u,w){w({point:u.point,time:new Date().getTime()})?(a.ui.queueMapClasses({mouse:E.DRAG}),M.drag(u)):u.originalEvent.stopPropagation()},b.mousedrag=function(u){b.drag(u,function(w){return!lo(f,w)})},b.touchdrag=function(u){b.drag(u,function(w){return!uo(y,w)})},b.mousemove=function(u){if((u.originalEvent.buttons!==void 0?u.originalEvent.buttons:u.originalEvent.which)===1)return b.mousedrag(u);var w=St(u,a);u.featureTarget=w,M.mousemove(u)},b.mousedown=function(u){f={time:new Date().getTime(),point:u.point};var w=St(u,a);u.featureTarget=w,M.mousedown(u)},b.mouseup=function(u){var w=St(u,a);u.featureTarget=w,lo(f,{point:u.point,time:new Date().getTime()})?M.click(u):M.mouseup(u)},b.mouseout=function(u){M.mouseout(u)},b.touchstart=function(u){if(a.options.touchEnabled){y={time:new Date().getTime(),point:u.point};var w=tt.touch(u,null,a)[0];u.featureTarget=w,M.touchstart(u)}},b.touchmove=function(u){if(a.options.touchEnabled)return M.touchmove(u),b.touchdrag(u)},b.touchend=function(u){if(u.originalEvent.preventDefault(),a.options.touchEnabled){var w=tt.touch(u,null,a)[0];u.featureTarget=w,uo(y,{time:new Date().getTime(),point:u.point})?M.tap(u):M.touchend(u)}};var Z=function(u){return!(u===8||u===46||u>=48&&u<=57)};function k(u,w,B){B===void 0&&(B={}),M.stop();var ie=d[u];if(ie===void 0)throw new Error(u+" is not valid");g=u;var K=ie(a,w);M=x(K,a),B.silent||a.map.fire(J.MODE_CHANGE,{mode:u}),a.store.setDirty(),a.store.render()}b.keydown=function(u){(u.srcElement||u.target).classList.contains("mapboxgl-canvas")&&(u.keyCode!==8&&u.keyCode!==46||!a.options.controls.trash?Z(u.keyCode)?M.keydown(u):u.keyCode===49&&a.options.controls.point?k(O.DRAW_POINT):u.keyCode===50&&a.options.controls.line_string?k(O.DRAW_LINE_STRING):u.keyCode===51&&a.options.controls.polygon&&k(O.DRAW_POLYGON):(u.preventDefault(),M.trash()))},b.keyup=function(u){Z(u.keyCode)&&M.keyup(u)},b.zoomend=function(){a.store.changeZoom()},b.data=function(u){if(u.dataType==="style"){var w=a.setup,B=a.map,ie=a.options,K=a.store;ie.styles.some(function(wo){return B.getLayer(wo.id)})||(w.addLayers(),K.setDirty(),K.render())}};var X={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){g=a.options.defaultMode,M=x(d[g](a),a)},changeMode:k,actionable:function(u){var w=!1;Object.keys(u).forEach(function(B){if(X[B]===void 0)throw new Error("Invalid action type");X[B]!==u[B]&&(w=!0),X[B]=u[B]}),w&&a.map.fire(J.ACTIONABLE,{actions:X})},currentModeName:function(){return g},currentModeRender:function(u,w){return M.render(u,w)},fire:function(u,w){b[u]&&b[u](w)},addEventListeners:function(){a.map.on("mousemove",b.mousemove),a.map.on("mousedown",b.mousedown),a.map.on("mouseup",b.mouseup),a.map.on("data",b.data),a.map.on("touchmove",b.touchmove),a.map.on("touchstart",b.touchstart),a.map.on("touchend",b.touchend),a.container.addEventListener("mouseout",b.mouseout),a.options.keybindings&&(a.container.addEventListener("keydown",b.keydown),a.container.addEventListener("keyup",b.keyup))},removeEventListeners:function(){a.map.off("mousemove",b.mousemove),a.map.off("mousedown",b.mousedown),a.map.off("mouseup",b.mouseup),a.map.off("data",b.data),a.map.off("touchmove",b.touchmove),a.map.off("touchstart",b.touchstart),a.map.off("touchend",b.touchend),a.container.removeEventListener("mouseout",b.mouseout),a.options.keybindings&&(a.container.removeEventListener("keydown",b.keydown),a.container.removeEventListener("keyup",b.keyup))},trash:function(u){M.trash(u)},combineFeatures:function(){M.combineFeatures()},uncombineFeatures:function(){M.uncombineFeatures()},getMode:function(){return g}}}(e),e.ui=function(a){var d={},f=null,y={mode:null,feature:null,mouse:null},b={mode:null,feature:null,mouse:null};function g(u){b=De(b,u)}function M(){var u,w;if(a.container){var B=[],ie=[];gr.forEach(function(K){b[K]!==y[K]&&(B.push(K+"-"+y[K]),b[K]!==null&&ie.push(K+"-"+b[K]))}),B.length>0&&(u=a.container.classList).remove.apply(u,B),ie.length>0&&(w=a.container.classList).add.apply(w,ie),y=De(y,b)}}function Z(u,w){w===void 0&&(w={});var B=document.createElement("button");return B.className=I.CONTROL_BUTTON+" "+w.className,B.setAttribute("title",w.title),w.container.appendChild(B),B.addEventListener("click",function(ie){if(ie.preventDefault(),ie.stopPropagation(),ie.target===f)return k(),void w.onDeactivate();X(u),w.onActivate()},!0),B}function k(){f&&(f.classList.remove(I.ACTIVE_BUTTON),f=null)}function X(u){k();var w=d[u];w&&w&&u!=="trash"&&(w.classList.add(I.ACTIVE_BUTTON),f=w)}return{setActiveButton:X,queueMapClasses:g,updateMapClasses:M,clearMapClasses:function(){g({mode:null,feature:null,mouse:null}),M()},addButtons:function(){var u=a.options.controls,w=document.createElement("div");return w.className=I.CONTROL_GROUP+" "+I.CONTROL_BASE,u&&(u[L.LINE]&&(d[L.LINE]=Z(L.LINE,{container:w,className:I.CONTROL_BUTTON_LINE,title:"LineString tool "+(a.options.keybindings?"(l)":""),onActivate:function(){return a.events.changeMode(O.DRAW_LINE_STRING)},onDeactivate:function(){return a.events.trash()}})),u[L.POLYGON]&&(d[L.POLYGON]=Z(L.POLYGON,{container:w,className:I.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(a.options.keybindings?"(p)":""),onActivate:function(){return a.events.changeMode(O.DRAW_POLYGON)},onDeactivate:function(){return a.events.trash()}})),u[L.POINT]&&(d[L.POINT]=Z(L.POINT,{container:w,className:I.CONTROL_BUTTON_POINT,title:"Marker tool "+(a.options.keybindings?"(m)":""),onActivate:function(){return a.events.changeMode(O.DRAW_POINT)},onDeactivate:function(){return a.events.trash()}})),u.trash&&(d.trash=Z("trash",{container:w,className:I.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){a.events.trash()}})),u.combine_features&&(d.combine_features=Z("combineFeatures",{container:w,className:I.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){a.events.combineFeatures()}})),u.uncombine_features&&(d.uncombine_features=Z("uncombineFeatures",{container:w,className:I.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){a.events.uncombineFeatures()}}))),w},removeButtons:function(){Object.keys(d).forEach(function(u){var w=d[u];w.parentNode&&w.parentNode.removeChild(w),delete d[u]})}}}(e),e.container=r.getContainer(),e.store=new q(e),t=e.ui.addButtons(),e.options.boxSelect&&(e.boxZoomInitial=r.boxZoom.isEnabled(),r.boxZoom.disable(),r.dragPan.disable(),r.dragPan.enable()),r.loaded()?n.connect():(r.on("load",n.connect),o=setInterval(function(){r.loaded()&&n.connect()},16)),e.events.start(),t},addLayers:function(){e.map.addSource(C.COLD,{data:{type:h.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(C.HOT,{data:{type:h.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(function(r){e.map.addLayer(r)}),e.store.setDirty(!0),e.store.render()},removeLayers:function(){e.options.styles.forEach(function(r){e.map.getLayer(r.id)&&e.map.removeLayer(r.id)}),e.map.getSource(C.COLD)&&e.map.removeSource(C.COLD),e.map.getSource(C.HOT)&&e.map.removeSource(C.HOT)}};return e.setup=n,n}var Yo=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Tt(e){return function(t){var o=t.featureTarget;return!!o&&!!o.properties&&o.properties.meta===e}}function Zo(e){return!!e.originalEvent&&!!e.originalEvent.shiftKey&&e.originalEvent.button===0}function qe(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===U.ACTIVE&&e.featureTarget.properties.meta===G.FEATURE}function ho(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===U.INACTIVE&&e.featureTarget.properties.meta===G.FEATURE}function Ot(e){return e.featureTarget===void 0}function go(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.meta===G.FEATURE}function ht(e){var t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===G.VERTEX}function It(e){return!!e.originalEvent&&e.originalEvent.shiftKey===!0}function Mt(e){return e.keyCode===27}function Lt(e){return e.keyCode===13}var vr=Object.freeze({__proto__:null,isOfMetaType:Tt,isShiftMousedown:Zo,isActiveFeature:qe,isInactiveFeature:ho,noTarget:Ot,isFeature:go,isVertex:ht,isShiftDown:It,isEscapeKey:Mt,isEnterKey:Lt,isTrue:function(){return!0}}),yr=ot;function ot(e,t){this.x=e,this.y=t}ot.prototype={clone:function(){return new ot(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,o=e.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,o=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=o,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),o=Math.sin(e),n=t*this.x-o*this.y,r=o*this.x+t*this.y;return this.x=n,this.y=r,this},_rotateAround:function(e,t){var o=Math.cos(e),n=Math.sin(e),r=t.x+o*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+o*(this.y-t.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ot.convert=function(e){return e instanceof ot?e:Array.isArray(e)?new ot(e[0],e[1]):e};var br=m(yr);function mo(e,t){var o=t.getBoundingClientRect();return new br(e.clientX-o.left-(t.clientLeft||0),e.clientY-o.top-(t.clientTop||0))}function nt(e,t,o,n){return{type:h.FEATURE,properties:{meta:G.VERTEX,parent:e,coord_path:o,active:n?U.ACTIVE:U.INACTIVE},geometry:{type:h.POINT,coordinates:t}}}function Qo(e,t,o){var n=t.geometry.coordinates,r=o.geometry.coordinates;if(n[1]>85||n[1]<j||r[1]>85||r[1]<j)return null;var i={lng:(n[0]+r[0])/2,lat:(n[1]+r[1])/2};return{type:h.FEATURE,properties:{meta:G.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:o.properties.coord_path},geometry:{type:h.POINT,coordinates:[i.lng,i.lat]}}}function kt(e,t,o){t===void 0&&(t={}),o===void 0&&(o=null);var n,r=e.geometry,i=r.type,a=r.coordinates,d=e.properties&&e.properties.id,f=[];function y(g,M){var Z="",k=null;g.forEach(function(X,u){var w=M!=null?M+"."+u:String(u),B=nt(d,X,w,b(w));if(t.midpoints&&k){var ie=Qo(d,k,B);ie&&f.push(ie)}k=B;var K=JSON.stringify(X);Z!==K&&f.push(B),u===0&&(Z=K)})}function b(g){return!!t.selectedPaths&&t.selectedPaths.indexOf(g)!==-1}return i===h.POINT?f.push(nt(d,a,o,b(o))):i===h.POLYGON?a.forEach(function(g,M){y(g,o!==null?o+"."+M:String(M))}):i===h.LINE_STRING?y(a,o):i.indexOf(h.MULTI_PREFIX)===0&&(n=i.replace(h.MULTI_PREFIX,""),a.forEach(function(g,M){var Z={type:h.FEATURE,properties:e.properties,geometry:{type:n,coordinates:g}};f=f.concat(kt(Z,t,M))})),f}var _e={enable:function(e){setTimeout(function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable:function(e){setTimeout(function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()},0)}},Pt={exports:{}},Xo=function(e){if(!e||!e.type)return null;var t=_r[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e},_r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},wr=m(Xo),Er=Object.freeze({__proto__:null,default:function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce(function(o,n){return o.concat(e(n))},[]),t;case"Feature":return t.geometry?e(t.geometry).map(function(o){var n={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:o};return t.id!==void 0&&(n.id=t.id),n}):[t];case"MultiPoint":return t.coordinates.map(function(o){return{type:"Point",coordinates:o}});case"MultiPolygon":return t.coordinates.map(function(o){return{type:"Polygon",coordinates:o}});case"MultiLineString":return t.coordinates.map(function(o){return{type:"LineString",coordinates:o}});case"GeometryCollection":return t.geometries.map(e).reduce(function(o,n){return o.concat(n)},[]);case"Point":case"Polygon":case"LineString":return[t]}}}),xr=Xo,Nt=S(Er),Sr=function(e){return function t(o){return Array.isArray(o)&&o.length&&typeof o[0]=="number"?[o]:o.reduce(function(n,r){return Array.isArray(r)&&Array.isArray(r[0])?n.concat(t(r)):(n.push(r),n)},[])}(e)};Nt instanceof Function||(Nt=Nt.default);var Ko={exports:{}},Cr=Ko.exports=function(e){return new ge(e)};function ge(e){this.value=e}function en(e,t,o){var n=[],r=[],i=!0;return function a(d){var f=o?tn(d):d,y={},b=!0,g={node:f,node_:d,path:[].concat(n),parent:r[r.length-1],parents:r,key:n.slice(-1)[0],isRoot:n.length===0,level:n.length,circular:null,update:function(k,X){g.isRoot||(g.parent.node[g.key]=k),g.node=k,X&&(b=!1)},delete:function(k){delete g.parent.node[g.key],k&&(b=!1)},remove:function(k){on(g.parent.node)?g.parent.node.splice(g.key,1):delete g.parent.node[g.key],k&&(b=!1)},keys:null,before:function(k){y.before=k},after:function(k){y.after=k},pre:function(k){y.pre=k},post:function(k){y.post=k},stop:function(){i=!1},block:function(){b=!1}};if(!i)return g;function M(){if(typeof g.node=="object"&&g.node!==null){g.keys&&g.node_===g.node||(g.keys=At(g.node)),g.isLeaf=g.keys.length==0;for(var k=0;k<r.length;k++)if(r[k].node_===d){g.circular=r[k];break}}else g.isLeaf=!0,g.keys=null;g.notLeaf=!g.isLeaf,g.notRoot=!g.isRoot}M();var Z=t.call(g,g.node);return Z!==void 0&&g.update&&g.update(Z),y.before&&y.before.call(g,g.node),b&&(typeof g.node!="object"||g.node===null||g.circular||(r.push(g),M(),Ft(g.keys,function(k,X){n.push(k),y.pre&&y.pre.call(g,g.node[k],k);var u=a(g.node[k]);o&&Rt.call(g.node,k)&&(g.node[k]=u.node),u.isLast=X==g.keys.length-1,u.isFirst=X==0,y.post&&y.post.call(g,u),n.pop()}),r.pop()),y.after&&y.after.call(g,g.node)),g}(e).node}function tn(e){if(typeof e=="object"&&e!==null){var t;if(on(e))t=[];else if(rt(e)==="[object Date]")t=new Date(e.getTime?e.getTime():e);else if(function(r){return rt(r)==="[object RegExp]"}(e))t=new RegExp(e);else if(function(r){return rt(r)==="[object Error]"}(e))t={message:e.message};else if(function(r){return rt(r)==="[object Boolean]"}(e))t=new Boolean(e);else if(function(r){return rt(r)==="[object Number]"}(e))t=new Number(e);else if(function(r){return rt(r)==="[object String]"}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var o=e.constructor&&e.constructor.prototype||e.__proto__||{},n=function(){};n.prototype=o,t=new n}return Ft(At(e),function(r){t[r]=e[r]}),t}return e}ge.prototype.get=function(e){for(var t=this.value,o=0;o<e.length;o++){var n=e[o];if(!t||!Rt.call(t,n)){t=void 0;break}t=t[n]}return t},ge.prototype.has=function(e){for(var t=this.value,o=0;o<e.length;o++){var n=e[o];if(!t||!Rt.call(t,n))return!1;t=t[n]}return!0},ge.prototype.set=function(e,t){for(var o=this.value,n=0;n<e.length-1;n++){var r=e[n];Rt.call(o,r)||(o[r]={}),o=o[r]}return o[e[n]]=t,t},ge.prototype.map=function(e){return en(this.value,e,!0)},ge.prototype.forEach=function(e){return this.value=en(this.value,e,!1),this.value},ge.prototype.reduce=function(e,t){var o=arguments.length===1,n=o?this.value:t;return this.forEach(function(r){this.isRoot&&o||(n=e.call(this,n,r))}),n},ge.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},ge.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},ge.prototype.clone=function(){var e=[],t=[];return function o(n){for(var r=0;r<e.length;r++)if(e[r]===n)return t[r];if(typeof n=="object"&&n!==null){var i=tn(n);return e.push(n),t.push(i),Ft(At(n),function(a){i[a]=o(n[a])}),e.pop(),t.pop(),i}return n}(this.value)};var At=Object.keys||function(e){var t=[];for(var o in e)t.push(o);return t};function rt(e){return Object.prototype.toString.call(e)}var on=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},Ft=function(e,t){if(e.forEach)return e.forEach(t);for(var o=0;o<e.length;o++)t(e[o],o,e)};Ft(At(ge.prototype),function(e){Cr[e]=function(t){var o=[].slice.call(arguments,1),n=new ge(t);return n[e].apply(n,o)}});var Rt=Object.hasOwnProperty||function(e,t){return t in e},Tr=Ko.exports,Or=ce;function ce(e){if(!(this instanceof ce))return new ce(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}ce.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},ce.prototype.equals=function(e){var t;return t=e instanceof ce?e.bbox():e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},ce.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},ce.prototype.union=function(e){var t;return this._valid=!0,t=e instanceof ce?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},ce.prototype.bbox=function(){return this._valid?this._bbox:null},ce.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],o=e[1];return this._bbox[0]<=t&&this._bbox[1]<=o&&this._bbox[2]>=t&&this._bbox[3]>=o},ce.prototype.intersect=function(e){return this._valid?(t=e instanceof ce?e.bbox():e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])):null;var t},ce.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},ce.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ir=function(e){if(!e)return[];var t=Nt(xr(e)),o=[];return t.features.forEach(function(n){n.geometry&&(o=o.concat(Sr(n.geometry.coordinates)))}),o},Mr=Tr,Lr=Or,nn={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},kr=Object.keys(nn);function vo(e){for(var t=Lr(),o=Ir(e),n=0;n<o.length;n++)t.include(o[n]);return t}Pt.exports=function(e){return vo(e).bbox()},Pt.exports.polygon=function(e){return vo(e).polygon()},Pt.exports.bboxify=function(e){return Mr(e).map(function(t){t&&kr.some(function(o){return!!t[o]&&nn[o].indexOf(t.type)!==-1})&&(t.bbox=vo(t).bbox(),this.update(t))})};var Pr=m(Pt.exports),Dt=-90;function yo(e,t){var o=Dt,n=90,r=Dt,i=90,a=270,d=-270;e.forEach(function(y){var b=Pr(y),g=b[1],M=b[3],Z=b[0],k=b[2];g>o&&(o=g),M<n&&(n=M),M>r&&(r=M),g<i&&(i=g),Z<a&&(a=Z),k>d&&(d=k)});var f=t;return o+f.lat>85&&(f.lat=85-o),r+f.lat>90&&(f.lat=90-r),n+f.lat<-85&&(f.lat=-85-n),i+f.lat<Dt&&(f.lat=Dt-i),a+f.lng<=-270&&(f.lng+=360*Math.ceil(Math.abs(f.lng)/360)),d+f.lng>=270&&(f.lng-=360*Math.ceil(Math.abs(f.lng)/360)),f}function bo(e,t){var o=yo(e.map(function(n){return n.toGeoJSON()}),t);e.forEach(function(n){var r,i=n.getCoordinates(),a=function(f){var y={lng:f[0]+o.lng,lat:f[1]+o.lat};return[y.lng,y.lat]},d=function(f){return f.map(function(y){return a(y)})};n.type===h.POINT?r=a(i):n.type===h.LINE_STRING||n.type===h.MULTI_POINT?r=i.map(a):n.type===h.POLYGON||n.type===h.MULTI_LINE_STRING?r=i.map(d):n.type===h.MULTI_POLYGON&&(r=i.map(function(f){return f.map(function(y){return d(y)})})),n.incomingCoords(r)})}var te={onSetup:function(e){var t=this,o={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(o.initiallySelectedFeatureIds.filter(function(n){return t.getFeature(n)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),o},fireUpdate:function(){this.map.fire(J.UPDATE,{action:Y.MOVE,features:this.getSelected().map(function(e){return e.toGeoJSON()})})},fireActionable:function(){var e=this,t=this.getSelected(),o=t.filter(function(d){return e.isInstanceOf("MultiFeature",d)}),n=!1;if(t.length>1){n=!0;var r=t[0].type.replace("Multi","");t.forEach(function(d){d.type.replace("Multi","")!==r&&(n=!1)})}var i=o.length>0,a=t.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:i,trash:a})},getUniqueIds:function(e){return e.length?e.map(function(t){return t.properties.id}).filter(function(t){return t!==void 0}).reduce(function(t,o){return t.add(o),t},new fe).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){_e.enable(this)},onMouseMove:function(e,t){return go(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0},onMouseOut:function(e){return!e.dragMoving||this.fireUpdate()}};te.onTap=te.onClick=function(e,t){return Ot(t)?this.clickAnywhere(e,t):Tt(G.VERTEX)(t)?this.clickOnVertex(e,t):go(t)?this.clickOnFeature(e,t):void 0},te.clickAnywhere=function(e){var t=this,o=this.getSelectedIds();o.length&&(this.clearSelectedFeatures(),o.forEach(function(n){return t.doRender(n)})),_e.enable(this),this.stopExtendedInteractions(e)},te.clickOnVertex=function(e,t){this.changeMode(O.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:E.MOVE})},te.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},te.clickOnFeature=function(e,t){var o=this;_e.disable(this),this.stopExtendedInteractions(e);var n=It(t),r=this.getSelectedIds(),i=t.featureTarget.properties.id,a=this.isSelected(i);if(!n&&a&&this.getFeature(i).type!==h.POINT)return this.changeMode(O.DIRECT_SELECT,{featureId:i});a&&n?(this.deselect(i),this.updateUIClasses({mouse:E.POINTER}),r.length===1&&_e.enable(this)):!a&&n?(this.select(i),this.updateUIClasses({mouse:E.MOVE})):a||n||(r.forEach(function(d){return o.doRender(d)}),this.setSelected(i),this.updateUIClasses({mouse:E.MOVE})),this.doRender(i)},te.onMouseDown=function(e,t){return qe(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&Zo(t)?this.startBoxSelect(e,t):void 0},te.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=mo(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},te.onTouchStart=function(e,t){if(qe(t))return this.startOnActiveFeature(e,t)},te.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},te.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:E.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(I.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));var o=mo(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,o.x),r=Math.max(e.boxSelectStartLocation.x,o.x),i=Math.min(e.boxSelectStartLocation.y,o.y),a=Math.max(e.boxSelectStartLocation.y,o.y),d="translate("+n+"px, "+i+"px)";e.boxSelectElement.style.transform=d,e.boxSelectElement.style.WebkitTransform=d,e.boxSelectElement.style.width=r-n+"px",e.boxSelectElement.style.height=a-i+"px"},te.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var o={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};bo(this.getSelected(),o),e.dragMoveLocation=t.lngLat},te.onTouchEnd=te.onMouseUp=function(e,t){var o=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var n=[e.boxSelectStartLocation,mo(t.originalEvent,this.map.getContainer())],r=this.featuresAt(null,n,"click"),i=this.getUniqueIds(r).filter(function(a){return!o.isSelected(a)});i.length&&(this.select(i),i.forEach(function(a){return o.doRender(a)}),this.updateUIClasses({mouse:E.MOVE}))}this.stopExtendedInteractions(e)},te.toDisplayFeatures=function(e,t,o){t.properties.active=this.isSelected(t.properties.id)?U.ACTIVE:U.INACTIVE,o(t),this.fireActionable(),t.properties.active===U.ACTIVE&&t.geometry.type!==h.POINT&&kt(t).forEach(o)},te.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},te.onCombineFeatures=function(){var e=this.getSelected();if(!(e.length===0||e.length<2)){for(var t=[],o=[],n=e[0].type.replace("Multi",""),r=0;r<e.length;r++){var i=e[r];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach(function(d){t.push(d)}):t.push(i.getCoordinates()),o.push(i.toGeoJSON())}if(o.length>1){var a=this.newFeature({type:h.FEATURE,properties:o[0].properties,geometry:{type:"Multi"+n,coordinates:t}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(J.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:o})}this.fireActionable()}},te.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(t.length!==0){for(var o=[],n=[],r=function(a){var d=t[a];e.isInstanceOf("MultiFeature",d)&&(d.getFeatures().forEach(function(f){e.addFeature(f),f.properties=d.properties,o.push(f.toGeoJSON()),e.select([f.id])}),e.deleteFeature(d.id,{silent:!0}),n.push(d.toGeoJSON()))},i=0;i<t.length;i++)r(i);o.length>1&&this.map.fire(J.UNCOMBINE_FEATURES,{createdFeatures:o,deletedFeatures:n}),this.fireActionable()}};var rn=Tt(G.VERTEX),an=Tt(G.MIDPOINT),ze={fireUpdate:function(){this.map.fire(J.UPDATE,{action:Y.CHANGE_COORDINATES,features:this.getSelected().map(function(e){return e.toGeoJSON()})})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var o=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(o.coord_path);It(t)||n!==-1?It(t)&&n===-1&&e.selectedCoordPaths.push(o.coord_path):e.selectedCoordPaths=[o.coord_path];var r=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(e,t){this.startDragging(e,t);var o=t.featureTarget.properties;e.feature.addCoordinate(o.coord_path,o.lng,o.lat),this.fireUpdate(),e.selectedCoordPaths=[o.coord_path]},pathsToCoordinates:function(e,t){return t.map(function(o){return{feature_id:e,coord_path:o}})},onFeature:function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,o){bo(this.getSelected(),o),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,o){for(var n=e.selectedCoordPaths.map(function(d){return e.feature.getCoordinate(d)}),r=yo(n.map(function(d){return{type:h.FEATURE,properties:{},geometry:{type:h.POINT,coordinates:d}}}),o),i=0;i<n.length;i++){var a=n[i];e.feature.updateCoordinate(e.selectedCoordPaths[i],a[0]+r.lng,a[1]+r.lat)}},clickNoTarget:function(){this.changeMode(O.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(O.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,o=this.getFeature(t);if(!o)throw new Error("You must provide a featureId to enter direct_select mode");if(o.type===h.POINT)throw new TypeError("direct_select mode doesn't handle point features");var n={featureId:t,feature:o,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),_e.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){_e.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,o){e.featureId===t.properties.id?(t.properties.active=U.ACTIVE,o(t),kt(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(o)):(t.properties.active=U.INACTIVE,o(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort(function(t,o){return o.localeCompare(t,"en",{numeric:!0})}).forEach(function(t){return e.feature.removeCoordinate(t)}),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(O.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var o=qe(t),n=rn(t),r=an(t),i=e.selectedCoordPaths.length===0;return o&&i||n&&!i?this.updateUIClasses({mouse:E.MOVE}):this.updateUIClasses({mouse:E.NONE}),(n||o||r)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0},onMouseOut:function(e){return e.dragMoving&&this.fireUpdate(),!0}};ze.onTouchStart=ze.onMouseDown=function(e,t){return rn(t)?this.onVertex(e,t):qe(t)?this.onFeature(e,t):an(t)?this.onMidpoint(e,t):void 0},ze.onDrag=function(e,t){if(e.canDragMove===!0){e.dragMoving=!0,t.originalEvent.stopPropagation();var o={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,o):this.dragFeature(e,t,o),e.dragMoveLocation=t.lngLat}},ze.onClick=function(e,t){return Ot(t)?this.clickNoTarget(e,t):qe(t)?this.clickActiveFeature(e,t):ho(t)?this.clickInactive(e,t):void this.stopDragging(e)},ze.onTap=function(e,t){return Ot(t)?this.clickNoTarget(e,t):qe(t)?this.clickActiveFeature(e,t):ho(t)?this.clickInactive(e,t):void 0},ze.onTouchEnd=ze.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var Se={};function zt(e,t){return!!e.lngLat&&e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]}Se.onSetup=function(){var e=this.newFeature({type:h.FEATURE,properties:{},geometry:{type:h.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(L.POINT),this.setActionableState({trash:!0}),{point:e}},Se.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)},Se.onTap=Se.onClick=function(e,t){this.updateUIClasses({mouse:E.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(J.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(O.SIMPLE_SELECT,{featureIds:[e.point.id]})},Se.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},Se.toDisplayFeatures=function(e,t,o){var n=t.properties.id===e.point.id;if(t.properties.active=n?U.ACTIVE:U.INACTIVE,!n)return o(t)},Se.onTrash=Se.stopDrawingAndRemove,Se.onKeyUp=function(e,t){if(Mt(t)||Lt(t))return this.stopDrawingAndRemove(e,t)};var He={onSetup:function(){var e=this.newFeature({type:h.FEATURE,properties:{},geometry:{type:h.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),_e.disable(this),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(L.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&zt(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(O.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:E.ADD}),e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(O.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ht(t)&&this.updateUIClasses({mouse:E.POINTER})}};He.onTap=He.onClick=function(e,t){return ht(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},He.onKeyUp=function(e,t){Mt(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)):Lt(t)&&this.changeMode(O.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},He.onStop=function(e){this.updateUIClasses({mouse:E.NONE}),_e.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate("0."+e.currentVertexPosition),e.polygon.isValid()?this.map.fire(J.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT,{},{silent:!0})))},He.toDisplayFeatures=function(e,t,o){var n=t.properties.id===e.polygon.id;if(t.properties.active=n?U.ACTIVE:U.INACTIVE,!n)return o(t);if(t.geometry.coordinates.length!==0){var r=t.geometry.coordinates[0].length;if(!(r<3)){if(t.properties.meta=G.FEATURE,o(nt(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),r>3){var i=t.geometry.coordinates[0].length-3;o(nt(e.polygon.id,t.geometry.coordinates[0][i],"0."+i,!1))}if(r<=4){var a=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(o({type:h.FEATURE,properties:t.properties,geometry:{coordinates:a,type:h.LINE_STRING}}),r===3)return}return o(t)}}},He.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)};var We={onSetup:function(e){var t,o,n=(e=e||{}).featureId,r="forward";if(n){if(!(t=this.getFeature(n)))throw new Error("Could not find a feature with the provided featureId");var i=e.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");var a=t.coordinates.length-1;if(t.coordinates[a][0]===i[0]&&t.coordinates[a][1]===i[1])o=a+1,t.addCoordinate.apply(t,[o].concat(t.coordinates[a]));else{if(t.coordinates[0][0]!==i[0]||t.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",o=0,t.addCoordinate.apply(t,[o].concat(t.coordinates[0]))}}else t=this.newFeature({type:h.FEATURE,properties:{},geometry:{type:h.LINE_STRING,coordinates:[]}}),o=0,this.addFeature(t);return this.clearSelectedFeatures(),_e.disable(this),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(L.LINE),this.setActionableState({trash:!0}),{line:t,currentVertexPosition:o,direction:r}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&zt(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&zt(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(O.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:E.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(O.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ht(t)&&this.updateUIClasses({mouse:E.POINTER})}};We.onTap=We.onClick=function(e,t){if(ht(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},We.onKeyUp=function(e,t){Lt(t)?this.changeMode(O.SIMPLE_SELECT,{featureIds:[e.line.id]}):Mt(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT))},We.onStop=function(e){_e.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(""+e.currentVertexPosition),e.line.isValid()?this.map.fire(J.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT,{},{silent:!0})))},We.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(O.SIMPLE_SELECT)},We.toDisplayFeatures=function(e,t,o){var n=t.properties.id===e.line.id;if(t.properties.active=n?U.ACTIVE:U.INACTIVE,!n)return o(t);t.geometry.coordinates.length<2||(t.properties.meta=G.FEATURE,o(nt(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],""+(e.direction==="forward"?t.geometry.coordinates.length-2:1),!1)),o(t))};var sn={simple_select:te,direct_select:ze,draw_point:Se,draw_polygon:He,draw_line_string:We},Nr={defaultMode:O.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Yo,modes:sn,controls:{},userProperties:!1},Ar={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Fr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function cn(e,t){return e.map(function(o){return o.source?o:De(o,{id:o.id+"."+t,source:t==="hot"?C.HOT:C.COLD})})}var _o={exports:{}};(function(e,t){var o="__lodash_hash_undefined__",n=9007199254740991,r="[object Arguments]",i="[object Array]",a="[object Boolean]",d="[object Date]",f="[object Error]",y="[object Function]",b="[object Map]",g="[object Number]",M="[object Object]",Z="[object Promise]",k="[object RegExp]",X="[object Set]",u="[object String]",w="[object Symbol]",B="[object WeakMap]",ie="[object ArrayBuffer]",K="[object DataView]",wo=/^\[object .+?Constructor\]$/,Ur=/^(?:0|[1-9]\d*)$/,H={};H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0,H[r]=H[i]=H[ie]=H[a]=H[K]=H[d]=H[f]=H[y]=H[b]=H[g]=H[M]=H[k]=H[X]=H[u]=H[B]=!1;var dn=typeof wt=="object"&&wt&&wt.Object===Object&&wt,jr=typeof self=="object"&&self&&self.Object===Object&&self,Ie=dn||jr||Function("return this")(),pn=t&&!t.nodeType&&t,fn=pn&&e&&!e.nodeType&&e,hn=fn&&fn.exports===pn,Eo=hn&&dn.process,gn=function(){try{return Eo&&Eo.binding&&Eo.binding("util")}catch{}}(),mn=gn&&gn.isTypedArray;function Br(s,c){for(var v=-1,T=s==null?0:s.length;++v<T;)if(c(s[v],v,s))return!0;return!1}function $r(s){var c=-1,v=Array(s.size);return s.forEach(function(T,W){v[++c]=[W,T]}),v}function Vr(s){var c=-1,v=Array(s.size);return s.forEach(function(T){v[++c]=T}),v}var vn,yn,bn,Gr=Array.prototype,qr=Function.prototype,jt=Object.prototype,xo=Ie["__core-js_shared__"],_n=qr.toString,Ce=jt.hasOwnProperty,wn=(vn=/[^.]+$/.exec(xo&&xo.keys&&xo.keys.IE_PROTO||""))?"Symbol(src)_1."+vn:"",En=jt.toString,Hr=RegExp("^"+_n.call(Ce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xn=hn?Ie.Buffer:void 0,Bt=Ie.Symbol,Sn=Ie.Uint8Array,Cn=jt.propertyIsEnumerable,Wr=Gr.splice,Je=Bt?Bt.toStringTag:void 0,Tn=Object.getOwnPropertySymbols,Jr=xn?xn.isBuffer:void 0,Yr=(yn=Object.keys,bn=Object,function(s){return yn(bn(s))}),So=it(Ie,"DataView"),gt=it(Ie,"Map"),Co=it(Ie,"Promise"),To=it(Ie,"Set"),Oo=it(Ie,"WeakMap"),mt=it(Object,"create"),Zr=Qe(So),Qr=Qe(gt),Xr=Qe(Co),Kr=Qe(To),ei=Qe(Oo),On=Bt?Bt.prototype:void 0,Io=On?On.valueOf:void 0;function Ye(s){var c=-1,v=s==null?0:s.length;for(this.clear();++c<v;){var T=s[c];this.set(T[0],T[1])}}function Me(s){var c=-1,v=s==null?0:s.length;for(this.clear();++c<v;){var T=s[c];this.set(T[0],T[1])}}function Ze(s){var c=-1,v=s==null?0:s.length;for(this.clear();++c<v;){var T=s[c];this.set(T[0],T[1])}}function $t(s){var c=-1,v=s==null?0:s.length;for(this.__data__=new Ze;++c<v;)this.add(s[c])}function Ue(s){var c=this.__data__=new Me(s);this.size=c.size}function ti(s,c){var v=qt(s),T=!v&&ai(s),W=!v&&!T&&Mo(s),R=!v&&!T&&!W&&Rn(s),Q=v||T||W||R,ee=Q?function(ne,Te){for(var Le=-1,le=Array(ne);++Le<ne;)le[Le]=Te(Le);return le}(s.length,String):[],we=ee.length;for(var oe in s)!Ce.call(s,oe)||Q&&(oe=="length"||W&&(oe=="offset"||oe=="parent")||R&&(oe=="buffer"||oe=="byteLength"||oe=="byteOffset")||ii(oe,we))||ee.push(oe);return ee}function Vt(s,c){for(var v=s.length;v--;)if(Pn(s[v][0],c))return v;return-1}function vt(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Je&&Je in Object(s)?function(c){var v=Ce.call(c,Je),T=c[Je];try{c[Je]=void 0;var W=!0}catch{}var R=En.call(c);return W&&(v?c[Je]=T:delete c[Je]),R}(s):function(c){return En.call(c)}(s)}function In(s){return yt(s)&&vt(s)==r}function Mn(s,c,v,T,W){return s===c||(s==null||c==null||!yt(s)&&!yt(c)?s!=s&&c!=c:function(R,Q,ee,we,oe,ne){var Te=qt(R),Le=qt(Q),le=Te?i:je(R),ke=Le?i:je(Q),at=(le=le==r?M:le)==M,Ht=(ke=ke==r?M:ke)==M,st=le==ke;if(st&&Mo(R)){if(!Mo(Q))return!1;Te=!0,at=!1}if(st&&!at)return ne||(ne=new Ue),Te||Rn(R)?Ln(R,Q,ee,we,oe,ne):function(V,$,Wt,Be,Lo,me,Pe){switch(Wt){case K:if(V.byteLength!=$.byteLength||V.byteOffset!=$.byteOffset)return!1;V=V.buffer,$=$.buffer;case ie:return!(V.byteLength!=$.byteLength||!me(new Sn(V),new Sn($)));case a:case d:case g:return Pn(+V,+$);case f:return V.name==$.name&&V.message==$.message;case k:case u:return V==$+"";case b:var $e=$r;case X:var _t=1&Be;if($e||($e=Vr),V.size!=$.size&&!_t)return!1;var Jt=Pe.get(V);if(Jt)return Jt==$;Be|=2,Pe.set(V,$);var ct=Ln($e(V),$e($),Be,Lo,me,Pe);return Pe.delete(V),ct;case w:if(Io)return Io.call(V)==Io.call($)}return!1}(R,Q,le,ee,we,oe,ne);if(!(1&ee)){var bt=at&&Ce.call(R,"__wrapped__"),Dn=Ht&&Ce.call(Q,"__wrapped__");if(bt||Dn){var ci=bt?R.value():R,li=Dn?Q.value():Q;return ne||(ne=new Ue),oe(ci,li,ee,we,ne)}}return st?(ne||(ne=new Ue),function(V,$,Wt,Be,Lo,me){var Pe=1&Wt,$e=kn(V),_t=$e.length,Jt=kn($).length;if(_t!=Jt&&!Pe)return!1;for(var ct=_t;ct--;){var Xe=$e[ct];if(!(Pe?Xe in $:Ce.call($,Xe)))return!1}var zn=me.get(V);if(zn&&me.get($))return zn==$;var Yt=!0;me.set(V,$),me.set($,V);for(var ko=Pe;++ct<_t;){var Zt=V[Xe=$e[ct]],Qt=$[Xe];if(Be)var Un=Pe?Be(Qt,Zt,Xe,$,V,me):Be(Zt,Qt,Xe,V,$,me);if(!(Un===void 0?Zt===Qt||Lo(Zt,Qt,Wt,Be,me):Un)){Yt=!1;break}ko||(ko=Xe=="constructor")}if(Yt&&!ko){var Xt=V.constructor,Kt=$.constructor;Xt==Kt||!("constructor"in V)||!("constructor"in $)||typeof Xt=="function"&&Xt instanceof Xt&&typeof Kt=="function"&&Kt instanceof Kt||(Yt=!1)}return me.delete(V),me.delete($),Yt}(R,Q,ee,we,oe,ne)):!1}(s,c,v,T,Mn,W))}function oi(s){return!(!Fn(s)||function(c){return!!wn&&wn in c}(s))&&(Nn(s)?Hr:wo).test(Qe(s))}function ni(s){if(v=(c=s)&&c.constructor,T=typeof v=="function"&&v.prototype||jt,c!==T)return Yr(s);var c,v,T,W=[];for(var R in Object(s))Ce.call(s,R)&&R!="constructor"&&W.push(R);return W}function Ln(s,c,v,T,W,R){var Q=1&v,ee=s.length,we=c.length;if(ee!=we&&!(Q&&we>ee))return!1;var oe=R.get(s);if(oe&&R.get(c))return oe==c;var ne=-1,Te=!0,Le=2&v?new $t:void 0;for(R.set(s,c),R.set(c,s);++ne<ee;){var le=s[ne],ke=c[ne];if(T)var at=Q?T(ke,le,ne,c,s,R):T(le,ke,ne,s,c,R);if(at!==void 0){if(at)continue;Te=!1;break}if(Le){if(!Br(c,function(Ht,st){if(bt=st,!Le.has(bt)&&(le===Ht||W(le,Ht,v,T,R)))return Le.push(st);var bt})){Te=!1;break}}else if(le!==ke&&!W(le,ke,v,T,R)){Te=!1;break}}return R.delete(s),R.delete(c),Te}function kn(s){return function(c,v,T){var W=v(c);return qt(c)?W:function(R,Q){for(var ee=-1,we=Q.length,oe=R.length;++ee<we;)R[oe+ee]=Q[ee];return R}(W,T(c))}(s,si,ri)}function Gt(s,c){var v,T,W=s.__data__;return((T=typeof(v=c))=="string"||T=="number"||T=="symbol"||T=="boolean"?v!=="__proto__":v===null)?W[typeof c=="string"?"string":"hash"]:W.map}function it(s,c){var v=function(T,W){return T?.[W]}(s,c);return oi(v)?v:void 0}Ye.prototype.clear=function(){this.__data__=mt?mt(null):{},this.size=0},Ye.prototype.delete=function(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c},Ye.prototype.get=function(s){var c=this.__data__;if(mt){var v=c[s];return v===o?void 0:v}return Ce.call(c,s)?c[s]:void 0},Ye.prototype.has=function(s){var c=this.__data__;return mt?c[s]!==void 0:Ce.call(c,s)},Ye.prototype.set=function(s,c){var v=this.__data__;return this.size+=this.has(s)?0:1,v[s]=mt&&c===void 0?o:c,this},Me.prototype.clear=function(){this.__data__=[],this.size=0},Me.prototype.delete=function(s){var c=this.__data__,v=Vt(c,s);return!(v<0)&&(v==c.length-1?c.pop():Wr.call(c,v,1),--this.size,!0)},Me.prototype.get=function(s){var c=this.__data__,v=Vt(c,s);return v<0?void 0:c[v][1]},Me.prototype.has=function(s){return Vt(this.__data__,s)>-1},Me.prototype.set=function(s,c){var v=this.__data__,T=Vt(v,s);return T<0?(++this.size,v.push([s,c])):v[T][1]=c,this},Ze.prototype.clear=function(){this.size=0,this.__data__={hash:new Ye,map:new(gt||Me),string:new Ye}},Ze.prototype.delete=function(s){var c=Gt(this,s).delete(s);return this.size-=c?1:0,c},Ze.prototype.get=function(s){return Gt(this,s).get(s)},Ze.prototype.has=function(s){return Gt(this,s).has(s)},Ze.prototype.set=function(s,c){var v=Gt(this,s),T=v.size;return v.set(s,c),this.size+=v.size==T?0:1,this},$t.prototype.add=$t.prototype.push=function(s){return this.__data__.set(s,o),this},$t.prototype.has=function(s){return this.__data__.has(s)},Ue.prototype.clear=function(){this.__data__=new Me,this.size=0},Ue.prototype.delete=function(s){var c=this.__data__,v=c.delete(s);return this.size=c.size,v},Ue.prototype.get=function(s){return this.__data__.get(s)},Ue.prototype.has=function(s){return this.__data__.has(s)},Ue.prototype.set=function(s,c){var v=this.__data__;if(v instanceof Me){var T=v.__data__;if(!gt||T.length<199)return T.push([s,c]),this.size=++v.size,this;v=this.__data__=new Ze(T)}return v.set(s,c),this.size=v.size,this};var ri=Tn?function(s){return s==null?[]:(s=Object(s),function(c,v){for(var T=-1,W=c==null?0:c.length,R=0,Q=[];++T<W;){var ee=c[T];v(ee,T,c)&&(Q[R++]=ee)}return Q}(Tn(s),function(c){return Cn.call(s,c)}))}:function(){return[]},je=vt;function ii(s,c){return!!(c=c??n)&&(typeof s=="number"||Ur.test(s))&&s>-1&&s%1==0&&s<c}function Qe(s){if(s!=null){try{return _n.call(s)}catch{}try{return s+""}catch{}}return""}function Pn(s,c){return s===c||s!=s&&c!=c}(So&&je(new So(new ArrayBuffer(1)))!=K||gt&&je(new gt)!=b||Co&&je(Co.resolve())!=Z||To&&je(new To)!=X||Oo&&je(new Oo)!=B)&&(je=function(s){var c=vt(s),v=c==M?s.constructor:void 0,T=v?Qe(v):"";if(T)switch(T){case Zr:return K;case Qr:return b;case Xr:return Z;case Kr:return X;case ei:return B}return c});var ai=In(function(){return arguments}())?In:function(s){return yt(s)&&Ce.call(s,"callee")&&!Cn.call(s,"callee")},qt=Array.isArray,Mo=Jr||function(){return!1};function Nn(s){if(!Fn(s))return!1;var c=vt(s);return c==y||c=="[object GeneratorFunction]"||c=="[object AsyncFunction]"||c=="[object Proxy]"}function An(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=n}function Fn(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function yt(s){return s!=null&&typeof s=="object"}var Rn=mn?function(s){return function(c){return s(c)}}(mn):function(s){return yt(s)&&An(s.length)&&!!H[vt(s)]};function si(s){return(c=s)!=null&&An(c.length)&&!Nn(c)?ti(s):ni(s);var c}e.exports=function(s,c){return Mn(s,c)}})(_o,_o.exports);var ln=m(_o.exports);function un(e,t){return e.length===t.length&&JSON.stringify(e.map(function(o){return o}).sort())===JSON.stringify(t.map(function(o){return o}).sort())}var Rr={Polygon:he,LineString:Oe,Point:Ge,MultiPolygon:de,MultiLineString:de,MultiPoint:de},Dr=Object.freeze({__proto__:null,CommonSelectors:vr,constrainFeatureMovement:yo,createMidPoint:Qo,createSupplementaryPoints:kt,createVertex:nt,doubleClickZoom:_e,euclideanDistance:co,featuresAt:tt,getFeatureAtAndSetCursors:St,isClick:lo,isEventAtCoordinates:zt,isTap:uo,mapEventToBoundingBox:Go,ModeHandler:x,moveFeatures:bo,sortFeatures:Vo,stringSetsAreEqual:un,StringSet:fe,theme:Yo,toDenseArray:ft}),zr=function(e,t){var o={options:e=function(r){r===void 0&&(r={});var i=De(r);return r.controls||(i.controls={}),r.displayControlsDefault===!1?i.controls=De(Fr,r.controls):i.controls=De(Ar,r.controls),(i=De(Nr,i)).styles=cn(i.styles,"cold").concat(cn(i.styles,"hot")),i}(e)};t=function(r,i){return i.modes=O,i.getFeatureIdsAt=function(a){return tt.click({point:a},null,r).map(function(d){return d.properties.id})},i.getSelectedIds=function(){return r.store.getSelectedIds()},i.getSelected=function(){return{type:h.FEATURE_COLLECTION,features:r.store.getSelectedIds().map(function(a){return r.store.get(a)}).map(function(a){return a.toGeoJSON()})}},i.getSelectedPoints=function(){return{type:h.FEATURE_COLLECTION,features:r.store.getSelectedCoordinates().map(function(a){return{type:h.FEATURE,properties:{},geometry:{type:h.POINT,coordinates:a.coordinates}}})}},i.set=function(a){if(a.type===void 0||a.type!==h.FEATURE_COLLECTION||!Array.isArray(a.features))throw new Error("Invalid FeatureCollection");var d=r.store.createRenderBatch(),f=r.store.getAllIds().slice(),y=i.add(a),b=new fe(y);return(f=f.filter(function(g){return!b.has(g)})).length&&i.delete(f),d(),y},i.add=function(a){var d=JSON.parse(JSON.stringify(wr(a))).features.map(function(f){if(f.id=f.id||fo(),f.geometry===null)throw new Error("Invalid geometry: null");if(r.store.get(f.id)===void 0||r.store.get(f.id).type!==f.geometry.type){var y=Rr[f.geometry.type];if(y===void 0)throw new Error("Invalid geometry type: "+f.geometry.type+".");var b=new y(r,f);r.store.add(b)}else{var g=r.store.get(f.id);g.properties=f.properties,ln(g.properties,f.properties)||r.store.featureChanged(g.id),ln(g.getCoordinates(),f.geometry.coordinates)||g.incomingCoords(f.geometry.coordinates)}return f.id});return r.store.render(),d},i.get=function(a){var d=r.store.get(a);if(d)return d.toGeoJSON()},i.getAll=function(){return{type:h.FEATURE_COLLECTION,features:r.store.getAll().map(function(a){return a.toGeoJSON()})}},i.delete=function(a){return r.store.delete(a,{silent:!0}),i.getMode()!==O.DIRECT_SELECT||r.store.getSelectedIds().length?r.store.render():r.events.changeMode(O.SIMPLE_SELECT,void 0,{silent:!0}),i},i.deleteAll=function(){return r.store.delete(r.store.getAllIds(),{silent:!0}),i.getMode()===O.DIRECT_SELECT?r.events.changeMode(O.SIMPLE_SELECT,void 0,{silent:!0}):r.store.render(),i},i.changeMode=function(a,d){return d===void 0&&(d={}),a===O.SIMPLE_SELECT&&i.getMode()===O.SIMPLE_SELECT?(un(d.featureIds||[],r.store.getSelectedIds())||(r.store.setSelected(d.featureIds,{silent:!0}),r.store.render()),i):(a===O.DIRECT_SELECT&&i.getMode()===O.DIRECT_SELECT&&d.featureId===r.store.getSelectedIds()[0]||r.events.changeMode(a,d,{silent:!0}),i)},i.getMode=function(){return r.events.getMode()},i.trash=function(){return r.events.trash({silent:!0}),i},i.combineFeatures=function(){return r.events.combineFeatures({silent:!0}),i},i.uncombineFeatures=function(){return r.events.uncombineFeatures({silent:!0}),i},i.setFeatureProperty=function(a,d,f){return r.store.setFeatureProperty(a,d,f),i},i}(o,t),o.api=t;var n=mr(o);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=L,t.options=e,t};function Ut(e){zr(e,this)}return Ut.modes=sn,Ut.constants=xe,Ut.lib=Dr,Ut})})(ar);var gs=ar.exports;const Fe=zi(gs),{cursors:Fo,geojsonTypes:sr,modes:Ke,meta:Gn}=Fe.constants;function ms(l){const p={...l};return p.clickOnFeature=function(x,m){m.featureTarget.geometry.type!==sr.POINT?this.changeMode(Ke.DIRECT_SELECT,{featureId:m.featureTarget.properties.id}):(l.clickOnFeature.call(this,x,m),this.setSelected(m.featureTarget.properties.id))},p}function vs(l){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>{};const m={...l};return m.clickInactive=function(S,_){_.featureTarget.geometry.type!==sr.POINT?this.changeMode(Ke.DIRECT_SELECT,{featureId:_.featureTarget.properties.id}):this.changeMode(Ke.SIMPLE_SELECT,{featureIds:[_.featureTarget.properties.id]})},m.dragFeature=function(S,_,D){const N=S.feature.toGeoJSON();p(N,_,D)?x():l.dragFeature.call(this,S,_,D)},m.onMouseMove=function(S,_){const D=l.onMouseMove.call(this,S,_),N=S.feature.toGeoJSON();if(p(N,_)){const P=Fe.lib.CommonSelectors.isInactiveFeature(_),F=Fe.lib.CommonSelectors.isOfMetaType(Gn.VERTEX)(_),z=Fe.lib.CommonSelectors.isOfMetaType(Gn.MIDPOINT)(_);P||z?this.updateUIClasses({mouse:Fo.POINTER}):F?this.updateUIClasses({mouse:Fo.MOVE}):this.updateUIClasses({mouse:Fo.NONE})}return D},m}function ys(l){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;return{...l,[Ke.SIMPLE_SELECT]:ms(l[Ke.SIMPLE_SELECT]),[Ke.DIRECT_SELECT]:vs(l[Ke.DIRECT_SELECT],p)}}let zo=Fe.modes;zo=ys(zo);Fe.constants.classes.CONTROL_BASE="maplibregl-ctrl";Fe.constants.classes.CONTROL_PREFIX="maplibregl-ctrl-";Fe.constants.classes.CONTROL_GROUP="maplibregl-ctrl-group";const to="#00F",qn="#00A",bs=new Fe({displayControlsDefault:!1,clickBuffer:10,modes:zo,controls:{polygon:!1,trash:!0,line_string:!0,point:!0},styles:[{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":to,"line-dasharray":[.2,2],"line-width":4}},{id:"gl-draw-line-halo",type:"line",filter:["all",["==","$type","LineString"],["==","active","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFF","line-width":8,"line-opacity":.4}},{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["==","active","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":to,"line-width":4,"line-opacity":.6}},{id:"gl-draw-polygon-midpoint-halo-active",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#FFF","circle-opacity":.6}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":5,"circle-color":to,"circle-opacity":.6}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"]],paint:{"circle-radius":9,"circle-color":"#FFF"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"]],paint:{"circle-radius":7,"circle-color":to}},{id:"points-circle-halo",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":9,"circle-color":"#FFF","circle-opacity":.6}},{id:"points-circle-active",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","active","true"]],paint:{"circle-radius":7,"circle-color":qn}},{id:"points-circle-inactive",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","active","false"]],paint:{"circle-radius":7,"circle-color":qn,"circle-opacity":.8}}]}),Ro=8,_s=7.5,ws=Et({__name:"WdMapView",setup(l){Oi(j=>({"06e49511":N.value,"54ab786a":z.value,"03ab5cef":F.value,"4016d250":P.value}));const p=Bo(),x=Ii(),m=Mi(),S=$o(),_=so(),D=Jn("_q_l_"),N=ye("0"),P=ye("0"),F=ye("0"),z=ye("0");D===void 0?console.error("MapView needs to be child of QLayout"):Yn(()=>{N.value=`${D.header.offset}px`,P.value=`${D.right.offset}px`,D.footer.offset<window.innerHeight-250&&(F.value=`${D.footer.offset}px`),z.value=`${D.left.offset}px`,console.debug("Layout offsets changed: (top, right, bottom, left): ",N.value,P.value,F.value,z.value)});const I=ye(null),C=us(()=>{_.map?.resize()},50);hs(I,()=>{C()});function E(j){console.debug(`Maplibre version ${j.map.version} loaded`),j.map.scrollZoom.setWheelZoomRate(.003),U(j),j.map.on("mouseenter","wd-huts",O),j.map.on("mouseleave","wd-huts",J),j.map.on("click","wd-huts",h),console.debug("Map controls added.",m.query.draw),"draw"in m.query&&j.map.addControl(bs)}const L=ye(void 0);function h(j){if(console.debug("Hut layer clicked."),j.target.getZoom()>Ro){let xe=j.features?.[0];if(console.debug("  Selected huts:",j.features?.map(pe=>pe.properties.slug)),xe){L.value!==void 0&&j.target.setFeatureState({source:"wd-huts",id:L.value.id},{selected:!1}),L.value?.id!=xe.id?(j.target.setFeatureState({source:"wd-huts",id:xe.id},{selected:!0}),L.value=xe):L.value=void 0;const pe=xe.properties.slug;m.params.slug==pe?x.push({name:"map",hash:m.hash,query:m.query}):x.push({name:"map-hut",params:{slug:pe},hash:m.hash,query:m.query})}}}function O(j){j.target.getZoom()>Ro&&(j.target.getCanvas().style.cursor="pointer")}function J(j){j.target.getZoom()>Ro&&(j.target.getCanvas().style.cursor="")}const G="https://api.wodore.com"+"/static/huts/sprite";function U(j){console.debug("Style data changed event",j);const xe=j.map.getSprite();let pe=!1;for(const pt of xe)pt.id=="wodore"&&(pe=!0);pe||(console.debug(`Add sprite 'wodore' from '${G}'`),j.map.addSprite("wodore",G))}const Ve=[8.22,46.7];return(j,xe)=>{const pe=is,pt=$a;return ue(),Ee(Di,null,{default:be(()=>[et("div",{ref_key:"mapDiv",ref:I,style:{height:"100vh"}},[ve(re(ki),{"onMap:load":E,"onMap:styledata":U,hash:"p","map-style":re(S).getBasemap()?.style,zoom:_s,"bearing-snap":15,center:Ve,"attribution-control":!1,"min-zoom":7,"max-zoom":20,"max-bounds":[3.6,43,18.7,49.7]},{default:be(()=>[ve(pe,{position:re(p).platform.is.mobile?"bottom-right":"top-left",direction:re(p).platform.is.mobile?"left":"right",offset:[(re(p).platform.is.mobile,14),re(p).platform.is.mobile?20:14]},null,8,["position","direction","offset"]),ve(pt,{position:"top-left",direction:"down",offset:[(re(p).platform.is.mobile,14),re(p).platform.is.mobile?14:68]},null,8,["offset"]),ve(re(Pi)),ve(re(Ni),{"show-zoom":!1}),ve(re(Ai),{position:re(p).platform.is.mobile?"bottom-left":"bottom-right"},null,8,["position"]),ve(re(Fi))]),_:1},8,["map-style"])],512)]),_:1})}}}),As=xt(ws,[["__file","WdMapView.vue"]]);export{As as default};
