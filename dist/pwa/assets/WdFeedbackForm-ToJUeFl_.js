import{o as h,a as A,f as c,h as P,l as L,s as U,aU as j,aX as O,aY as D,z as H,D as J,F as T,aZ as W,am as M,A as Z,aQ as K,a_ as X,d as Y,u as G,ar as ee,c as x,L as r,a7 as te,O as E,a$ as oe,e as l,b0 as ae,g as q,a6 as F,Q as S,aq as ne,R as le,M as B,P as N,b1 as se,b2 as ce,b3 as ie,b4 as re,b5 as de,_ as ue}from"./index-DYLQcesT.js";import{g as me,b as fe,Q as pe,a as he,t as I}from"./imageService-Dt-vl9Re.js";import{u as ge}from"./use-quasar-B8MsNk68.js";import{c as ve}from"./index-DZXjcz7j.js";import"./QScrollObserver-G1KRTuMB.js";import"./use-hydration-DECzhO7s.js";import"./_commonjsHelpers-C4iS2aBk.js";const be={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_e=c("path",{fill:"currentColor",d:"M12 2c5.5 0 10 4.5 10 10s-4.5 10-10 10S2 17.5 2 12S6.5 2 12 2m2.92 10.81c-1.08 0-1.97.75-2.21 1.75c-.54-.23-1.05-.17-1.42-.01c-.24-1-1.14-1.74-2.21-1.74c-1.25 0-2.26 1.01-2.26 2.26s1.01 2.26 2.26 2.26c1.2 0 2.16-.91 2.25-2.08c.2-.13.71-.39 1.34.01a2.258 2.258 0 0 0 4.51-.19c0-1.25-1.01-2.26-2.26-2.26m-5.84.64c.92 0 1.62.73 1.62 1.62s-.7 1.62-1.62 1.62c-.89 0-1.62-.73-1.62-1.62s.73-1.62 1.62-1.62m5.84 0c.89 0 1.62.73 1.62 1.62s-.73 1.62-1.62 1.62c-.92 0-1.62-.73-1.62-1.62s.7-1.62 1.62-1.62m2.91-1.95H6.17v.67h11.66zm-3.68-4.61a.67.67 0 0 0-.8-.36L12 7l-1.35-.47l-.04-.03a.67.67 0 0 0-.77.42l-1.48 3.91h7.28l-1.48-3.91z"},null,-1),xe=[_e];function ye(i,f){return h(),A("svg",be,[...xe])}const ke={name:"mdi-anonymous-circle",render:ye},Ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Se=c("path",{fill:"currentColor",d:"M22.11 21.46L2.39 1.73L1.11 3l2.95 2.95A9.9 9.9 0 0 0 2 12c0 5.5 4.5 10 10 10c2.28 0 4.37-.77 6.05-2.06l2.79 2.79zM8.94 10.83h-.58l.14-.42zm-2.77.67h3.44l.67.67H6.17zm8.75 5.83c-1.19 0-2.15-.91-2.25-2.07c-.63-.4-1.14-.14-1.34-.01a2.243 2.243 0 0 1-2.25 2.08c-1.25 0-2.26-1.01-2.26-2.26s1.01-2.26 2.26-2.26c1.07 0 1.97.74 2.21 1.74c.36-.15.84-.21 1.36-.01l.66.66c.06.8.69 1.41 1.47 1.47l.6.6c-.15.03-.3.06-.46.06M9.94 6.74L6.72 3.5C8.25 2.56 10.06 2 12 2c5.5 0 10 4.5 10 10c0 1.94-.56 3.75-1.5 5.28l-5.13-5.11h2.46v-.67H14.7l-.67-.67h1.61l-1.48-3.91l-.01-.03a.67.67 0 0 0-.8-.36L12 7l-1.35-.47l-.04-.03a.71.71 0 0 0-.67.24m.76 8.33c0 .89-.7 1.62-1.62 1.62c-.89 0-1.62-.73-1.62-1.62s.73-1.62 1.62-1.62c.92 0 1.62.73 1.62 1.62"},null,-1),we=[Se];function Ve(i,f){return h(),A("svg",Ce,[...we])}const $e={name:"mdi-anonymous-circle-off",render:Ve},Qe=P({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(i,{slots:f,emit:g}){const y=L(),e=U(null);let s=0;const p=[];function v(o){const u=typeof o=="boolean"?o:i.noErrorFocus!==!0,b=++s,d=(n,t)=>{g(`validation${n===!0?"Success":"Error"}`,t)},a=n=>{const t=n.validate();return typeof t.then=="function"?t.then(m=>({valid:m,comp:n}),m=>({valid:!1,comp:n,err:m})):Promise.resolve({valid:t,comp:n})};return(i.greedy===!0?Promise.all(p.map(a)).then(n=>n.filter(t=>t.valid!==!0)):p.reduce((n,t)=>n.then(()=>a(t).then(m=>{if(m.valid===!1)return Promise.reject(m)})),Promise.resolve()).catch(n=>[n])).then(n=>{if(n===void 0||n.length===0)return b===s&&d(!0),!0;if(b===s){const{comp:t,err:m}=n[0];if(m!==void 0&&console.error(m),d(!1,t),u===!0){const C=n.find(({comp:z})=>typeof z.focus=="function"&&W(z.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function V(){s++,p.forEach(o=>{typeof o.resetValidation=="function"&&o.resetValidation()})}function k(o){o!==void 0&&M(o);const u=s+1;v().then(b=>{u===s&&b===!0&&(i.onSubmit!==void 0?g("submit",o):o!==void 0&&o.target!==void 0&&typeof o.target.submit=="function"&&o.target.submit())})}function $(o){o!==void 0&&M(o),g("reset"),Z(()=>{V(),i.autofocus===!0&&i.noResetFocus!==!0&&_()})}function _(){K(()=>{if(e.value===null)return;const o=e.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||e.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||e.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(e.value.querySelectorAll("[tabindex]"),u=>u.tabIndex!==-1);o?.focus({preventScroll:!0})})}j(X,{bindComponent(o){p.push(o)},unbindComponent(o){const u=p.indexOf(o);u!==-1&&p.splice(u,1)}});let Q=!1;return O(()=>{Q=!0}),D(()=>{Q===!0&&i.autofocus===!0&&_()}),H(()=>{i.autofocus===!0&&_()}),Object.assign(y.proxy,{validate:v,resetValidation:V,submit:k,reset:$,focus:_,getValidationComponents:()=>p}),()=>J("form",{class:"q-form",ref:e,onSubmit:k,onReset:$},T(f.default))}}),w=i=>(re("data-v-500778df"),i=i(),de(),i),Fe=w(()=>c("div",{class:"card-header absolute-bottom text-white text-h5"},null,-1)),Be=w(()=>c("div",{class:"absolute-bottom text-accent-400 text-h4 text-center card-header__text"}," Rückmeldung ",-1)),Ie={class:"col no-wrap items-center q-py-md"},qe=w(()=>c("p",{class:"text-body1 q-pt-md"},[c("b",null,"Sag, was du denkst!"),q(" Jede Rückmeldung, egal ob positiv oder negativ, hilft weiter. ")],-1)),Ee={class:"q-gutter-md q-pt-md"},Ue={class:""},Ae=w(()=>c("br",null,null,-1)),Re=w(()=>c("span",{class:"text-caption"},"Bei wichtigen Updates erhältst du eine E-Mail. ",-1)),ze="https://cdn.pixabay.com/photo/2014/05/11/11/12/mailbox-341744_1280.jpg",Me=Y({__name:"WdFeedbackForm",setup(i){const f=ge(),g=G(),y="anonym@wodore.com",e=ee({email:"",subject:"",message:"",get_updates:!1,urls:[]}),s=U([]);function p(){console.debug(`Submitted form for '${e.email}'`,e.message),e.urls=s.value.map(d=>d.value),e.email==y&&(e.get_updates=!1),I("feedback-sent",{updates:e.get_updates,anonym:e.email==y}),ve.POST("/v1/feedback/",{body:e}).then(()=>{f.notify({color:"positive",textColor:"black",icon:"wd-checkmark",message:"Nachricht gesendet"}),g.go(-1),setTimeout(()=>{k()},200)}).catch(()=>{I("feedback-fail",{message:JSON.stringify(e)}),f.notify({color:"negative",textColor:"black",icon:"wd-close",message:"Nachricht konnte nicht gesendet werden"})})}const v=U(!1);function V(){e.email||e.message||e.subject?f.dialog({dark:!0,title:"Bist du sicher?",message:"Deine Eingaben gehen verloren! Schliessen?",persistent:!0,ok:{label:"Ja",flat:!0},cancel:{label:"Nein",flat:!0}}).onOk(()=>{I("feedback-cancel"),g.go(-1)}).onCancel(()=>{I("feedback-continue")}):g.go(-1)}function k(){e.email="",e.message=""}function $(){const d=s.value.length,a=d>0?s.value[d-1].id+1:0;console.log(s.value),console.log(a),s.value.push({value:"",id:a,placeholder:`URL ${a+1}`})}function _(d){s.value.splice(d,1)}function Q(){g.replace({name:"support"})}const o=me(ze,{focal:"0.5,0.45",size:"800x300",quality:50});console.log(o);let u="";function b(d){d?(u=e.email,e.email=y,v.value=!0):(e.email=u,v.value=!1)}return(d,a)=>{const R=$e,n=ke;return h(),x(oe,{class:te({"card--desktop":E(f).screen.gt.xs,"card--mobile":E(f).screen.xs})},{default:r(()=>[l(Qe,{onSubmit:p,onReset:k,class:"fit"},{default:r(()=>[c("div",null,[l(fe,{src:E(o),style:{height:"140px"},class:"shadow-4"},{default:r(()=>[Fe,Be]),_:1},8,["src"])]),l(ae,{style:{padding:"0",height:"calc(100% - 196px)"}},{default:r(()=>[l(pe,{class:"fit",style:{padding:"0 16px 0 16px"},"thumb-style":{width:"6px",borderRadius:"8px 0 0 8px"}},{default:r(()=>[c("div",Ie,[qe,c("p",{class:"text-body2"},[q(" Jegliche "),c("a",{class:"link",onClick:Q},"Unterstützung"),q(" für das Projekt ist willkommen. ")]),c("div",Ee,[l(F,{modelValue:e.subject,"onUpdate:modelValue":a[0]||(a[0]=t=>e.subject=t),dense:"","aria-label":"Betreff",outlined:"",counter:"",placeholder:"Betreff",maxlength:"60"},{prepend:r(()=>[l(S,{name:"wd-subject"})]),_:1},8,["modelValue"]),l(F,{dense:"",modelValue:e.email,"onUpdate:modelValue":a[3]||(a[3]=t=>e.email=t),outlined:"","aria-label":"E-Mail",placeholder:"name@domain.com",type:"email",maxlength:"100",rules:[t=>!!t||"E-Mail fehlt"],disable:v.value},{prepend:r(()=>[l(S,{name:"wd-at"})]),append:r(()=>[v.value?(h(),x(R,{key:0,onClick:a[1]||(a[1]=t=>b(!1)),class:"anonym_icon"})):(h(),x(n,{key:1,onClick:a[2]||(a[2]=t=>b(!0)),class:"anonym_icon"}))]),_:1},8,["modelValue","rules","disable"]),l(F,{modelValue:e.message,"onUpdate:modelValue":a[4]||(a[4]=t=>e.message=t),autogrow:"",counter:"","aria-label":"Nachricht",placeholder:"Nachricht",dense:"",outlined:"",type:"textarea",maxlength:"10000",rules:[t=>!!t||"Nachricht fehlt"]},{prepend:r(()=>[l(S,{name:"wd-text-outline"})]),_:1},8,["modelValue","rules"]),(h(!0),A(le,null,ne(s.value,(t,m)=>(h(),x(F,{key:t.id,modelValue:t.value,"onUpdate:modelValue":C=>t.value=C,dense:"",outlined:"",maxlength:"300",placeholder:t.placeholder},{prepend:r(()=>[l(S,{name:"wd-link"})]),after:r(()=>[l(S,{name:"wd-close",onClick:C=>_(m),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]))),128)),c("div",Ue,[s.value.length<4?(h(),x(B,{key:0,onClick:a[5]||(a[5]=t=>$()),class:"text-grey-8 float-right",label:"URL",flat:"",icon:"wd-add-outline"})):N("",!0)]),c("div",null,[v.value?N("",!0):(h(),x(se,{key:0,modelValue:e.get_updates,"onUpdate:modelValue":a[6]||(a[6]=t=>e.get_updates=t),"checked-icon":"wd-bell","unchecked-icon":"wd-bell-outline",color:"accent",size:"lg"},{default:r(()=>[q(" Halte mich auf dem Laufenden."),Ae,Re]),_:1},8,["modelValue"]))])])])]),_:1})]),_:1}),l(ce),l(ie,null,{default:r(()=>[l(B,{label:"Schliessen",color:"secondary-700",flat:"",onClick:a[7]||(a[7]=t=>V()),class:"q-ml-sm"}),l(B,{label:"Zurücksetzen",type:"reset",color:"secondary-700",flat:"",class:"q-ml-sm"}),l(he),l(B,{label:"Senden",flat:"",type:"submit",color:"accent"})]),_:1})]),_:1})]),_:1},8,["class"])}}}),Je=ue(Me,[["__scopeId","data-v-500778df"],["__file","WdFeedbackForm.vue"]]);export{Je as default};
