import{d as Dt,_ as Ut,o as he,c as Me,w as Ce,f as Oe,Q as xo,$ as Us,M as Mn,s as ue,h as Wr,i as Bs,k as js,r as Te,bn as zs,t as Vs,b2 as qs,bo as $s,D as Ve,F as Yr,aO as Gs,H as Oo,p as Zr,q as ao,G as Hs,ak as Js,V as Kr,bp as Xr,aA as Qr,U as qe,bq as Ws,x as ei,a as dt,e as An,P as ti,Z as ni,C as oi,aD as ri,X as Ys,g as Zs,Y as Ks,O as En,br as Xs,bs as Qs,aC as ea,z as ta,bt as na,u as oa,al as ra}from"./index-DFzbwAJV.js";import{u as To}from"./use-quasar-B7xqL1Lc.js";import{b as ia}from"./huts-store-CKuIjah7.js";import{useMap as Pn,MglMap as sa,MglNavigationControl as aa,MglScaleControl as ca,MglGeolocateControl as la,MglAttributionControl as ua}from"./vue-maplibre-gl.es-WMW_Tqx2.js";import{Q as da}from"./QTooltip-QXWiQFWj.js";import{Q as pa}from"./QNoSsr-SGzNIGEc.js";import{c as Rt,g as ii}from"./_commonjsHelpers-BosuxZz1.js";import"./selection-iN_AdNu3.js";import"./index-smjOwVgM.js";import"./auth-store-BxotX82t.js";import"./___vite-browser-external_commonjs-proxy-DRaEfepn.js";import"./use-hydration-CaMfla2B.js";const fa=Dt({__name:"WdOverlaySwitchItem",props:{label:{},icon:{},active:{type:Boolean},tooltip:{type:Boolean}},setup(n,{expose:o}){o();const i={};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}});function ha(n,o,i,r,a,c){return he(),Me(Mn,{"fab-mini":"",round:"",style:{padding:"0"},ripple:!1,color:i.active?"accent-200":"icon"},{default:Ce(()=>[Oe(xo,{name:i.icon,class:Us({"icon-active":i.active,"icon-inactive":!i.active})},null,8,["name","class"])]),_:1},8,["color"])}const ga=Ut(fa,[["render",ha],["__file","WdOverlaySwitchItem.vue"]]),ma=["top","right","bottom","left"],Cr={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:n=>ma.includes(n)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function ya(n,o){return{formClass:ue(()=>`q-fab--form-${n.square===!0?"square":"rounded"}`),stacked:ue(()=>n.externalLabel===!1&&["top","bottom"].includes(n.labelPosition)),labelProps:ue(()=>{if(n.externalLabel===!0){const i=n.hideLabel===null?o.value===!1:n.hideLabel;return{action:"push",data:{class:[n.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${n.labelPosition}`+(i===!0?" q-fab__label--external-hidden":"")],style:n.labelStyle}}}return{action:["left","top"].includes(n.labelPosition)?"unshift":"push",data:{class:[n.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${n.labelPosition}`+(n.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:n.labelStyle}}})}}const va=["up","right","down","left"],ba=["left","center","right"],si=Wr({name:"QFab",props:{...Cr,...Bs,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...Cr.hideLabel,default:null},direction:{type:String,default:"right",validator:n=>va.includes(n)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:n=>ba.includes(n)}},emits:js,setup(n,{slots:o}){const i=Te(null),r=Te(n.modelValue===!0),a=zs(),{proxy:{$q:c}}=Oo(),{formClass:u,labelProps:g}=ya(n,r),_=ue(()=>n.persistent!==!0),{hide:y,toggle:w}=Vs({showing:r,hideOnRouteChange:_}),E=ue(()=>({opened:r.value})),N=ue(()=>`q-fab z-fab row inline justify-center q-fab--align-${n.verticalActionsAlign} ${u.value}`+(r.value===!0?" q-fab--opened":" q-fab--closed")),P=ue(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${n.direction} q-fab__actions--${r.value===!0?"opened":"closed"}`),O=ue(()=>{const D={id:a.value,role:"menu"};return r.value!==!0&&(D["aria-hidden"]="true"),D}),b=ue(()=>`q-fab__icon-holder  q-fab__icon-holder--${r.value===!0?"opened":"closed"}`);function x(D,B){const z=o[D],W=`q-fab__${D} absolute-full`;return z===void 0?Ve(xo,{class:W,name:n[B]||c.iconSet.fab[B]}):Ve("div",{class:W},z(E.value))}function F(){const D=[];return n.hideIcon!==!0&&D.push(Ve("div",{class:b.value},[x("icon","icon"),x("active-icon","activeIcon")])),(n.label!==""||o.label!==void 0)&&D[g.value.action](Ve("div",g.value.data,o.label!==void 0?o.label(E.value):[n.label])),Gs(o.tooltip,D)}return qs($s,{showing:r,onChildClick(D){y(D),i.value!==null&&i.value.$el.focus()}}),()=>Ve("div",{class:N.value},[Ve(Mn,{ref:i,class:u.value,...n,noWrap:!0,stack:n.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":r.value===!0?"true":"false","aria-haspopup":"true","aria-controls":a.value,onClick:w},F),Ve("div",{class:P.value,...O.value},Yr(o.default))])}}),_a={position:{type:String,default:"bottom-right",validator:n=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(n)},offset:{type:Array,validator:n=>n.length===2},expand:Boolean};function wa(){const{props:n,proxy:{$q:o}}=Oo(),i=Zr(Hs,ao);if(i===ao)return console.error("QPageSticky needs to be child of QLayout"),ao;const r=ue(()=>{const E=n.position;return{top:E.indexOf("top")!==-1,right:E.indexOf("right")!==-1,bottom:E.indexOf("bottom")!==-1,left:E.indexOf("left")!==-1,vertical:E==="top"||E==="bottom",horizontal:E==="left"||E==="right"}}),a=ue(()=>i.header.offset),c=ue(()=>i.right.offset),u=ue(()=>i.footer.offset),g=ue(()=>i.left.offset),_=ue(()=>{let E=0,N=0;const P=r.value,O=o.lang.rtl===!0?-1:1;P.top===!0&&a.value!==0?N=`${a.value}px`:P.bottom===!0&&u.value!==0&&(N=`${-u.value}px`),P.left===!0&&g.value!==0?E=`${O*g.value}px`:P.right===!0&&c.value!==0&&(E=`${-O*c.value}px`);const b={transform:`translate(${E}, ${N})`};return n.offset&&(b.margin=`${n.offset[1]}px ${n.offset[0]}px`),P.vertical===!0?(g.value!==0&&(b[o.lang.rtl===!0?"right":"left"]=`${g.value}px`),c.value!==0&&(b[o.lang.rtl===!0?"left":"right"]=`${c.value}px`)):P.horizontal===!0&&(a.value!==0&&(b.top=`${a.value}px`),u.value!==0&&(b.bottom=`${u.value}px`)),b}),y=ue(()=>`q-page-sticky row flex-center fixed-${n.position} q-page-sticky--${n.expand===!0?"expand":"shrink"}`);function w(E){const N=Yr(E.default);return Ve("div",{class:y.value,style:_.value},n.expand===!0?N:[Ve("div",N)])}return{$layout:i,getStickyContent:w}}const ai=Wr({name:"QPageSticky",props:_a,setup(n,{slots:o}){const{getStickyContent:i}=wa();return()=>i(o)}}),Ea="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3c!--%20Generator:%20Adobe%20Illustrator%2019.0.0,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%206.00%20Build%200)%20--%3e%3csvg%20version='1.1'%20id='Capa_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20x='0px'%20y='0px'%20viewBox='0%200%20512%20512'%20style='enable-background:new%200%200%20512%20512;'%20xml:space='preserve'%3e%3cg%3e%3cg%3e%3cg%3e%3cpath%20d='M330.667,122.667c23.467,0,42.667-19.2,42.667-42.667s-19.2-42.667-42.667-42.667S288,56.533,288,80%20S307.2,122.667,330.667,122.667z'/%3e%3cpath%20d='M106.667,261.333C48,261.333,0,309.333,0,368s48,106.667,106.667,106.667c58.667,0,106.667-48,106.667-106.667%20S165.333,261.333,106.667,261.333z%20M106.667,442.667C65.067,442.667,32,409.6,32,368s33.067-74.667,74.667-74.667%20c41.6,0,74.667,33.067,74.667,74.667S148.267,442.667,106.667,442.667z'/%3e%3cpath%20d='M404.267,238.933v-42.667c-32,0-58.667-11.733-77.867-30.933L284.8,124.8c-6.4-7.467-17.067-12.8-28.8-12.8%20s-22.4,4.267-29.867,12.8l-58.667,58.667c-7.467,7.467-12.8,18.133-12.8,29.867s5.333,22.4,12.8,30.933l67.2,59.733v106.667%20h42.667V277.333L230.4,230.4l50.133-51.2l16,16C323.2,222.933,360.533,238.933,404.267,238.933z'/%3e%3cpath%20d='M405.333,261.333c-58.667,0-106.667,48-106.667,106.667s48,106.667,106.667,106.667C464,474.667,512,426.667,512,368%20S464,261.333,405.333,261.333z%20M405.333,442.667c-41.6,0-74.667-33.067-74.667-74.667s33.067-74.667,74.667-74.667%20C446.933,293.333,480,326.4,480,368S446.933,442.667,405.333,442.667z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/svg%3e",Sa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='black'%20d='M415%2026.08c-45.5-.55-114%20109.42-124%20148.32c-7.9%2037%2071.8%2092.2%2085.3-22.3c4.1-34.8%2055.5-120.32%2043.6-125.42v-.1c-.1%200-.3-.1-.6-.1c-1.4-.25-2.9-.39-4.3-.4m57.7%2021.96c-12.2-1.44-34.4%2093.16-55.4%20120.66c-69.9%2091.7%2025.7%20107.4%2045.6%2075.3c20.8-36%2049.1-169.82%2010.9-195.52c-.1-.1-.3-.2-.5-.3s-.4-.12-.6-.14M130.3%20202.5C84.67%20203%2026.14%20322.6%2020.16%20363.1c-4.03%2037.6%2081.04%2084.2%2082.64-31c.4-35.1%2042.7-125.5%2030.3-129.4v-.1h-.6c-.7-.1-1.4-.1-2.2-.1m57.6%2016c-12.3-.1-24.6%2096.4-42.6%20125.8c-60.06%2098.5%2036.7%20104.2%2053.1%2070.2c17-38%2031.3-174.1-9.4-195.7c-.1-.1-.3-.1-.5-.2s-.4-.1-.6-.1m116.3%2011.9c-9.1-.1-16.7%203.2-19.9%209.5c-5.3%2010.9%203.9%2026.5%2020.8%2035c16.8%208.4%2035%206.4%2040.3-4.4c5.5-10.9-3.8-26.5-20.7-34.9c-1.1-.6-2.1-1-3.1-1.4c-6-2.6-12-3.8-17.4-3.8m77.4%2031.7c-12%200-21.9%204.8-24.5%2013.1c-3.7%2011.5%208%2025.6%2026%2031.2c18%205.7%2035.5.9%2039.2-10.7c3.5-10.7-6.6-23.8-22.7-30l-3.3-1.2c-5-1.6-10.1-2.3-14.7-2.4M41.81%20417.2c-10.35.3-18.76%204.5-21.53%2011.7c-4.14%2011.4%206.63%2026%2024.32%2032.7c17.58%206.6%2035.44%202.7%2039.64-8.6c4.4-11.4-6.5-25.9-24.22-32.5c-1.16-.5-2.19-.8-3.23-1.1c-5.16-1.6-10.27-2.3-14.98-2.2m82.39%2023.6c-14.2-.1-25.85%206-27.85%2015.7c-2.51%2011.8%2010.65%2024.6%2029.15%2028.3c18.5%203.8%2035.4-2.8%2037.9-14.7c2.4-11-9-23-25.7-27.5c-1.1-.2-2.2-.5-3.4-.8c-3.4-.7-6.9-1-10.1-1'%20/%3e%3c/svg%3e",xa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%20512%20512'%3e%3cpath%20fill='currentColor'%20d='m139.3%2020.25l-16.1%204.5c9.4%2033.5%2022.3%2051.1%2037%2060.3c14.9%209.4%2032.1%2010.2%2050.9%208.5c25-2.3%2053.2-9.6%2082%201.1c7.8%203.5%2016%207.95%2024.7%2013.85c4.6-1.4%208.6-3.2%2012.6-4.5c0%200%203.2-10.25-2-23.35c-4.5-11.5-15.7-26-44-36.2l-5.6%2015.6c17.4%206.4%2026.8%2014.3%2031.6%2021.8c.7%201.1%201.2%202.1%201.7%203.1c-3.8-2-7.7-3.8-11.5-5.2c-28.1-13-50.6-13.8-68.6-15.8c-9.6-1-17.7-2.2-24.4-7c-6.7-4.9-11.7-13.4-16-28.2l-16%204.7c5.7%2019.6%2013.3%2030.4%2022.2%2036.9c4%202.9%208.3%205%2012.9%206.5c-15.8.85-30.7.67-41.7-5.9c-12.2-7.7-21.9-22.9-29.7-50.7m89.5%203.6c-.9%2011.2%201.1%2020.3%204.4%2027.7c7.7.96%2014.4%201.1%2021.4%202.3c-5.4-6-10.2-15.2-9.2-28.8zm120.3%2013.5l-10.9%2012.5c8.2%207.2%2010.5%2015.8%2010.5%2023.1c-4.4-3.92-8.4-6.53-13.1-8.9c7.2%208.42%208.2%2023.36%208.7%2031.4l15.5%201.7s17.6-35.2-10.7-59.8m-80.7%2069.35c-17.5%202-26.8-2.6-32.4%2013.8c0%200%2018.8%2027.9%2068.9%2027.2c-2.8%2011.4-1.5%2019.8-1.5%2029.9c0%2033.6-27%2062.9-86.5%2062.9c-30.2%200-66.9%205.4-94.9%2020.5c-19.9%2010.7-35.47%2026.2-42.36%2047.7l7.81%2010.9l14.95.2v61.7l-18.24%2028.3l5.24%2082h17.3l1.5-66c8.6-5%2028.3-18%2045.1-38c22.8-26.9%2040.3-66%2019.7-114.4l15.4-6.5c16.9%2039.7%2011%2074.1-3.8%20101.8c28.3-.9%2052.6-2.7%2073.2-6.1l-4.7-56.3l16.6-1.4l15.8%20186.9h17.2l2.9-121.7c13.7-5.8%2044.9-27.1%2059.5-101.1c1.8-9%202.8-16.6%203.3-23.1c2.3-16.5%203.6-35.1%204-56.3l-24.5-7.7h75.3l7.3-16.5c-7.1.3-15.6-3.4-15.6-3.4l1.7-8h15.8l-85.5-44.3c-9.5%203.6-19.5%208.3-26.5%2014c-5.6-4-25-16.5-52-17m95.5%20226.6c-9.7%2018.1-20.1%2031.6-29.1%2041.2l47.1%2020.8l-20.9%2047.5l15%207l33.4-64.8l-44.3-37.4c-.4-2.3-.9-6.8-1.2-14.3m-153.8%2050.8c-11.3.7-23.3%201.2-36.1%201.4c-8.7%2011.5-18.7%2022.6-29.1%2031.2l8.7%2075h17.1v-65c7.3-6%2024.9-21.3%2039.4-42.6'/%3e%3c/svg%3e",Oa="/assets/deer2-MSks7fup.svg",Ta="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2056%2056'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M43.882%2022.666c1.508-.66%202.652-1.778%203.725-2.9c1.223-1.279%201.239-2.882%201.239-3.721c0-1.334-1.253-2.386-3.29-2.435c-1.079-.026-1.738.243-2.637.898c-.644.468-2.153%202-1.48%203.253c.035.065.092.144.173.237a.519.519%200%200%201%20.008.668a.47.47%200%200%201-.651.073l-.106-.082c-1.33-1.016-2.054-1.394-2.054-2.899c0-2.832%203.737-5.553%207.346-5.466c3.605.087%206.412%202.69%206.412%205.725c0%201.66-1.058%204.015-2.788%205.825a11.509%2011.509%200%200%201-3.921%202.684c.094.155.191.322.29.503c.98%201.786.852%202.003.977%204.234c.124%202.232-.536%206.222-.283%208.188c.254%201.965%201.523%202.184%201.802%203.6c.177.897.616%204.791%201.317%2011.68a1.001%201.001%200%200%201-.996%201.104h-2.057a.998.998%200%200%201-.998-.998v-.497c0-.315.148-.612.4-.8l.318-.239a1%201%200%200%200%20.383-.986c-.547-2.912-1.028-4.665-1.442-5.259c-.306-.44-1.688-1.157-3.47-2.547c-.319-.25-.893-.78-1.72-1.592a.5.5%200%200%200-.848.296c-.15%201.203-.338%202.217-.561%203.042c-.27.994-1.1%203.587-2.489%207.777a1%201%200%200%201-.95.686h-2.618a.895.895%200%200%201-.894-.894v-.06a1%201%200%200%201%20.821-.985l1.123-.206c.806-2.944%201.157-5.1%201.055-6.469c-.072-.968-.726-2.094-1.385-4.054c-.137-.408-.33-1.24-.578-2.5a.5.5%200%200%200-.617-.387l-6.663%201.726a.5.5%200%200%200-.316.72l.157.296c.3.562.456%201.19.456%201.827v9.36c0%20.311-.145.605-.392.795l-1.397%201.07a1.001%201.001%200%200%201-.61.207H22.67a1.001%201.001%200%200%201-1-1.001v-.51c0-.363.195-.698.512-.875l.72-.402a1%201%200%200%200%20.51-.958c-.114-1.351-.254-2.379-.422-3.083c-.172-.726-.59-2.022-1.253-3.886a.5.5%200%200%200-.799-.21l-.195.168c-.489.423-1.086.7-1.724.803l-6.252%201a.5.5%200%200%200-.291.83l.665.732c.168.184.26.424.26.673v.654a1.001%201.001%200%200%201-1.03%201l-.82-.024a1.001%201.001%200%200%201-.767-.394L9.75%2046.327a1.001%201.001%200%200%201-.205-.607v-1.988c0-.347.18-.67.475-.852c4.271-2.64%206.587-4.099%206.948-4.38c.374-.29.53-.775.468-1.454c-.696-2.067-1.811-2.799-2.312-4.023c-.5-1.223-1.43-5.03-1.89-6.492c-.925-2.94-1.737-4.495-1.956-4.96c-.492-1.044-1.36-1.192-2.277-1.552c-.917-.361-2.66-.306-3.794-1.301c-1.133-.996-1.029-2.036-1.293-3.168v-1.385c0-.553.449-1.001%201.002-1.001h2.716c.367%200%20.704-.2.88-.523c.31-.569.805-1.113%201.486-1.631a8.629%208.629%200%200%201%203.039-1.469c-.25-3.114-.25-4.873%200-5.277c.25-.404.945.228%202.087%201.896c.163-1.964.481-2.684.955-2.16c.442.49%201.205%202.27%202.288%205.34c.142.4.347.778.607%201.115c.455.588.865%201.292%201.232%202.11c.697%201.556%201.511%205.62%202.952%207.619c1.44%201.999%202.281%202.163%204.361%202.533c1.382.246%206.147-.54%2010.05-.692c3.006-.118%205.424.388%205.86.5c.157.041.307.086.453.14'/%3e%3c/svg%3e",Ca="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2056%2056'%3e%3cpath%20fill='currentColor'%20fill-rule='evenodd'%20d='M43.882%2022.666c1.508-.66%202.652-1.778%203.725-2.9c1.223-1.279%201.239-2.882%201.239-3.721c0-1.334-1.253-2.386-3.29-2.435c-1.079-.026-1.738.243-2.637.898c-.644.468-2.153%202-1.48%203.253c.035.065.092.144.173.237a.519.519%200%200%201%20.008.668a.47.47%200%200%201-.651.073l-.106-.082c-1.33-1.016-2.054-1.394-2.054-2.899c0-2.832%203.737-5.553%207.346-5.466c3.605.087%206.412%202.69%206.412%205.725c0%201.66-1.058%204.015-2.788%205.825a11.509%2011.509%200%200%201-3.921%202.684c.094.155.191.322.29.503c.98%201.786.852%202.003.977%204.234c.124%202.232-.536%206.222-.283%208.188c.254%201.965%201.523%202.184%201.802%203.6c.177.897.616%204.791%201.317%2011.68a1.001%201.001%200%200%201-.996%201.104h-2.057a.998.998%200%200%201-.998-.998v-.497c0-.315.148-.612.4-.8l.318-.239a1%201%200%200%200%20.383-.986c-.547-2.912-1.028-4.665-1.442-5.259c-.306-.44-1.688-1.157-3.47-2.547c-.319-.25-.893-.78-1.72-1.592a.5.5%200%200%200-.848.296c-.15%201.203-.338%202.217-.561%203.042c-.27.994-1.1%203.587-2.489%207.777a1%201%200%200%201-.95.686h-2.618a.895.895%200%200%201-.894-.894v-.06a1%201%200%200%201%20.821-.985l1.123-.206c.806-2.944%201.157-5.1%201.055-6.469c-.072-.968-.726-2.094-1.385-4.054c-.137-.408-.33-1.24-.578-2.5a.5.5%200%200%200-.617-.387l-6.663%201.726a.5.5%200%200%200-.316.72l.157.296c.3.562.456%201.19.456%201.827v9.36c0%20.311-.145.605-.392.795l-1.397%201.07a1.001%201.001%200%200%201-.61.207H22.67a1.001%201.001%200%200%201-1-1.001v-.51c0-.363.195-.698.512-.875l.72-.402a1%201%200%200%200%20.51-.958c-.114-1.351-.254-2.379-.422-3.083c-.172-.726-.59-2.022-1.253-3.886a.5.5%200%200%200-.799-.21l-.195.168c-.489.423-1.086.7-1.724.803l-6.252%201a.5.5%200%200%200-.291.83l.665.732c.168.184.26.424.26.673v.654a1.001%201.001%200%200%201-1.03%201l-.82-.024a1.001%201.001%200%200%201-.767-.394L9.75%2046.327a1.001%201.001%200%200%201-.205-.607v-1.988c0-.347.18-.67.475-.852c4.271-2.64%206.587-4.099%206.948-4.38c.374-.29.53-.775.468-1.454c-.696-2.067-1.811-2.799-2.312-4.023c-.5-1.223-1.43-5.03-1.89-6.492c-.925-2.94-1.737-4.495-1.956-4.96c-.492-1.044-1.36-1.192-2.277-1.552c-.917-.361-2.66-.306-3.794-1.301c-1.133-.996-1.029-2.036-1.293-3.168v-1.385c0-.553.449-1.001%201.002-1.001h2.716c.367%200%20.704-.2.88-.523c.31-.569.805-1.113%201.486-1.631a8.629%208.629%200%200%201%203.039-1.469c-.25-3.114-.25-4.873%200-5.277c.25-.404.945.228%202.087%201.896c.163-1.964.481-2.684.955-2.16c.442.49%201.205%202.27%202.288%205.34c.142.4.347.778.607%201.115c.455.588.865%201.292%201.232%202.11c.697%201.556%201.511%205.62%202.952%207.619c1.44%201.999%202.281%202.163%204.361%202.533c1.382.246%206.147-.54%2010.05-.692c3.006-.118%205.424.388%205.86.5c.157.041.307.086.453.14'/%3e%3c/svg%3e",La="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='m7%2023l3.075-15.55q.15-.725.675-1.088T11.85%206t1.063.25t.787.75l1%201.6q.45.725%201.163%201.313t1.637.862V9H19v14h-1.5V12.85q-1.2-.275-2.225-.875T13.5%2010.5l-.6%203l2.1%202V23h-2v-6l-2.1-2l-1.8%208zm.425-9.875l-2.125-.4q-.4-.075-.625-.413t-.15-.762l.75-3.925q.15-.8.85-1.263t1.5-.312l1.15.225zM13.5%205.5q-.825%200-1.412-.587T11.5%203.5t.588-1.412T13.5%201.5t1.413.588T15.5%203.5t-.587%201.413T13.5%205.5'/%3e%3c/svg%3e",Ia="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20id='Layer_1'%20enable-background='new%200%200%20479.994%20479.994'%20height='512'%20viewBox='0%200%20479.994%20479.994'%20width='512'%20version='1.1'%20sodipodi:docname='hillslope.svg'%20inkscape:version='1.3.2%20(091e20ef0f,%202023-11-25)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs8'%20/%3e%3csodipodi:namedview%20id='namedview8'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:zoom='1.1367188'%20inkscape:cx='220.37112'%20inkscape:cy='333.41579'%20inkscape:window-width='2560'%20inkscape:window-height='1375'%20inkscape:window-x='2240'%20inkscape:window-y='0'%20inkscape:window-maximized='1'%20inkscape:current-layer='Layer_1'%20/%3e%3cpath%20d='m%20451.19421,229.40195%20c%20-1.41721,-4.83386%20-6.10866,-7.27326%20-10.18435,-5.28351%20-23.15133,11.33031%20-47.584,8.98646%20-67.85008,-4.19309%20-2.88329,-1.87734%20-6.43119,-1.39395%20-8.92352,1.10167%20-15.2394,15.30645%20-39.36126,15.4627%20-52.99382,-2.63052%20-2.44346,-3.2488%20-6.54849,-3.99074%20-9.74453,-1.77616%20-27.08627,18.74635%20-63.55154,15.01642%20-85.57007,-10.85931%20-3.02012,-3.54107%20-8.02433,-3.36121%20-10.96626,0.2698%20-34.62875,42.81894%20-71.07545,84.03034%20-108.92957,123.17331%20-5.219236,5.38468%20-1.925448,15.32219%205.0824,15.32219%20h%2092.71475%20c%2010.35051,0%2010.35051,17.98643%200,17.98643%20-173.887557,0%20-144.563071,-0.0978%20-161.45424,0.23607%20C%2017.391605,363.04448%205.369769,378.10474%206.7967512,395.65275%208.057578,411.22226%2019.795974,422.90219%2033.3914,422.90219%20h%20416.27809%20c%2014.65784,0%2026.44901,-13.80458%2026.14505,-30.65561%20-0.98716,-55.8816%20-9.24607,-110.49289%20-24.62033,-162.84463%20z%20M%20238.19267,362.51276%20h%20-6.55825%20c%20-10.3505,0%20-10.3505,-17.98643%200,-17.98643%20h%206.55825%20c%2010.35051,0%2010.35051,17.98643%200,17.98643%20z'%20id='path1'%20style='stroke-width:1.0482'%20/%3e%3cpath%20d='m%20237.35115,109.59547%20c%207.25512,-7.03607%2017.25769,4.37857%2010.87927,13.06826%20-47.28589,64.70281%20-99.88485,127.54514%20-155.257625,185.45695%20-3.36025,0.45077%20-5.784164,0.77565%20-9.144414,1.22756%20-17.380839,-10.77386%20-27.942463,-30.43078%20-27.888707,-52.53948%200,-26.59855%2014.228772,-53.58943%2034.941518,-66.22378%2015.902058,-9.70142%2033.289738,-10.00494%2049.621848,-1.03421%2010.35441,-13.41675%2026.75787,-16.84317%2039.76002,-7.80162%2059.52471,-75.66778%2055.20173,-70.32469%2057.08809,-72.15368%20z'%20id='path4'%20style='stroke-width:1.0482'%20/%3e%3cpath%20d='m%20440.08818,195.32778%20c%201.61855,4.50223%20-0.16127,9.68232%20-4.03073,11.66421%20-22.82879,11.69566%20-47.42859,6.7033%20-64.76447,-10.3928%20-3.97014,-3.8963%20-10.03188,-2.31574%20-12.18799,3.06894%20-4.31028,10.73565%20-16.58624,17.00842%20-26.81946,13.68093%20-7.46722,-2.42817%20-12.90147,-9.7464%20-13.51722,-18.20002%20-0.57862,-7.93426%20-9.20893,-11.17182%20-13.7225,-5.11489%20-19.46559,26.08706%20-58.69588,27.63839%20-79.15353,1.66262%20-2.68878,-3.41405%20-2.67119,-8.61662%200.004,-12.04416%2021.49857,-27.54509%2043.73407,-57.75892%2064.99709,-88.54494%2026.44609,-38.280741%2077.57212,-36.455118%20101.76534,3.912048%2018.8606,31.469512%2034.87309,65.375042%2047.42956,100.308062%20z'%20id='path8'%20style='stroke-width:1.0482'%20/%3e%3c/svg%3e",Ma="data:image/svg+xml,%3csvg%20width='56'%20height='56'%20version='1.1'%20viewBox='0%200%2056%2056'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='m0.6249%2027.824c0%201.125%200.8906%201.8047%201.9922%201.8047%200.6797%200%201.2187-0.3281%201.6875-0.7969l22.875-20.836c0.2578-0.2578%200.5391-0.3516%200.8437-0.3516%200.2813%200%200.5391%200.0938%200.8203%200.3516l22.852%2020.836c0.492%200.4688%201.031%200.7969%201.6872%200.7969%201.1016%200%201.9925-0.6797%201.9925-1.8047%200-0.7031-0.2578-1.1484-0.7032-1.5468l-8.1096-7.3829v-13.852c0-1.0313-0.6562-1.6875-1.6872-1.6875h-3.0705c-1.0078%200-1.711%200.6562-1.711%201.6875v7.9687l-9.2812-8.4843c-0.8203-0.7735-1.8281-1.1485-2.8125-1.1485s-1.9687%200.375-2.8125%201.1485l-23.859%2021.75c-0.4218%200.3984-0.7031%200.8437-0.7031%201.5468zm6.7031%2019.664c0%203.2578%201.9688%205.1562%205.2735%205.1562h30.82c3.3048%200%205.2503-1.8984%205.2503-5.1562v-17.156l-19.898-17.93c-0.2579-0.2344-0.5391-0.3515-0.8203-0.3515-0.2579%200-0.5157%200.1171-0.7969%200.375l-19.828%2018.023z'/%3e%3c/svg%3e",Aa="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20id='Layer_1'%20enable-background='new%200%200%20512%20512'%20height='512'%20viewBox='0%200%20512%20512'%20width='512'%20version='1.1'%20sodipodi:docname='mtb.svg'%20inkscape:version='1.3.2%20(091e20ef0f,%202023-11-25)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs5'%20/%3e%3csodipodi:namedview%20id='namedview5'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20inkscape:zoom='1.1367188'%20inkscape:cx='253.80069'%20inkscape:cy='332.53608'%20inkscape:window-width='2560'%20inkscape:window-height='1375'%20inkscape:window-x='2240'%20inkscape:window-y='0'%20inkscape:window-maximized='1'%20inkscape:current-layer='Layer_1'%20/%3e%3cg%20id='Layer_2_00000007405547900734707610000009233547936779136646_'%20transform='rotate(-22.23363,186.32649,345.92562)'%3e%3cg%20id='cycling'%3e%3cg%20id='icon'%3e%3cpath%20d='m%20285,197.3%20-49,40.1%20c%2011.7,7.6%2022,14.5%2032.5,21.2%209.2,5.9%2013.5,14%2013.4,25%20-0.2,32.7%200,65.4%20-0.1,98.1%20-0.1,16.5%20-10.1,27.5%20-24.6,27.5%20-14.5,0%20-24.6,-10.9%20-24.6,-27.5%20-0.1,-24.9%20-0.5,-49.8%200.2,-74.6%200.2,-8.9%20-2.2,-14.4%20-10.1,-18.8%20-12.4,-6.9%20-24.3,-14.8%20-36.1,-22.6%20-29.8,-19.7%20-31.2,-54.7%20-3.2,-76.6%2019.6,-15.3%2039.3,-30.5%2059.1,-45.6%2019.8,-15.2%2034.9,-15%2054.9,0.4%2011.8,9.1%2024,17.8%2035.3,27.5%207,6%2014.3,8.2%2023.3,7.7%209.6,-0.5%2019.2,-0.3%2028.8,0%2014.8,0.5%2025.2,11%2025.2,24.8%200,14.7%20-9.5,24.2%20-24.9,24.4%20-17,0.3%20-34.1,0.5%20-51.2,-0.2%20-5.6,-0.4%20-10.9,-2.2%20-15.5,-5.4%20-11.3,-7.6%20-21.7,-16.3%20-33.4,-25.4%20z'%20id='path1'%20/%3e%3cpath%20d='m%20218.2,84%20c%208.8,6.9%2015.8,15.6%2018.5,24.7%201.4,4.8%20-0.9,11.3%20-4.8,14.3%20-26.2,20.5%20-53,40.3%20-79.8,60%20-6.8,5%20-13.4,3.7%20-18.7,-2.9%20-10.9,-13.5%20-22,-26.9%20-32.6,-40.7%20-6.7,-8.7%20-5.8,-13.9%203.1,-20.7%2016.6,-12.8%2033,-25.9%2050.4,-37.5%201.4,-0.9%202.9,-1.8%204.4,-2.6%2019.2,-10.1%2042.5,-8%2059.5,5.4%20z'%20id='path2'%20/%3e%3cpath%20d='m%20409.6,255.8%20c%20-56.6,0%20-102.4,45.8%20-102.4,102.4%200,56.6%2045.8,102.4%20102.4,102.4%2056.6,0%20102.4,-45.8%20102.4,-102.4%200,-56.5%20-45.8,-102.4%20-102.4,-102.4%20z%20m%200,162.1%20c%20-33,0%20-59.7,-26.7%20-59.8,-59.7%200,-33%2026.7,-59.7%2059.7,-59.7%2033,0%2059.7,26.7%2059.8,59.7%200,33%20-26.7,59.7%20-59.7,59.7%20z'%20id='path3'%20/%3e%3cpath%20d='M%20102.4,255.8%20C%2045.8,255.8%200,301.7%200,358.2%20c%200,56.5%2045.8,102.4%20102.4,102.4%2056.6,0%20102.4,-45.8%20102.4,-102.4%200,-56.5%20-45.8,-102.4%20-102.4,-102.4%20z%20m%200,162.1%20c%20-33,0%20-59.7,-26.7%20-59.8,-59.7%200,-33%2026.7,-59.7%2059.7,-59.7%2033,0%2059.7,26.7%2059.8,59.7%200,33%20-26.7,59.7%20-59.7,59.7%20z'%20id='path4'%20/%3e%3cpath%20d='m%20358.5,89.8%20c%20-0.2,20.2%20-17.4,37.5%20-37.3,37.6%20-20.2,0.1%20-37.8,-17.9%20-37.5,-38.4%200.2,-20.2%2017.4,-37.5%2037.3,-37.6%2020.1,-0.1%2037.7,17.9%2037.5,38.4%20z'%20id='path5'%20/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Pa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2016%2016'%3e%3cpath%20fill='black'%20fill-rule='evenodd'%20d='M14.98%202.5A6%206%200%200%200%2015%202V1h-1.75a6%206%200%200%200-5.761%204.32A5.99%205.99%200%200%200%202.75%203H1v1a6%206%200%200%200%206%206h.25v4.25a.75.75%200%200%200%201.5%200V8H9a6%206%200%200%200%205.98-5.5m-6.203%204a4.5%204.5%200%200%201%204.473-4h.223A4.5%204.5%200%200%201%209%206.5zm-6.027-2a4.5%204.5%200%200%201%204.473%204H7a4.5%204.5%200%200%201-4.473-4z'%20clip-rule='evenodd'%20/%3e%3c/svg%3e",Na="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%20256%20256'%3e%3cpath%20fill='currentColor'%20d='M176%2092a32%2032%200%201%200-32-32a32%2032%200%200%200%2032%2032m0-40a8%208%200%201%201-8%208a8%208%200%200%201%208-8M28.48%2080.64a12%2012%200%200%201%2014.88-8.16l67.5%2019.68l8.66-8.65a12%2012%200%200%201%2017%200L165%20112h35a12%2012%200%200%201%200%2024h-40a12%2012%200%200%201-8.48-3.51l-4.89-4.89l-110-32.07a12%2012%200%200%201-8.15-14.89m210.17%20130.93A73.77%2073.77%200%200%201%20177%20221L20.65%20175.51a12%2012%200%201%201%206.71-23l79.92%2023.27l13.81-13.81l-36.39-10.44a12%2012%200%201%201%206.6-23.07l56%2016a12%2012%200%200%201%205.19%2020l-18.93%2018.94l50.1%2014.6a49.81%2049.81%200%200%200%2041.68-6.39a12%2012%200%200%201%2013.31%2020Z'/%3e%3c/svg%3e",Ra="data:image/svg+xml,%3csvg%20width='512'%20height='512'%20enable-background='new%200%200%20512.002%20512.002'%20version='1.1'%20viewBox='0%200%20512%20512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%3e%3cpath%20d='m245.07%2029.846c-19.832%206.6603-30.791%2028.981-24.433%2049.754%200.67442%202.2004%202.2768%203.9516%204.3454%204.7492%201.5139%200.5837%203.1528%200.60864%204.6582%200.10308%200.4218-0.14166%200.8277-0.33731%201.222-0.56219%207.0607%2012.183%2021.423%2018.212%2034.935%2013.674%2015.814-5.3109%2024.553-23.108%2019.483-39.674-0.78222-2.5559-1.8858-4.9946-3.2524-7.2555%201.6179-1.2417%202.6792-3.137%202.8943-5.2444%200.23447-2.2998-0.55652-4.5829-2.145-6.1896-10.074-10.198-24.522-13.782-37.707-9.3544zm-9.4295%2085.753c-3.2878%201.0059-6.3699%202.5936-9.1222%204.6573l-74.676%2025.08c-15.814%205.3109-24.553%2023.108-19.483%2039.674l19.534%2063.826-140.72%20119.92c-3.0664%202.6145-3.5301%207.3392-1.0333%2010.551%201.9153%202.4652%205.0165%203.3239%207.7409%202.4089%200.82631-0.27751%201.6172-0.71807%202.3313-1.3265l143.53-122.32c15.081-5.8273%2024.107-22.323%2021.111-39.011l-5.9928-33.374c-0.84605-5.4903-3.0075-6.648%2013.188-12.305l18.341-6.1596-10.613%2071.975c-0.87345%205.9179-0.0633%2014.603%200.62542%2019.189l15.437%2083.374-34.861%2073.988c-1.5569%203.3047%200.61164%2010.646%203.4804%2012.778l31.204%2023.192c1.9126%201.4212%204.2597%201.7146%206.3339%201.0232l6e-3%20-2e-3%20252.7-84.867c11.553-3.88%2019.771-15.583%2025.321-26.885l2.6514-5.3987c1.8092-3.6824%200.42532-8.2042-3.0909-10.099-3.5162-1.895-7.8328-0.44525-9.6408%203.2378l-2.6513%205.3987c-3.801%207.738-10.251%2013.462-18.163%2016.119l-104.18%2034.99%2013.722-204.26c0.27813-4.1322-2.6943-7.7168-6.6387-8.0072-3.9462-0.29294-7.3684%202.823-7.6456%206.955l-0.80782%2012.03-57.768-11.478-23.761-42.587c-7.5782-13.582-21.045-22.35-36.049-23.456-3.5737-0.26316-7.0673%200.16031-10.355%201.1662zm29.659%2092.635%209.2091%2011.109c6.9312%208.3594%2016.965%2013.318%2027.532%2013.606l58.671%201.6001-10.452%20155.62-10.429%203.5026-24.876-81.281c-2.5026-8.177-6.8531-15.745-12.581-21.885l-37.761-40.475c-3.4412-4.6341-5.6953-9.6141-2.9645-22.308zm1.0356%20123.98%2030.121%2076.026-50.34%2016.906-11.216-12.057%2027.345-55.677c0.35203-0.7168%200.59044-1.4881%200.70847-2.2849zm-151.93%20137.17c-3.7652%201.2645-5.8391%205.4874-4.632%209.4317%201.2071%203.9442%207.0063%2010.398%2010.771%209.1333l65.584-22.026c3.7652-1.2645%204.0712-9.7685%202.8641-13.713-1.2071-3.9442-5.2384-6.1168-9.0036-4.8522z'%20stroke-width='.97704'/%3e%3c/g%3e%3c/svg%3e",ka="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M8.5%2023q-.45%200-1.088-.475t-1.037-.975L4%2018.5l1.175-.95l1.15%201.475L9.2%2017l1.6-8.125l-1.8.7V13H7V8.275l4.125-1.725q.8-.35%201.175-.45T13%206q.525%200%20.963.275T14.7%207l1%201.575q.65%201.025%201.763%201.725T20%2011v2q-1.65%200-3.088-.7T14.5%2010.475l-.6%203l2.1%202V21.5q.375-.025.713-.125t.637-.275q.1-.05.187-.075t.188-.025q.35%200%20.562.238t.213.512q0%20.2-.088.363t-.287.287q-.5.3-1.062.45t-1.188.15H12v-1.5h2v-4.525l-2.1-2L11%2018.2l-3.425%202.425l.075.1q.225.3.512.5t.638.325q.225.125.35.263t.125.412q0%20.325-.225.55T8.5%2023m6-17.5q-.825%200-1.413-.587T12.5%203.5t.588-1.412T14.5%201.5t1.413.588T16.5%203.5t-.587%201.413T14.5%205.5'/%3e%3c/svg%3e",Fa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='1em'%20height='1em'%20viewBox='0%200%2024%2024'%3e%3cpath%20fill='currentColor'%20d='M18%2011H6V6h12m-1.5%2011a1.5%201.5%200%200%201-1.5-1.5a1.5%201.5%200%200%201%201.5-1.5a1.5%201.5%200%200%201%201.5%201.5a1.5%201.5%200%200%201-1.5%201.5m-9%200A1.5%201.5%200%200%201%206%2015.5A1.5%201.5%200%200%201%207.5%2014A1.5%201.5%200%200%201%209%2015.5A1.5%201.5%200%200%201%207.5%2017M4%2016c0%20.88.39%201.67%201%202.22V20a1%201%200%200%200%201%201h1a1%201%200%200%200%201-1v-1h8v1a1%201%200%200%200%201%201h1a1%201%200%200%200%201-1v-1.78c.61-.55%201-1.34%201-2.22V6c0-3.5-3.58-4-8-4s-8%20.5-8%204z'/%3e%3c/svg%3e";function Et({name:n,layers:o,tiles:i,attribution:r="",tileSize:a=256,minZoom:c=0,maxZoom:u=22,suffix:g="wd-",cdn:_=!1}){o=o===void 0?[n]:typeof o=="string"?[o]:o;const y={version:8,name:n,sources:{},glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",layers:[]};for(const w of o)y.layers.push({id:`${g}${w}`,type:"raster",source:`${g}${w}`,minzoom:c,maxzoom:u}),y.sources[`${g}${w}`]={type:"raster",tiles:i.map(E=>(_?"https://res.cloudinary.com/wodore/image/fetch/f_auto/q_auto/":"")+E.replace("<NAME>",w)),tileSize:a,attribution:r};return console.debug(`Add style spec ${n}`,o,y),y}function St({name:n,layers:o,label:i,icon:r="fa-solid fa-notdef",format:a="png",active:c=!1,show:u=!0,onLayer:g="ways",tileMatrixSet:_=3857,attribution:y="",opacity:w=.7,minZoom:E=0,maxZoom:N=22,tileSize:P=256}){const O=Et({name:n,layers:o,attribution:y,tiles:[`https://wmts0.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts1.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts2.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts3.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts4.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts5.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts6.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts7.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts8.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`,`https://wmts9.geo.admin.ch/1.0.0/<NAME>/default/current/${_}/{z}/{x}/{y}.${a}`],minZoom:E,maxZoom:N,tileSize:P});return{name:O.name,label:i,show:u,active:c,onLayer:g,icon:r,opacity:w,style:O}}function Sn(n,o,i){return["case",["in","train",["get","types"]],n,["in","bus",["get","types"]],o,i]}function Da(){return["interpolate",["linear"],["zoom"],7,Sn(3,2,1),9,Sn(4,3,3),16,Sn(9,8,8)]}const Ua={"circle-color":Sn("#C60018","#2d327d","#0079C7"),"circle-stroke-color":"#F6F6F6","circle-stroke-width":["interpolate",["linear"],["zoom"],10,0,12,1,16,2],"circle-radius":Da(),"circle-opacity":["interpolate",["linear"],["zoom"],6,0,7,.3,10,.6,14,1]},Ba={version:8,sources:{"transport-stops":{type:"geojson",data:"https://raw.githubusercontent.com/wodore/bav-haltestellen/main/static/bav_list.geojson",promoteId:"id"}},layers:[{id:"transport-stops",type:"circle",source:"transport-stops",layout:{visibility:"none"},paint:Ua}]},{bookingsGeojson:xn}=Js(ia()),ja=Pn(),za=11,Va={"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],7,7,9,10,22,16],"text-font":["Open Sans Semibold"],"text-anchor":"bottom","icon-allow-overlap":!0,"text-allow-overlap":!1,"symbol-sort-key":["get","type_id"],"icon-overlap":"always","text-overlap":"never","text-optional":!0,"icon-image":["step",["zoom"],["coalesce",["image",["concat","wodore:simple/",["get","type_open_slug"]]],["image","wodore:simple/unknown"]],za,["coalesce",["image",["concat","wodore:detailed/",["get","type_open_slug"]]],["image","wodore:detailed/unknown"]]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,9,.3,20,2],visibility:"visible"},qa={"icon-opacity":["interpolate",["linear"],["zoom"],7,.7,12,.8,22,.85],"text-opacity":["step",["zoom"],0,9,1],"text-halo-width":2,"text-halo-color":"#ffffff","text-translate":["interpolate",["linear"],["zoom"],9,["literal",[0,-6]],20,["literal",[0,-40]]]},$a={"circle-blur":.7,"circle-color":["case",["boolean",["feature-state","color"],!1],["feature-state","color"],"#3366ff"],"circle-opacity":["case",["boolean",["feature-state","selected"],!1],.7,0],"circle-radius":["interpolate",["linear"],["zoom"],7,10,15,40]};function Ga(n){return["match",["get","occupancy_status",["at",n,["get","bookings"]]],"empty","#f7fd25","low","#82cf06","medium","#eab138","high","#e16f07","full","#d32226","#d4d4d4"]}const Ha={"circle-color":Ga(0),"circle-radius":["interpolate",["linear"],["zoom"],7,4,9,10,20,60],"circle-opacity":["interpolate",["linear"],["zoom"],6,.8,10,.6,11,.5,13,0]};function Ja(n){return{visibility:"visible","text-field":["case",["<",n,["length",["get","bookings"]]],["concat",["get","free",["at",n,["get","bookings"]]],`
`,["get","total",["at",n,["get","bookings"]]]],""],"text-size":["interpolate",["linear"],["zoom"],12,7,14,10],"text-font":["Open Sans Semibold"],"icon-allow-overlap":!0,"text-allow-overlap":!0,"icon-image":["coalesce",["image",["concat","wodore:occupation_",["case",["<",n,["length",["get","bookings"]]],["get","occupancy_status",["at",n,["get","bookings"]]],"unknown"]]],["image","wodore:occupation_unknown"]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,12,.3,15,.6]}}function Lr(n){return["interpolate",["linear"],["zoom"],9,["literal",[(n-1.5)*7,11+Math.abs(n-1.5)*-2]],20,["literal",[(n-1.5)*40,90+Math.abs(n-1.5)*-10]]]}function Wa(n){return{"icon-translate":Lr(n),"text-translate":Lr(n),"text-opacity":["interpolate",["linear"],["zoom"],11,0,12,.4,14,.6],"icon-opacity":["interpolate",["linear"],["zoom"],8,0,10,.8,11,1,13,1,15,.7]}}function bn(n){return{id:`wd-huts-occupation-day${n}`,type:"symbol",source:"wd-bookings",minzoom:8,layout:Ja(n),paint:Wa(n)}}const ci={version:8,sources:{"wd-huts":{type:"geojson",data:"http://127.0.0.1:8000/v1/huts/huts.geojson?lang=de&limit=5000&embed_all=false&embed_type=true&embed_owner=false&embed_capacity=false&embed_sources=false&include_elevation=false&include_name=true&flat=true",promoteId:"slug"},"wd-bookings":{type:"geojson",data:xn.value,promoteId:"hut_id"}},layers:[bn(0),bn(1),bn(2),bn(3),{id:"wd-huts-occupation",type:"circle",source:"wd-bookings",maxzoom:13,layout:{visibility:"visible"},paint:Ha},{id:"wd-huts-selected",type:"circle",source:"wd-huts",layout:{visibility:"visible"},paint:$a},{id:"wd-huts",type:"symbol",source:"wd-huts",layout:Va,paint:qa}]};Kr(()=>{console.debug("Booking geojson updated");const n=ci.sources["wd-bookings"];n.data=xn.value;const o=ja.map?.getSource("wd-bookings");o&&xn.value!==void 0&&o.setData(xn.value)});function Ge({zoomOut:n=0,zoomMain:o=.8,zoomIn:i=.3}){return["interpolate",["linear"],["zoom"],10,n,11,o*.8,15,o,18,i]}const Ya={name:"huts",label:"Huts",show:!0,active:!0,onLayer:"ways",icon:"huts",style:ci},Za={name:"transport-stops",label:"Haltestellen",onLayer:"ways",show:!0,active:!1,icon:"transport",opacity:!1,style:Ba},Ka=St({name:"ch.swisstopo-karto.skitouren",label:"Skitouren",icon:"skitouren",opacity:Ge({}),minZoom:8}),Xa=St({name:"ch.swisstopo.schneeschuhwandern",label:"Schneeschuh",icon:"snowshoeing",opacity:Ge({}),minZoom:8}),Qa=St({name:"wildruhe_und_jagdbann",layers:["ch.bafu.wrz-wildruhezonen_portal","ch.bafu.wrz-jagdbanngebiete_select"],label:"Naturschutz",icon:"deer2",onLayer:"background",opacity:Ge({zoomOut:.7,zoomMain:.5,zoomIn:.3})}),ec=St({name:"ch.bafu.alpweiden-herdenschutzhunde",label:"Hedenschutzhunde",icon:"dog",onLayer:"background",opacity:Ge({zoomOut:.7,zoomMain:.5,zoomIn:.3})}),tc=St({name:"ch.swisstopo.hangneigung-ueber_30",label:"Hangneigung",icon:"hillslopes",onLayer:"background",opacity:Ge({zoomOut:.1,zoomMain:.2,zoomIn:.4}),minZoom:10}),nc={name:"slopes",label:"Skipisten",opacity:Ge({zoomOut:.3,zoomMain:.6}),icon:"skislopes",onLayer:"ways",show:!0,style:Et({name:"slopes",tiles:["https://tile.waymarkedtrails.org/slopes/{z}/{x}/{y}.png"],minZoom:8})},oc=St({name:"ch.swisstopo.swisstlm3d-wanderwege",label:"Wanderwege",icon:"hiking",opacity:Ge({zoomOut:.4,zoomMain:.9,zoomIn:.7})}),rc={name:"cycling",label:"Fahrrad",opacity:Ge({zoomOut:.6,zoomMain:.9,zoomIn:.7}),icon:"cycling",onLayer:"ways",show:!0,style:Et({name:"cycling",tiles:["https://tile.waymarkedtrails.org/cycling/{z}/{x}/{y}.png"]})},ic={name:"mtb",label:"Mountainbike",opacity:Ge({zoomOut:.6,zoomMain:.9,zoomIn:.7}),icon:"mtb",onLayer:"ways",show:!0,style:Et({name:"mtb",tiles:["https://tile.waymarkedtrails.org/mtb/{z}/{x}/{y}.png"]})},sc=Xr("overlay",()=>{function n(a){return a.active=!a.active,qe.set("overlays",o),a.active}const o=Qr([Ya,Za,oc,ic,rc,tc,Ka,Xa,nc,Qa,ec]),r=(qe.hasItem("overlays")?qe.getItem("overlays"):[]).reduce((a,c)=>(a[c.name]=c,a),{});for(const a of o){const c=a.name;c in r&&(a.active=r[c].active,a.show=r[c].show)}return{overlays:o,toggleOverlay:n}}),ac="/assets/oe-raster-EIpPqIBW.png",cc="/assets/outdoor-v2-BR_lxvv7.png",lc="/assets/satellite-C2H1DPJ2.png",uc="/assets/select_map-BPM0HDk0.png",dc="/assets/swiss-raster-D1bEQQjo.png",pc="/assets/swiss-vector-BQsQYbTX.png",fc=Et({name:"ch-swisstopo-raster",tiles:["https://wmts0.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts1.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts2.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts3.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts4.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts5.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts6.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts7.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts8.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts9.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg"],attribution:'<a href="https://www.swisstopo.admin.ch/" target="_blank">&copy; swisstopo</a>',suffix:"",tileSize:Ws.is.mobile?128:156}),co="bmaphidpi",lo="jpeg",hc=Et({name:"oe-raster",tiles:["https://maps1.wien.gv.at/basemap/"+co+"/normal/google3857/{z}/{y}/{x}."+lo,"https://maps2.wien.gv.at/basemap/"+co+"/normal/google3857/{z}/{y}/{x}."+lo,"https://maps3.wien.gv.at/basemap/"+co+"/normal/google3857/{z}/{y}/{x}."+lo],attribution:"basemap.at",tileSize:512});function wt(n){return new URL(Object.assign({"/src/assets/wodore-design/map/switch/oe-raster.png":ac,"/src/assets/wodore-design/map/switch/outdoor-v2.png":cc,"/src/assets/wodore-design/map/switch/satellite.png":lc,"/src/assets/wodore-design/map/switch/select_map.png":uc,"/src/assets/wodore-design/map/switch/swiss-raster.png":dc,"/src/assets/wodore-design/map/switch/swiss-vector.png":pc})[`/src/assets/wodore-design/map/switch/${n}`],import.meta.url).href}const Co=Xr("basemap",()=>{const n=Pn();function o(){for(const c of r)if(c.active)return c}function i(c,u=!1){const g=o();if(g!==void 0&&c.name==g.name&&!u)return console.debug("Active baselayer is already set."),!1;n.map?.setStyle(c.style,{diff:!0});for(const _ of r)_.name==c.name?_.active=!0:_.active=!1;return qe.set("basemapStyle",c),console.debug("Map layer is set to ",c.label),!0}const r=Qr([{name:"ch-swisstopo-raster",label:"Schweiz Topo Raster",show:!0,active:!0,img:wt("swiss-raster.png"),style:fc,layers:{ways:{before:void 0},background:{before:void 0}}},{name:"CH swisstopo LBM Vivid",label:"Schweiz Topo Vector",show:!0,img:wt("swiss-vector.png"),style:"https://api.maptiler.com/maps/ch-swisstopo-lbm-vivid/style.json?key=yYYuZy3hwmMjY087FDvY",layers:{ways:{before:"Other place labels"},background:{before:"Building line"}}},{name:"Satellite Hybrid",label:"Satellite",show:!0,img:wt("satellite.png"),style:"https://api.maptiler.com/maps/hybrid/style.json?key=cQX2iET1gmOW38bedbUh",layers:{ways:{before:"Tunnel"},background:{before:"State labels"}}},{name:"outdoor-osm",label:"Outdoor OSM",show:!1,img:wt("outdoor-v2.png"),style:"https://api.maptiler.com/maps/outdoor-v2/style.json?key=yYYuZy3hwmMjY087FDvY",layers:{background:{before:"Contour index"},ways:{before:"Park"}}},{name:"oe-vector",label:"Östereich Topo Vector",active:!0,show:!1,img:wt("swiss-vector.png"),style:"styles/basemapv-bmapv-3857-resources-styles-root.json",layers:{ways:{before:void 0},background:{before:void 0}}},{name:"oe-raster",label:"Östereich Topo Raster",show:!1,img:wt("oe-raster.png"),style:hc,layers:{ways:{before:void 0},background:{before:void 0}}}]),a=qe.hasItem("basemapStyle")?qe.getItem("basemapStyle"):r[0];return i(a),{basemaps:r,setBasemap:i,getBasemap:o}}),gc=Dt({__name:"WdOverlaySwitch",props:{position:{default:"top-left"},direction:{default:"right"},offset:{default:void 0}},setup(n,{expose:o}){o();const i=sc(),r=Co(),a=Pn(),c=To(),u=Te(qe.hasItem("switcherOpen")?qe.getItem("switcherOpen"):!0);ei(u,O=>{qe.set("switcherOpen",O)});function g(O){return console.debug("toogle",O),i.toggleOverlay(O),_(O),!0}function _(O){if(a.map===void 0)return!1;for(const b of O.style.layers)a.map.getLayer(b.id)&&(b.layout||(b.layout={visibility:"none"}),b.layout&&(O.active?b.layout.visibility="visible":b.layout.visibility="none",a.map.setLayoutProperty(b.id,"visibility",b.layout?.visibility)));return!0}function y({layer:O,onLayer:b=void 0,defaultOpacity:x=void 0}){const F=r.getBasemap(),D=b!==void 0?F?.layers[b]?.opacity:void 0;let B=!1;if((x===void 0||x==!0)&&(B=!0,x=["interpolate",["linear"],["zoom"],8,.9,14,.6,22,.5]),a.map?.getLayer(O.id)===void 0){let z=x!=!1?x:void 0,W;b&&(W=F?.layers[b]?.before),D!==void 0&&(z=D);const ce="source"in O?O.source:void 0;ce&&a.map?.getSource(ce)||ce===void 0?(console.debug(`Add layer '${O.id}' (before layer '${W}')`),a.map?.addLayer(O,W),O.paint!==void 0&&`${O.type}-opacity`in O.paint&&(x=!1),x==!1?z=void 0:B==!1&&(z=x),z!==void 0&&(console.debug(`  Set paint '${O.type}-opacity' property for layer '${O.id}' to ${z}`),a.map?.setPaintProperty(O.id,`${O.type}-opacity`,z))):console.error(`Source '${ce}' not added, tried to add layer '${O.id}'.`)}}function w(){const O=i.overlays.slice().filter(F=>F.onLayer=="background"),x=i.overlays.slice().filter(F=>F.onLayer=="ways").concat(O).reverse();for(const F of x){for(const D in F.style.sources)if(a.map?.getSource(D)===void 0){const B=F.style.sources[D];console.debug(`Add ${B.type} source '${D}'`),a.map?.addSource(D,B)}_(F);for(const D of F.style.layers)console.debug("Add layer",D),y({layer:D,defaultOpacity:F.opacity,onLayer:F.onLayer})}}a.map?.on("styledata",w),a.map?.on("load",w);const E="img:"+new URL("data:image/svg+xml,%3csvg%20clip-rule='evenodd'%20fill-rule='evenodd'%20height='512'%20stroke-linejoin='round'%20stroke-miterlimit='2'%20viewBox='0%200%2048%2048'%20width='512'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20transform='translate(0%20-576)'%3e%3cg%20id='FLAT-LINE'%20transform='scale(1.5)'%3e%3cg%20transform='matrix(.754%200%200%20.754%20-2.053%20-49.493)'%3e%3cpath%20d='m12.683%20600h22.508l6.719%203.073c.359.164.59.527.59.927s-.231.763-.59.927c-4.418%202.021-14.734%206.739-17.358%207.939-.391.179-.839.179-1.231%200-2.623-1.2-12.939-5.918-17.358-7.939-.359-.164-.589-.527-.589-.927s.23-.763.589-.927z'%20fill='%23f9a824'/%3e%3c/g%3e%3cg%20transform='matrix(.754%200%200%20.754%20-2.053%20-49.493)'%3e%3cpath%20d='m35.191%20592%206.719%203.073c.359.164.59.527.59.927s-.231.763-.59.927c-4.418%202.021-14.734%206.739-17.358%207.939-.391.179-.839.179-1.231%200-2.623-1.2-12.939-5.918-17.358-7.939-.359-.164-.589-.527-.589-.927s.23-.763.589-.927l6.72-3.073z'%20fill='%23f44336'/%3e%3c/g%3e%3cg%20transform='matrix(.827%200%200%20.986%20-4.456%20-193.901)'%3e%3cpath%20d='m24.188%20589.715c.358-.137.766-.137%201.124%200%202.394.919%2011.807%204.529%2015.839%206.076.327.125.538.403.538.709s-.211.584-.538.709c-4.032%201.547-13.445%205.157-15.839%206.076-.358.137-.766.137-1.124%200-2.394-.919-11.807-4.529-15.839-6.076-.327-.125-.538-.403-.538-.709s.211-.584.538-.709c4.032-1.547%2013.445-5.157%2015.839-6.076z'%20fill='%238bc349'/%3e%3c/g%3e%3cg%20transform='matrix(.667%200%200%20.667%20-4.123%20388)'%3e%3ccircle%20cx='14'%20cy='30'%20r='1'/%3e%3c/g%3e%3cg%20transform='scale(.667)'%3e%3cpath%20d='m8.864%20595.475-5.613%202.567c-.759.347-1.251%201.112-1.251%201.958s.492%201.611%201.251%201.958l5.613%202.567-5.613%202.567c-.759.347-1.251%201.112-1.251%201.958s.492%201.611%201.251%201.958l1.333.61c.502.229%201.096.008%201.325-.494.23-.502.009-1.095-.493-1.325l-1.333-.61c-.053-.024-.083-.08-.083-.139s.03-.115.083-.139l7.185-3.286%2011.62%205.314c.707.323%201.517.323%202.224%200%201.452-.664%203.687-1.686%207.504-3.432.502-.23.723-.824.494-1.325-.23-.502-.824-.723-1.325-.494-3.818%201.746-6.053%202.768-7.505%203.432-.178.082-.382.082-.56%200%200%200-19.637-8.981-19.637-8.981-.053-.024-.083-.08-.083-.139s.03-.115.083-.139l7.185-3.286%2011.62%205.314c.707.323%201.517.323%202.224%200l11.62-5.314%207.185%203.286c.053.024.083.08.083.139s-.03.115-.083.139c0%200-9.333%204.269-9.333%204.269-.502.229-.723.823-.493%201.325.229.502.823.723%201.325.493l1.316-.601%207.185%203.286c.053.024.083.08.083.139s-.03.115-.083.139c0%200-19.637%208.981-19.637%208.981-.178.082-.382.082-.56%200-2.209-1.01-12.804-5.856-12.804-5.856-.502-.229-1.096-.008-1.325.494-.23.502-.009%201.096.493%201.325%200%200%2010.595%204.846%2012.804%205.856.707.324%201.517.324%202.224%200%202.968-1.357%2014.638-6.695%2019.637-8.981.759-.347%201.251-1.112%201.251-1.958s-.492-1.611-1.251-1.958l-5.613-2.567%205.613-2.567c.759-.347%201.251-1.112%201.251-1.958s-.492-1.611-1.251-1.958l-5.613-2.567%205.613-2.567c.759-.347%201.251-1.112%201.251-1.958s-.492-1.611-1.251-1.958l-19.637-8.981c-.707-.324-1.517-.324-2.224%200-.333.152-1.304.596-1.304.596-.502.23-.723.824-.493%201.325.229.502.823.723%201.325.494%200%200%20.971-.444%201.304-.596.178-.082.382-.082.56%200%200%200%2019.637%208.981%2019.637%208.981.053.024.083.08.083.139s-.03.115-.083.139c0%200-19.637%208.981-19.637%208.981-.178.082-.382.082-.56%200%200%200-19.637-8.981-19.637-8.981-.053-.024-.083-.08-.083-.139s.03-.115.083-.139c0%200%2015.563-7.118%2015.563-7.118.502-.23.723-.824.494-1.326-.23-.502-.823-.723-1.325-.493-4.21%201.925-12.303%205.627-15.564%207.118-.759.347-1.251%201.112-1.251%201.958s.492%201.611%201.251%201.958z'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",import.meta.url).href;function N(O){return"img:"+new URL(Object.assign({"/src/assets/wodore-design/overlays/exports/cycling.svg":Ea,"/src/assets/wodore-design/overlays/exports/deer-track.svg":Sa,"/src/assets/wodore-design/overlays/exports/deer.svg":xa,"/src/assets/wodore-design/overlays/exports/deer2.svg":Oa,"/src/assets/wodore-design/overlays/exports/dog (copy).svg":Ta,"/src/assets/wodore-design/overlays/exports/dog.svg":Ca,"/src/assets/wodore-design/overlays/exports/hiking.svg":La,"/src/assets/wodore-design/overlays/exports/hillslopes.svg":Ia,"/src/assets/wodore-design/overlays/exports/huts.svg":Ma,"/src/assets/wodore-design/overlays/exports/mtb.svg":Aa,"/src/assets/wodore-design/overlays/exports/nature.svg":Pa,"/src/assets/wodore-design/overlays/exports/skislopes.svg":Na,"/src/assets/wodore-design/overlays/exports/skitouren.svg":Ra,"/src/assets/wodore-design/overlays/exports/snowshoeing.svg":ka,"/src/assets/wodore-design/overlays/exports/transport.svg":Fa})[`/src/assets/wodore-design/overlays/exports/${O}.svg`],import.meta.url).href}const P={overlayStore:i,basemapStore:r,mapRef:a,$q:c,switcherOpen:u,toggleOverlay:g,setOverlayVisibility:_,addOverlayLayer:y,addOverlays:w,switchIcon:E,overlayIcon:N};return Object.defineProperty(P,"__isScriptSetup",{enumerable:!1,value:!0}),P}}),mc={class:"overlay-scroll"};function yc(n,o,i,r,a,c){const u=ga;return he(),Me(ai,{position:i.position,offset:i.offset,style:{"z-index":"5"}},{default:Ce(()=>[Oe(si,{ref:"fabStyleRef",push:"","vertical-actions-align":"center",icon:r.switchIcon,padding:"sm",direction:i.direction,persistent:"",color:r.switcherOpen?"negative-400":"icon",modelValue:r.switcherOpen,"onUpdate:modelValue":o[0]||(o[0]=g=>r.switcherOpen=g)},{default:Ce(()=>[dt("div",mc,[(he(!0),An(ti,null,ni(r.overlayStore.overlays,(g,_)=>oi((he(),Me(u,{tabindex:_,onClick:y=>r.toggleOverlay(g),key:g.name,label:g.label,icon:r.overlayIcon(g.icon),active:g.active,tooltip:r.$q.platform.is.desktop},null,8,["tabindex","onClick","label","icon","active","tooltip"])),[[ri,g.show]])),128))])]),_:1},8,["direction","color","modelValue"])]),_:1},8,["position","offset"])}const vc=Ut(gc,[["render",yc],["__file","WdOverlaySwitch.vue"]]),bc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _c(n,o){return he(),An("svg",bc,o[0]||(o[0]=[dt("path",{fill:"currentColor",d:"M17 8h-7V6a2 2 0 0 1 4 0a1 1 0 0 0 2 0a4 4 0 0 0-8 0v2H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m1 11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"},null,-1),dt("path",{fill:"currentColor",d:"M12 12a3 3 0 1 0 3 3a3 3 0 0 0-3-3m0 4a1 1 0 1 1 1-1a1 1 0 0 1-1 1"},null,-1)]))}const wc={name:"eva-unlock-outline",render:_c},Ec={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Sc(n,o){return he(),An("svg",Ec,o[0]||(o[0]=[dt("circle",{cx:"12",cy:"15",r:"1",fill:"currentColor"},null,-1),dt("path",{fill:"currentColor",d:"M17 8h-1V6.11a4 4 0 1 0-8 0V8H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m-7-1.89A2.06 2.06 0 0 1 12 4a2.06 2.06 0 0 1 2 2.11V8h-4ZM12 18a3 3 0 1 1 3-3a3 3 0 0 1-3 3"},null,-1)]))}const xc={name:"eva-lock-fill",render:Sc},Oc=Dt({__name:"WdBasemapSwitchItem",props:{label:{},img:{},active:{type:Boolean},tooltip:{type:Boolean}},setup(n,{expose:o}){o();const i={};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}}),Tc=["src"];function Cc(n,o,i,r,a,c){return he(),Me(Mn,{round:"",style:{padding:"0"},ripple:!1,color:i.active?"accent-500":"primary-400"},{default:Ce(()=>[Oe(Ys,{size:"55px"},{default:Ce(()=>[dt("img",{style:{padding:"3px"},src:i.img},null,8,Tc)]),_:1}),i.tooltip?(he(),Me(da,{key:0},{default:Ce(()=>[Zs(Ks(i.label),1)]),_:1})):En("",!0)]),_:1},8,["color"])}const Lc=Ut(Oc,[["render",Cc],["__file","WdBasemapSwitchItem.vue"]]),Ic=Dt({__name:"WdBasemapSwitch",props:{position:{default:"top-left"},direction:{default:"right"},offset:{default:void 0}},setup(n,{expose:o}){o();const i=Co(),r=To(),a=Te(!1),c=Te(!1);function u(w){const E=i.setBasemap(w);return!c.value&&E?(a.value=!1,!0):E}function g(){c.value=!c.value}const _="img:"+new URL("/assets/basemap-switch-Dvj_H7Y5.svg",import.meta.url).href,y={basemapStore:i,$q:r,switcherOpen:a,switcherLocked:c,setBasemap:u,toggleSwitcherLocked:g,switchIcon:_};return Object.defineProperty(y,"__isScriptSetup",{enumerable:!1,value:!0}),y}});function Mc(n,o,i,r,a,c){const u=Lc,g=xc,_=wc;return he(),Me(ai,{position:i.position,offset:i.offset,style:{"z-index":"5"}},{default:Ce(()=>[Oe(si,{ref:"fabStyleRef",push:"","vertical-actions-align":"left",icon:r.switchIcon,padding:"sm",direction:i.direction,persistent:"",color:r.switcherOpen?"negative-400":"icon",modelValue:r.switcherOpen,"onUpdate:modelValue":o[0]||(o[0]=y=>r.switcherOpen=y)},{default:Ce(()=>[(he(!0),An(ti,null,ni(r.basemapStore.basemaps,(y,w)=>oi((he(),Me(u,{tabindex:w,onClick:E=>r.setBasemap(y),key:y.name,label:y.label,img:y.img,active:y.active,tooltip:r.$q.platform.is.desktop},null,8,["tabindex","onClick","label","img","active","tooltip"])),[[ri,y.show]])),128)),r.$q.screen.gt.xs?(he(),Me(Mn,{key:0,round:"",flat:"",style:{padding:"0"},ripple:!1,color:r.switcherLocked?"accent-500":"secondary-800",onClick:r.toggleSwitcherLocked},{default:Ce(()=>[Oe(xo,null,{default:Ce(()=>[r.switcherLocked?(he(),Me(g,{key:0})):En("",!0),r.switcherLocked?En("",!0):(he(),Me(_,{key:1}))]),_:1})]),_:1},8,["color"])):En("",!0)]),_:1},8,["direction","color","modelValue"])]),_:1},8,["position","offset"])}const Ac=Ut(Ic,[["render",Mc],["__file","WdBasemapSwitch.vue"]]);function Pc(n){return Xs()?(Qs(n),!0):!1}function mo(n){return typeof n=="function"?n():ea(n)}const Nc=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ir=()=>{};function Rc(n,o){function i(...r){return new Promise((a,c)=>{Promise.resolve(n(()=>o.apply(this,r),{fn:o,thisArg:this,args:r})).then(a).catch(c)})}return i}function kc(n,o={}){let i,r,a=Ir;const c=g=>{clearTimeout(g),a(),a=Ir};return g=>{const _=mo(n),y=mo(o.maxWait);return i&&c(i),_<=0||y!==void 0&&y<=0?(r&&(c(r),r=null),Promise.resolve(g())):new Promise((w,E)=>{a=o.rejectOnCancel?E:w,y&&!r&&(r=setTimeout(()=>{i&&c(i),r=null,w(g())},y)),i=setTimeout(()=>{r&&c(r),r=null,w(g())},_)})}}function Fc(n,o=200,i={}){return Rc(kc(o,i),n)}function Mr(n){var o;const i=mo(n);return(o=i?.$el)!=null?o:i}const Dc=Nc?window:void 0;function Uc(){const n=Te(!1),o=Oo();return o&&ta(()=>{n.value=!0},o),n}function Bc(n){const o=Uc();return ue(()=>(o.value,!!n()))}function jc(n,o,i={}){const{window:r=Dc,...a}=i;let c;const u=Bc(()=>r&&"ResizeObserver"in r),g=()=>{c&&(c.disconnect(),c=void 0)},_=ue(()=>Array.isArray(n)?n.map(E=>Mr(E)):[Mr(n)]),y=ei(_,E=>{if(g(),u.value&&r){c=new ResizeObserver(o);for(const N of E)N&&c.observe(N,a)}},{immediate:!0,flush:"post"}),w=()=>{g(),y()};return Pc(w),{isSupported:u,stop:w}}var li={exports:{}};(function(n,o){(function(i,r){n.exports=r()})(Rt,function(){var i=function(e,t){var s={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},l={on:function(p,f,T){if(s[p]===void 0)throw new Error("Invalid event type: "+p);s[p].push({selector:f,fn:T})},render:function(p){t.store.featureChanged(p)}},d=function(p,f){for(var T=s[p],C=T.length;C--;){var M=T[C];if(M.selector(f)){M.fn.call(l,f)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(l),{render:e.render,stop:function(){e.stop&&e.stop()},trash:function(){e.trash&&(e.trash(),t.store.render())},combineFeatures:function(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures:function(){e.uncombineFeatures&&e.uncombineFeatures()},drag:function(p){d("drag",p)},click:function(p){d("click",p)},mousemove:function(p){d("mousemove",p)},mousedown:function(p){d("mousedown",p)},mouseup:function(p){d("mouseup",p)},mouseout:function(p){d("mouseout",p)},keydown:function(p){d("keydown",p)},keyup:function(p){d("keyup",p)},touchstart:function(p){d("touchstart",p)},touchmove:function(p){d("touchmove",p)},touchend:function(p){d("touchend",p)},tap:function(p){d("tap",p)}}};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function l(){if(this instanceof l){var d=[null];d.push.apply(d,arguments);var p=Function.bind.apply(t,d);return new p}return t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(l){var d=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(s,l,d.get?d:{enumerable:!0,get:function(){return e[l]}})}),s}var c={},u={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},g=u;function _(e){var t=0;if(e&&e.length>0){t+=Math.abs(y(e[0]));for(var s=1;s<e.length;s++)t-=Math.abs(y(e[s]))}return t}function y(e){var t,s,l,d,p,f,T=0,C=e.length;if(C>2){for(f=0;f<C;f++)f===C-2?(l=C-2,d=C-1,p=0):f===C-1?(l=C-1,d=0,p=1):(l=f,d=f+1,p=f+2),t=e[l],s=e[d],T+=(w(e[p][0])-w(t[0]))*Math.sin(w(s[1]));T=T*g.RADIUS*g.RADIUS/2}return T}function w(e){return e*Math.PI/180}c.geometry=function e(t){var s,l=0;switch(t.type){case"Polygon":return _(t.coordinates);case"MultiPolygon":for(s=0;s<t.coordinates.length;s++)l+=_(t.coordinates[s]);return l;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(s=0;s<t.geometries.length;s++)l+=e(t.geometries[s]);return l}},c.ring=y;var E={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},N={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},P={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},O={POLYGON:"polygon",LINE:"line_string",POINT:"point"},b={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},x={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},F={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},D={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},B={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},z={ACTIVE:"true",INACTIVE:"false"},W=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],ce=-85,be=Object.freeze({__proto__:null,classes:E,sources:N,cursors:P,types:O,geojsonTypes:b,modes:x,events:F,updateActions:D,meta:B,activeStates:z,interactions:W,LAT_MIN:-90,LAT_RENDERED_MIN:ce,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),G={Point:0,LineString:1,MultiLineString:1,Polygon:2};function _e(e,t){var s=G[e.geometry.type]-G[t.geometry.type];return s===0&&e.geometry.type===b.POLYGON?e.area-t.area:s}function Pe(e){return e.map(function(t){return t.geometry.type===b.POLYGON&&(t.area=c.geometry({type:b.FEATURE,property:{},geometry:t.geometry})),t}).sort(_e).map(function(t){return delete t.area,t})}function zt(e,t){return t===void 0&&(t=0),[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function we(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(var t=0,s=e.length;t<s;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}we.prototype.add=function(e){return this.has(e)||(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length),this},we.prototype.delete=function(e){return this.has(e)===!1||(this._length--,delete this._items[e],delete this._nums[e]),this},we.prototype.has=function(e){return(typeof e=="string"||typeof e=="number")&&(this._items[e]!==void 0||this._nums[e]!==void 0)},we.prototype.values=function(){var e=this,t=[];return Object.keys(this._items).forEach(function(s){t.push({k:s,v:e._items[s]})}),Object.keys(this._nums).forEach(function(s){t.push({k:JSON.parse(s),v:e._nums[s]})}),t.sort(function(s,l){return s.v-l.v}).map(function(s){return s.k})},we.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Fi=[B.FEATURE,B.MIDPOINT,B.VERTEX],ft={click:function(e,t,s){return No(e,t,s,s.options.clickBuffer)},touch:function(e,t,s){return No(e,t,s,s.options.touchBuffer)}};function No(e,t,s,l){if(s.map===null)return[];var d=e?zt(e,l):t,p={};s.options.styles&&(p.layers=s.options.styles.map(function(M){return M.id}).filter(function(M){return s.map.getLayer(M)!=null}));var f=s.map.queryRenderedFeatures(d,p).filter(function(M){return Fi.indexOf(M.properties.meta)!==-1}),T=new we,C=[];return f.forEach(function(M){var A=M.properties.id;T.has(A)||(T.add(A),C.push(M))}),Pe(C)}function Vt(e,t){var s=ft.click(e,null,t),l={mouse:P.NONE};return s[0]&&(l.mouse=s[0].properties.active===z.ACTIVE?P.MOVE:P.POINTER,l.feature=s[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(l.mouse=P.ADD),t.ui.queueMapClasses(l),t.ui.updateMapClasses(),s[0]}function Un(e,t){var s=e.x-t.x,l=e.y-t.y;return Math.sqrt(s*s+l*l)}function Bn(e,t,s){s===void 0&&(s={});var l=s.fineTolerance!=null?s.fineTolerance:4,d=s.grossTolerance!=null?s.grossTolerance:12,p=s.interval!=null?s.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;var f=Un(e.point,t.point);return f<l||f<d&&t.time-e.time<p}function jn(e,t,s){s===void 0&&(s={});var l=s.tolerance!=null?s.tolerance:25,d=s.interval!=null?s.interval:250;return e.point=e.point||t.point,e.time=e.time||t.time,Un(e.point,t.point)<l&&t.time-e.time<d}var Ro={exports:{}},zn=Ro.exports=function(e,t){if(t||(t=16),e===void 0&&(e=128),e<=0)return"0";for(var s=Math.log(Math.pow(2,e))/Math.log(t),l=2;s===1/0;l*=2)s=Math.log(Math.pow(2,e/l))/Math.log(t)*l;var d=s-Math.floor(s),p="";for(l=0;l<Math.floor(s);l++)p=Math.floor(Math.random()*t).toString(t)+p;if(d){var f=Math.pow(t,d);p=Math.floor(Math.random()*f).toString(t)+p}var T=parseInt(p,t);return T!==1/0&&T>=Math.pow(2,e)?zn(e,t):p};zn.rack=function(e,t,s){var l=function(p){var f=0;do{if(f++>10){if(!s)throw new Error("too many ID collisions, use more bits");e+=s}var T=zn(e,t)}while(Object.hasOwnProperty.call(d,T));return d[T]=p,T},d=l.hats={};return l.get=function(p){return l.hats[p]},l.set=function(p,f){return l.hats[p]=f,l},l.bits=e||128,l.base=t||16,l};var Vn=r(Ro.exports),de=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||Vn(),this.type=t.geometry.type};de.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},de.prototype.incomingCoords=function(e){this.setCoordinates(e)},de.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},de.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},de.prototype.setProperty=function(e,t){this.properties[e]=t},de.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:b.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},de.prototype.internal=function(e){var t={id:this.id,meta:B.FEATURE,"meta:type":this.type,active:z.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(var s in this.properties)t["user_"+s]=this.properties[s];return{type:b.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Qe=function(e,t){de.call(this,e,t)};(Qe.prototype=Object.create(de.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Qe.prototype.updateCoordinate=function(e,t,s){this.coordinates=arguments.length===3?[t,s]:[e,t],this.changed()},Qe.prototype.getCoordinate=function(){return this.getCoordinates()};var Fe=function(e,t){de.call(this,e,t)};(Fe.prototype=Object.create(de.prototype)).isValid=function(){return this.coordinates.length>1},Fe.prototype.addCoordinate=function(e,t,s){this.changed();var l=parseInt(e,10);this.coordinates.splice(l,0,[t,s])},Fe.prototype.getCoordinate=function(e){var t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},Fe.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},Fe.prototype.updateCoordinate=function(e,t,s){var l=parseInt(e,10);this.coordinates[l]=[t,s],this.changed()};var Ee=function(e,t){de.call(this,e,t),this.coordinates=this.coordinates.map(function(s){return s.slice(0,-1)})};(Ee.prototype=Object.create(de.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(e){return e.length>2})},Ee.prototype.incomingCoords=function(e){this.coordinates=e.map(function(t){return t.slice(0,-1)}),this.changed()},Ee.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},Ee.prototype.addCoordinate=function(e,t,s){this.changed();var l=e.split(".").map(function(d){return parseInt(d,10)});this.coordinates[l[0]].splice(l[1],0,[t,s])},Ee.prototype.removeCoordinate=function(e){this.changed();var t=e.split(".").map(function(l){return parseInt(l,10)}),s=this.coordinates[t[0]];s&&(s.splice(t[1],1),s.length<3&&this.coordinates.splice(t[0],1))},Ee.prototype.getCoordinate=function(e){var t=e.split(".").map(function(l){return parseInt(l,10)}),s=this.coordinates[t[0]];return JSON.parse(JSON.stringify(s[t[1]]))},Ee.prototype.getCoordinates=function(){return this.coordinates.map(function(e){return e.concat([e[0]])})},Ee.prototype.updateCoordinate=function(e,t,s){this.changed();var l=e.split("."),d=parseInt(l[0],10),p=parseInt(l[1],10);this.coordinates[d]===void 0&&(this.coordinates[d]=[]),this.coordinates[d][p]=[t,s]};var Di={MultiPoint:Qe,MultiLineString:Fe,MultiPolygon:Ee},qt=function(e,t,s,l,d){var p=s.split("."),f=parseInt(p[0],10),T=p[1]?p.slice(1).join("."):null;return e[f][t](T,l,d)},ge=function(e,t){if(de.call(this,e,t),delete this.coordinates,this.model=Di[t.geometry.type],this.model===void 0)throw new TypeError(t.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function q(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(ge.prototype=Object.create(de.prototype))._coordinatesToFeatures=function(e){var t=this,s=this.model.bind(this);return e.map(function(l){return new s(t.ctx,{id:Vn(),type:b.FEATURE,properties:{},geometry:{coordinates:l,type:t.type.replace("Multi","")}})})},ge.prototype.isValid=function(){return this.features.every(function(e){return e.isValid()})},ge.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},ge.prototype.getCoordinate=function(e){return qt(this.features,"getCoordinate",e)},ge.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(e){return e.type===b.POLYGON?e.getCoordinates():e.coordinates})))},ge.prototype.updateCoordinate=function(e,t,s){qt(this.features,"updateCoordinate",e,t,s),this.changed()},ge.prototype.addCoordinate=function(e,t,s){qt(this.features,"addCoordinate",e,t,s),this.changed()},ge.prototype.removeCoordinate=function(e){qt(this.features,"removeCoordinate",e),this.changed()},ge.prototype.getFeatures=function(){return this.features},q.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},q.prototype.setSelectedCoordinates=function(e){var t=this;this._ctx.store.setSelectedCoordinates(e),e.reduce(function(s,l){return s[l.feature_id]===void 0&&(s[l.feature_id]=!0,t._ctx.store.get(l.feature_id).changed()),s},{})},q.prototype.getSelected=function(){return this._ctx.store.getSelected()},q.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},q.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},q.prototype.getFeature=function(e){return this._ctx.store.get(e)},q.prototype.select=function(e){return this._ctx.store.select(e)},q.prototype.deselect=function(e){return this._ctx.store.deselect(e)},q.prototype.deleteFeature=function(e,t){return t===void 0&&(t={}),this._ctx.store.delete(e,t)},q.prototype.addFeature=function(e){return this._ctx.store.add(e)},q.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},q.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},q.prototype.setActionableState=function(e){e===void 0&&(e={});var t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},q.prototype.changeMode=function(e,t,s){return t===void 0&&(t={}),s===void 0&&(s={}),this._ctx.events.changeMode(e,t,s)},q.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},q.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},q.prototype.featuresAt=function(e,t,s){if(s===void 0&&(s="click"),s!=="click"&&s!=="touch")throw new Error("invalid buffer type");return ft[s](e,t,this._ctx)},q.prototype.newFeature=function(e){var t=e.geometry.type;return t===b.POINT?new Qe(this._ctx,e):t===b.LINE_STRING?new Fe(this._ctx,e):t===b.POLYGON?new Ee(this._ctx,e):new ge(this._ctx,e)},q.prototype.isInstanceOf=function(e,t){if(e===b.POINT)return t instanceof Qe;if(e===b.LINE_STRING)return t instanceof Fe;if(e===b.POLYGON)return t instanceof Ee;if(e==="MultiFeature")return t instanceof ge;throw new Error("Unknown feature class: "+e)},q.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},q.prototype.onSetup=function(){},q.prototype.onDrag=function(){},q.prototype.onClick=function(){},q.prototype.onMouseMove=function(){},q.prototype.onMouseDown=function(){},q.prototype.onMouseUp=function(){},q.prototype.onMouseOut=function(){},q.prototype.onKeyUp=function(){},q.prototype.onKeyDown=function(){},q.prototype.onTouchStart=function(){},q.prototype.onTouchMove=function(){},q.prototype.onTouchEnd=function(){},q.prototype.onTap=function(){},q.prototype.onStop=function(){},q.prototype.onTrash=function(){},q.prototype.onCombineFeature=function(){},q.prototype.onUncombineFeature=function(){},q.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var ko={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Ui=Object.keys(ko);function Bi(e){var t=Object.keys(e);return function(s,l){l===void 0&&(l={});var d={},p=t.reduce(function(f,T){return f[T]=e[T],f},new q(s));return{start:function(){var f=this;d=p.onSetup(l),Ui.forEach(function(T){var C,M=ko[T],A=function(){return!1};e[M]&&(A=function(){return!0}),f.on(T,A,(C=M,function(L){return p[C](d,L)}))})},stop:function(){p.onStop(d)},trash:function(){p.onTrash(d)},combineFeatures:function(){p.onCombineFeatures(d)},uncombineFeatures:function(){p.onUncombineFeatures(d)},render:function(f,T){p.toDisplayFeatures(d,f,T)}}}}function Tt(e){return[].concat(e).filter(function(t){return t!==void 0})}function ji(){var e=this;if(!(e.ctx.map&&e.ctx.map.getSource(N.HOT)!==void 0))return C();var t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});var s=[],l=[];e.isDirty?l=e.getAllIds():(s=e.getChangedIds().filter(function(M){return e.get(M)!==void 0}),l=e.sources.hot.filter(function(M){return M.properties.id&&s.indexOf(M.properties.id)===-1&&e.get(M.properties.id)!==void 0}).map(function(M){return M.properties.id})),e.sources.hot=[];var d=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(function(M){var A=M.properties.id||M.properties.parent;return s.indexOf(A)===-1});var p=d!==e.sources.cold.length||l.length>0;function f(M,A){var L=e.get(M).internal(t);e.ctx.events.currentModeRender(L,function(U){e.sources[A].push(U)})}if(s.forEach(function(M){return f(M,"hot")}),l.forEach(function(M){return f(M,"cold")}),p&&e.ctx.map.getSource(N.COLD).setData({type:b.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(N.HOT).setData({type:b.FEATURE_COLLECTION,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire(F.SELECTION_CHANGE,{features:e.getSelected().map(function(M){return M.toGeoJSON()}),points:e.getSelectedCoordinates().map(function(M){return{type:b.FEATURE,properties:{},geometry:{type:b.POINT,coordinates:M.coordinates}}})}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){var T=e._deletedFeaturesToEmit.map(function(M){return M.toGeoJSON()});e._deletedFeaturesToEmit=[],e.ctx.map.fire(F.DELETE,{features:T})}function C(){e.isDirty=!1,e.clearChangedIds()}C(),e.ctx.map.fire(F.RENDER,{})}function Z(e){var t,s=this;this._features={},this._featureIds=new we,this._selectedFeatureIds=new we,this._selectedCoordinates=[],this._changedFeatureIds=new we,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=function(){t||(t=requestAnimationFrame(function(){t=null,ji.call(s)}))},this.isDirty=!1}function Fo(e,t){var s=e._selectedCoordinates.filter(function(l){return e._selectedFeatureIds.has(l.feature_id)});e._selectedCoordinates.length===s.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=s}Z.prototype.createRenderBatch=function(){var e=this,t=this.render,s=0;return this.render=function(){s++},function(){e.render=t,s>0&&e.render()}},Z.prototype.setDirty=function(){return this.isDirty=!0,this},Z.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},Z.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Z.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Z.prototype.getAllIds=function(){return this._featureIds.values()},Z.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},Z.prototype.delete=function(e,t){var s=this;return t===void 0&&(t={}),Tt(e).forEach(function(l){s._featureIds.has(l)&&(s._featureIds.delete(l),s._selectedFeatureIds.delete(l),t.silent||s._deletedFeaturesToEmit.indexOf(s._features[l])===-1&&s._deletedFeaturesToEmit.push(s._features[l]),delete s._features[l],s.isDirty=!0)}),Fo(this,t),this},Z.prototype.get=function(e){return this._features[e]},Z.prototype.getAll=function(){var e=this;return Object.keys(this._features).map(function(t){return e._features[t]})},Z.prototype.select=function(e,t){var s=this;return t===void 0&&(t={}),Tt(e).forEach(function(l){s._selectedFeatureIds.has(l)||(s._selectedFeatureIds.add(l),s._changedFeatureIds.add(l),t.silent||(s._emitSelectionChange=!0))}),this},Z.prototype.deselect=function(e,t){var s=this;return t===void 0&&(t={}),Tt(e).forEach(function(l){s._selectedFeatureIds.has(l)&&(s._selectedFeatureIds.delete(l),s._changedFeatureIds.add(l),t.silent||(s._emitSelectionChange=!0))}),Fo(this,t),this},Z.prototype.clearSelected=function(e){return e===void 0&&(e={}),this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},Z.prototype.setSelected=function(e,t){var s=this;return t===void 0&&(t={}),e=Tt(e),this.deselect(this._selectedFeatureIds.values().filter(function(l){return e.indexOf(l)===-1}),{silent:t.silent}),this.select(e.filter(function(l){return!s._selectedFeatureIds.has(l)}),{silent:t.silent}),this},Z.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},Z.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Z.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Z.prototype.getSelected=function(){var e=this;return this._selectedFeatureIds.values().map(function(t){return e.get(t)})},Z.prototype.getSelectedCoordinates=function(){var e=this;return this._selectedCoordinates.map(function(t){return{coordinates:e.get(t.feature_id).getCoordinate(t.coord_path)}})},Z.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},Z.prototype.setFeatureProperty=function(e,t,s){this.get(e).setProperty(t,s),this.featureChanged(e)},Z.prototype.storeMapConfig=function(){var e=this;W.forEach(function(t){e.ctx.map[t]&&(e._mapInitialConfig[t]=e.ctx.map[t].isEnabled())})},Z.prototype.restoreMapConfig=function(){var e=this;Object.keys(this._mapInitialConfig).forEach(function(t){e._mapInitialConfig[t]?e.ctx.map[t].enable():e.ctx.map[t].disable()})},Z.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]===void 0||this._mapInitialConfig[e]};var zi=function(){for(var e=arguments,t={},s=0;s<arguments.length;s++){var l=e[s];for(var d in l)Vi.call(l,d)&&(t[d]=l[d])}return t},Vi=Object.prototype.hasOwnProperty,He=r(zi),qi=["mode","feature","mouse"];function $i(e){var t=null,s=null,l={onRemove:function(){return e.map.off("load",l.connect),clearInterval(s),l.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect:function(){e.map.off("load",l.connect),clearInterval(s),l.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd:function(d){var p=d.fire;return d.fire=function(f,T){var C=arguments;return p.length===1&&arguments.length!==1&&(C=[He({},{type:f},T)]),p.apply(d,C)},e.map=d,e.events=function(f){var T=Object.keys(f.options.modes).reduce(function(S,R){return S[R]=Bi(f.options.modes[R]),S},{}),C={},M={},A={},L=null,U=null;A.drag=function(S,R){R({point:S.point,time:new Date().getTime()})?(f.ui.queueMapClasses({mouse:P.DRAG}),U.drag(S)):S.originalEvent.stopPropagation()},A.mousedrag=function(S){A.drag(S,function(R){return!Bn(C,R)})},A.touchdrag=function(S){A.drag(S,function(R){return!jn(M,R)})},A.mousemove=function(S){if((S.originalEvent.buttons!==void 0?S.originalEvent.buttons:S.originalEvent.which)===1)return A.mousedrag(S);var R=Vt(S,f);S.featureTarget=R,U.mousemove(S)},A.mousedown=function(S){C={time:new Date().getTime(),point:S.point};var R=Vt(S,f);S.featureTarget=R,U.mousedown(S)},A.mouseup=function(S){var R=Vt(S,f);S.featureTarget=R,Bn(C,{point:S.point,time:new Date().getTime()})?U.click(S):U.mouseup(S)},A.mouseout=function(S){U.mouseout(S)},A.touchstart=function(S){if(f.options.touchEnabled){M={time:new Date().getTime(),point:S.point};var R=ft.touch(S,null,f)[0];S.featureTarget=R,U.touchstart(S)}},A.touchmove=function(S){if(f.options.touchEnabled)return U.touchmove(S),A.touchdrag(S)},A.touchend=function(S){if(S.originalEvent.preventDefault(),f.options.touchEnabled){var R=ft.touch(S,null,f)[0];S.featureTarget=R,jn(M,{time:new Date().getTime(),point:S.point})?U.tap(S):U.touchend(S)}};var Q=function(S){return!(S===8||S===46||S>=48&&S<=57)};function j(S,R,H){H===void 0&&(H={}),U.stop();var le=T[S];if(le===void 0)throw new Error(S+" is not valid");L=S;var ne=le(f,R);U=i(ne,f),H.silent||f.map.fire(F.MODE_CHANGE,{mode:S}),f.store.setDirty(),f.store.render()}A.keydown=function(S){(S.srcElement||S.target).classList.contains("mapboxgl-canvas")&&(S.keyCode!==8&&S.keyCode!==46||!f.options.controls.trash?Q(S.keyCode)?U.keydown(S):S.keyCode===49&&f.options.controls.point?j(x.DRAW_POINT):S.keyCode===50&&f.options.controls.line_string?j(x.DRAW_LINE_STRING):S.keyCode===51&&f.options.controls.polygon&&j(x.DRAW_POLYGON):(S.preventDefault(),U.trash()))},A.keyup=function(S){Q(S.keyCode)&&U.keyup(S)},A.zoomend=function(){f.store.changeZoom()},A.data=function(S){if(S.dataType==="style"){var R=f.setup,H=f.map,le=f.options,ne=f.store;le.styles.some(function(Zn){return H.getLayer(Zn.id)})||(R.addLayers(),ne.setDirty(),ne.render())}};var te={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){L=f.options.defaultMode,U=i(T[L](f),f)},changeMode:j,actionable:function(S){var R=!1;Object.keys(S).forEach(function(H){if(te[H]===void 0)throw new Error("Invalid action type");te[H]!==S[H]&&(R=!0),te[H]=S[H]}),R&&f.map.fire(F.ACTIONABLE,{actions:te})},currentModeName:function(){return L},currentModeRender:function(S,R){return U.render(S,R)},fire:function(S,R){A[S]&&A[S](R)},addEventListeners:function(){f.map.on("mousemove",A.mousemove),f.map.on("mousedown",A.mousedown),f.map.on("mouseup",A.mouseup),f.map.on("data",A.data),f.map.on("touchmove",A.touchmove),f.map.on("touchstart",A.touchstart),f.map.on("touchend",A.touchend),f.container.addEventListener("mouseout",A.mouseout),f.options.keybindings&&(f.container.addEventListener("keydown",A.keydown),f.container.addEventListener("keyup",A.keyup))},removeEventListeners:function(){f.map.off("mousemove",A.mousemove),f.map.off("mousedown",A.mousedown),f.map.off("mouseup",A.mouseup),f.map.off("data",A.data),f.map.off("touchmove",A.touchmove),f.map.off("touchstart",A.touchstart),f.map.off("touchend",A.touchend),f.container.removeEventListener("mouseout",A.mouseout),f.options.keybindings&&(f.container.removeEventListener("keydown",A.keydown),f.container.removeEventListener("keyup",A.keyup))},trash:function(S){U.trash(S)},combineFeatures:function(){U.combineFeatures()},uncombineFeatures:function(){U.uncombineFeatures()},getMode:function(){return L}}}(e),e.ui=function(f){var T={},C=null,M={mode:null,feature:null,mouse:null},A={mode:null,feature:null,mouse:null};function L(S){A=He(A,S)}function U(){var S,R;if(f.container){var H=[],le=[];qi.forEach(function(ne){A[ne]!==M[ne]&&(H.push(ne+"-"+M[ne]),A[ne]!==null&&le.push(ne+"-"+A[ne]))}),H.length>0&&(S=f.container.classList).remove.apply(S,H),le.length>0&&(R=f.container.classList).add.apply(R,le),M=He(M,A)}}function Q(S,R){R===void 0&&(R={});var H=document.createElement("button");return H.className=E.CONTROL_BUTTON+" "+R.className,H.setAttribute("title",R.title),R.container.appendChild(H),H.addEventListener("click",function(le){if(le.preventDefault(),le.stopPropagation(),le.target===C)return j(),void R.onDeactivate();te(S),R.onActivate()},!0),H}function j(){C&&(C.classList.remove(E.ACTIVE_BUTTON),C=null)}function te(S){j();var R=T[S];R&&R&&S!=="trash"&&(R.classList.add(E.ACTIVE_BUTTON),C=R)}return{setActiveButton:te,queueMapClasses:L,updateMapClasses:U,clearMapClasses:function(){L({mode:null,feature:null,mouse:null}),U()},addButtons:function(){var S=f.options.controls,R=document.createElement("div");return R.className=E.CONTROL_GROUP+" "+E.CONTROL_BASE,S&&(S[O.LINE]&&(T[O.LINE]=Q(O.LINE,{container:R,className:E.CONTROL_BUTTON_LINE,title:"LineString tool "+(f.options.keybindings?"(l)":""),onActivate:function(){return f.events.changeMode(x.DRAW_LINE_STRING)},onDeactivate:function(){return f.events.trash()}})),S[O.POLYGON]&&(T[O.POLYGON]=Q(O.POLYGON,{container:R,className:E.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(f.options.keybindings?"(p)":""),onActivate:function(){return f.events.changeMode(x.DRAW_POLYGON)},onDeactivate:function(){return f.events.trash()}})),S[O.POINT]&&(T[O.POINT]=Q(O.POINT,{container:R,className:E.CONTROL_BUTTON_POINT,title:"Marker tool "+(f.options.keybindings?"(m)":""),onActivate:function(){return f.events.changeMode(x.DRAW_POINT)},onDeactivate:function(){return f.events.trash()}})),S.trash&&(T.trash=Q("trash",{container:R,className:E.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){f.events.trash()}})),S.combine_features&&(T.combine_features=Q("combineFeatures",{container:R,className:E.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){f.events.combineFeatures()}})),S.uncombine_features&&(T.uncombine_features=Q("uncombineFeatures",{container:R,className:E.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){f.events.uncombineFeatures()}}))),R},removeButtons:function(){Object.keys(T).forEach(function(S){var R=T[S];R.parentNode&&R.parentNode.removeChild(R),delete T[S]})}}}(e),e.container=d.getContainer(),e.store=new Z(e),t=e.ui.addButtons(),e.options.boxSelect&&(e.boxZoomInitial=d.boxZoom.isEnabled(),d.boxZoom.disable(),d.dragPan.disable(),d.dragPan.enable()),d.loaded()?l.connect():(d.on("load",l.connect),s=setInterval(function(){d.loaded()&&l.connect()},16)),e.events.start(),t},addLayers:function(){e.map.addSource(N.COLD,{data:{type:b.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(N.HOT,{data:{type:b.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(function(d){e.map.addLayer(d)}),e.store.setDirty(!0),e.store.render()},removeLayers:function(){e.options.styles.forEach(function(d){e.map.getLayer(d.id)&&e.map.removeLayer(d.id)}),e.map.getSource(N.COLD)&&e.map.removeSource(N.COLD),e.map.getSource(N.HOT)&&e.map.removeSource(N.HOT)}};return e.setup=l,l}var Do=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function $t(e){return function(t){var s=t.featureTarget;return!!s&&!!s.properties&&s.properties.meta===e}}function Uo(e){return!!e.originalEvent&&!!e.originalEvent.shiftKey&&e.originalEvent.button===0}function et(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===z.ACTIVE&&e.featureTarget.properties.meta===B.FEATURE}function qn(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===z.INACTIVE&&e.featureTarget.properties.meta===B.FEATURE}function Gt(e){return e.featureTarget===void 0}function $n(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.meta===B.FEATURE}function Ct(e){var t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===B.VERTEX}function Ht(e){return!!e.originalEvent&&e.originalEvent.shiftKey===!0}function Jt(e){return e.keyCode===27}function Wt(e){return e.keyCode===13}var Gi=Object.freeze({__proto__:null,isOfMetaType:$t,isShiftMousedown:Uo,isActiveFeature:et,isInactiveFeature:qn,noTarget:Gt,isFeature:$n,isVertex:Ct,isShiftDown:Ht,isEscapeKey:Jt,isEnterKey:Wt,isTrue:function(){return!0}}),Hi=ht;function ht(e,t){this.x=e,this.y=t}ht.prototype={clone:function(){return new ht(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,s=e.y-this.y;return t*t+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,s=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=s,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),s=Math.sin(e),l=t*this.x-s*this.y,d=s*this.x+t*this.y;return this.x=l,this.y=d,this},_rotateAround:function(e,t){var s=Math.cos(e),l=Math.sin(e),d=t.x+s*(this.x-t.x)-l*(this.y-t.y),p=t.y+l*(this.x-t.x)+s*(this.y-t.y);return this.x=d,this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ht.convert=function(e){return e instanceof ht?e:Array.isArray(e)?new ht(e[0],e[1]):e};var Ji=r(Hi);function Gn(e,t){var s=t.getBoundingClientRect();return new Ji(e.clientX-s.left-(t.clientLeft||0),e.clientY-s.top-(t.clientTop||0))}function gt(e,t,s,l){return{type:b.FEATURE,properties:{meta:B.VERTEX,parent:e,coord_path:s,active:l?z.ACTIVE:z.INACTIVE},geometry:{type:b.POINT,coordinates:t}}}function Bo(e,t,s){var l=t.geometry.coordinates,d=s.geometry.coordinates;if(l[1]>85||l[1]<ce||d[1]>85||d[1]<ce)return null;var p={lng:(l[0]+d[0])/2,lat:(l[1]+d[1])/2};return{type:b.FEATURE,properties:{meta:B.MIDPOINT,parent:e,lng:p.lng,lat:p.lat,coord_path:s.properties.coord_path},geometry:{type:b.POINT,coordinates:[p.lng,p.lat]}}}function Yt(e,t,s){t===void 0&&(t={}),s===void 0&&(s=null);var l,d=e.geometry,p=d.type,f=d.coordinates,T=e.properties&&e.properties.id,C=[];function M(L,U){var Q="",j=null;L.forEach(function(te,S){var R=U!=null?U+"."+S:String(S),H=gt(T,te,R,A(R));if(t.midpoints&&j){var le=Bo(T,j,H);le&&C.push(le)}j=H;var ne=JSON.stringify(te);Q!==ne&&C.push(H),S===0&&(Q=ne)})}function A(L){return!!t.selectedPaths&&t.selectedPaths.indexOf(L)!==-1}return p===b.POINT?C.push(gt(T,f,s,A(s))):p===b.POLYGON?f.forEach(function(L,U){M(L,s!==null?s+"."+U:String(U))}):p===b.LINE_STRING?M(f,s):p.indexOf(b.MULTI_PREFIX)===0&&(l=p.replace(b.MULTI_PREFIX,""),f.forEach(function(L,U){var Q={type:b.FEATURE,properties:e.properties,geometry:{type:l,coordinates:L}};C=C.concat(Yt(Q,t,U))})),C}var Le={enable:function(e){setTimeout(function(){e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable:function(e){setTimeout(function(){e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()},0)}},Zt={exports:{}},jo=function(e){if(!e||!e.type)return null;var t=Wi[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e},Wi={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Yi=r(jo),Zi=Object.freeze({__proto__:null,default:function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce(function(s,l){return s.concat(e(l))},[]),t;case"Feature":return t.geometry?e(t.geometry).map(function(s){var l={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:s};return t.id!==void 0&&(l.id=t.id),l}):[t];case"MultiPoint":return t.coordinates.map(function(s){return{type:"Point",coordinates:s}});case"MultiPolygon":return t.coordinates.map(function(s){return{type:"Polygon",coordinates:s}});case"MultiLineString":return t.coordinates.map(function(s){return{type:"LineString",coordinates:s}});case"GeometryCollection":return t.geometries.map(e).reduce(function(s,l){return s.concat(l)},[]);case"Point":case"Polygon":case"LineString":return[t]}}}),Ki=jo,Kt=a(Zi),Xi=function(e){return function t(s){return Array.isArray(s)&&s.length&&typeof s[0]=="number"?[s]:s.reduce(function(l,d){return Array.isArray(d)&&Array.isArray(d[0])?l.concat(t(d)):(l.push(d),l)},[])}(e)};Kt instanceof Function||(Kt=Kt.default);var zo={exports:{}},Qi=zo.exports=function(e){return new Se(e)};function Se(e){this.value=e}function Vo(e,t,s){var l=[],d=[],p=!0;return function f(T){var C=s?qo(T):T,M={},A=!0,L={node:C,node_:T,path:[].concat(l),parent:d[d.length-1],parents:d,key:l.slice(-1)[0],isRoot:l.length===0,level:l.length,circular:null,update:function(j,te){L.isRoot||(L.parent.node[L.key]=j),L.node=j,te&&(A=!1)},delete:function(j){delete L.parent.node[L.key],j&&(A=!1)},remove:function(j){$o(L.parent.node)?L.parent.node.splice(L.key,1):delete L.parent.node[L.key],j&&(A=!1)},keys:null,before:function(j){M.before=j},after:function(j){M.after=j},pre:function(j){M.pre=j},post:function(j){M.post=j},stop:function(){p=!1},block:function(){A=!1}};if(!p)return L;function U(){if(typeof L.node=="object"&&L.node!==null){L.keys&&L.node_===L.node||(L.keys=Xt(L.node)),L.isLeaf=L.keys.length==0;for(var j=0;j<d.length;j++)if(d[j].node_===T){L.circular=d[j];break}}else L.isLeaf=!0,L.keys=null;L.notLeaf=!L.isLeaf,L.notRoot=!L.isRoot}U();var Q=t.call(L,L.node);return Q!==void 0&&L.update&&L.update(Q),M.before&&M.before.call(L,L.node),A&&(typeof L.node!="object"||L.node===null||L.circular||(d.push(L),U(),Qt(L.keys,function(j,te){l.push(j),M.pre&&M.pre.call(L,L.node[j],j);var S=f(L.node[j]);s&&en.call(L.node,j)&&(L.node[j]=S.node),S.isLast=te==L.keys.length-1,S.isFirst=te==0,M.post&&M.post.call(L,S),l.pop()}),d.pop()),M.after&&M.after.call(L,L.node)),L}(e).node}function qo(e){if(typeof e=="object"&&e!==null){var t;if($o(e))t=[];else if(mt(e)==="[object Date]")t=new Date(e.getTime?e.getTime():e);else if(function(d){return mt(d)==="[object RegExp]"}(e))t=new RegExp(e);else if(function(d){return mt(d)==="[object Error]"}(e))t={message:e.message};else if(function(d){return mt(d)==="[object Boolean]"}(e))t=new Boolean(e);else if(function(d){return mt(d)==="[object Number]"}(e))t=new Number(e);else if(function(d){return mt(d)==="[object String]"}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var s=e.constructor&&e.constructor.prototype||e.__proto__||{},l=function(){};l.prototype=s,t=new l}return Qt(Xt(e),function(d){t[d]=e[d]}),t}return e}Se.prototype.get=function(e){for(var t=this.value,s=0;s<e.length;s++){var l=e[s];if(!t||!en.call(t,l)){t=void 0;break}t=t[l]}return t},Se.prototype.has=function(e){for(var t=this.value,s=0;s<e.length;s++){var l=e[s];if(!t||!en.call(t,l))return!1;t=t[l]}return!0},Se.prototype.set=function(e,t){for(var s=this.value,l=0;l<e.length-1;l++){var d=e[l];en.call(s,d)||(s[d]={}),s=s[d]}return s[e[l]]=t,t},Se.prototype.map=function(e){return Vo(this.value,e,!0)},Se.prototype.forEach=function(e){return this.value=Vo(this.value,e,!1),this.value},Se.prototype.reduce=function(e,t){var s=arguments.length===1,l=s?this.value:t;return this.forEach(function(d){this.isRoot&&s||(l=e.call(this,l,d))}),l},Se.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},Se.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},Se.prototype.clone=function(){var e=[],t=[];return function s(l){for(var d=0;d<e.length;d++)if(e[d]===l)return t[d];if(typeof l=="object"&&l!==null){var p=qo(l);return e.push(l),t.push(p),Qt(Xt(l),function(f){p[f]=s(l[f])}),e.pop(),t.pop(),p}return l}(this.value)};var Xt=Object.keys||function(e){var t=[];for(var s in e)t.push(s);return t};function mt(e){return Object.prototype.toString.call(e)}var $o=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},Qt=function(e,t){if(e.forEach)return e.forEach(t);for(var s=0;s<e.length;s++)t(e[s],s,e)};Qt(Xt(Se.prototype),function(e){Qi[e]=function(t){var s=[].slice.call(arguments,1),l=new Se(t);return l[e].apply(l,s)}});var en=Object.hasOwnProperty||function(e,t){return t in e},es=zo.exports,ts=pe;function pe(e){if(!(this instanceof pe))return new pe(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}pe.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},pe.prototype.equals=function(e){var t;return t=e instanceof pe?e.bbox():e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},pe.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},pe.prototype.union=function(e){var t;return this._valid=!0,t=e instanceof pe?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},pe.prototype.bbox=function(){return this._valid?this._bbox:null},pe.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],s=e[1];return this._bbox[0]<=t&&this._bbox[1]<=s&&this._bbox[2]>=t&&this._bbox[3]>=s},pe.prototype.intersect=function(e){return this._valid?(t=e instanceof pe?e.bbox():e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])):null;var t},pe.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},pe.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var ns=function(e){if(!e)return[];var t=Kt(Ki(e)),s=[];return t.features.forEach(function(l){l.geometry&&(s=s.concat(Xi(l.geometry.coordinates)))}),s},os=es,rs=ts,Go={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},is=Object.keys(Go);function Hn(e){for(var t=rs(),s=ns(e),l=0;l<s.length;l++)t.include(s[l]);return t}Zt.exports=function(e){return Hn(e).bbox()},Zt.exports.polygon=function(e){return Hn(e).polygon()},Zt.exports.bboxify=function(e){return os(e).map(function(t){t&&is.some(function(s){return!!t[s]&&Go[s].indexOf(t.type)!==-1})&&(t.bbox=Hn(t).bbox(),this.update(t))})};var ss=r(Zt.exports),tn=-90;function Jn(e,t){var s=tn,l=90,d=tn,p=90,f=270,T=-270;e.forEach(function(M){var A=ss(M),L=A[1],U=A[3],Q=A[0],j=A[2];L>s&&(s=L),U<l&&(l=U),U>d&&(d=U),L<p&&(p=L),Q<f&&(f=Q),j>T&&(T=j)});var C=t;return s+C.lat>85&&(C.lat=85-s),d+C.lat>90&&(C.lat=90-d),l+C.lat<-85&&(C.lat=-85-l),p+C.lat<tn&&(C.lat=tn-p),f+C.lng<=-270&&(C.lng+=360*Math.ceil(Math.abs(C.lng)/360)),T+C.lng>=270&&(C.lng-=360*Math.ceil(Math.abs(C.lng)/360)),C}function Wn(e,t){var s=Jn(e.map(function(l){return l.toGeoJSON()}),t);e.forEach(function(l){var d,p=l.getCoordinates(),f=function(C){var M={lng:C[0]+s.lng,lat:C[1]+s.lat};return[M.lng,M.lat]},T=function(C){return C.map(function(M){return f(M)})};l.type===b.POINT?d=f(p):l.type===b.LINE_STRING||l.type===b.MULTI_POINT?d=p.map(f):l.type===b.POLYGON||l.type===b.MULTI_LINE_STRING?d=p.map(T):l.type===b.MULTI_POLYGON&&(d=p.map(function(C){return C.map(function(M){return T(M)})})),l.incomingCoords(d)})}var ie={onSetup:function(e){var t=this,s={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(s.initiallySelectedFeatureIds.filter(function(l){return t.getFeature(l)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),s},fireUpdate:function(){this.map.fire(F.UPDATE,{action:D.MOVE,features:this.getSelected().map(function(e){return e.toGeoJSON()})})},fireActionable:function(){var e=this,t=this.getSelected(),s=t.filter(function(T){return e.isInstanceOf("MultiFeature",T)}),l=!1;if(t.length>1){l=!0;var d=t[0].type.replace("Multi","");t.forEach(function(T){T.type.replace("Multi","")!==d&&(l=!1)})}var p=s.length>0,f=t.length>0;this.setActionableState({combineFeatures:l,uncombineFeatures:p,trash:f})},getUniqueIds:function(e){return e.length?e.map(function(t){return t.properties.id}).filter(function(t){return t!==void 0}).reduce(function(t,s){return t.add(s),t},new we).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){Le.enable(this)},onMouseMove:function(e,t){return $n(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0},onMouseOut:function(e){return!e.dragMoving||this.fireUpdate()}};ie.onTap=ie.onClick=function(e,t){return Gt(t)?this.clickAnywhere(e,t):$t(B.VERTEX)(t)?this.clickOnVertex(e,t):$n(t)?this.clickOnFeature(e,t):void 0},ie.clickAnywhere=function(e){var t=this,s=this.getSelectedIds();s.length&&(this.clearSelectedFeatures(),s.forEach(function(l){return t.doRender(l)})),Le.enable(this),this.stopExtendedInteractions(e)},ie.clickOnVertex=function(e,t){this.changeMode(x.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:P.MOVE})},ie.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},ie.clickOnFeature=function(e,t){var s=this;Le.disable(this),this.stopExtendedInteractions(e);var l=Ht(t),d=this.getSelectedIds(),p=t.featureTarget.properties.id,f=this.isSelected(p);if(!l&&f&&this.getFeature(p).type!==b.POINT)return this.changeMode(x.DIRECT_SELECT,{featureId:p});f&&l?(this.deselect(p),this.updateUIClasses({mouse:P.POINTER}),d.length===1&&Le.enable(this)):!f&&l?(this.select(p),this.updateUIClasses({mouse:P.MOVE})):f||l||(d.forEach(function(T){return s.doRender(T)}),this.setSelected(p),this.updateUIClasses({mouse:P.MOVE})),this.doRender(p)},ie.onMouseDown=function(e,t){return et(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&Uo(t)?this.startBoxSelect(e,t):void 0},ie.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=Gn(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},ie.onTouchStart=function(e,t){if(et(t))return this.startOnActiveFeature(e,t)},ie.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},ie.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:P.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(E.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));var s=Gn(t.originalEvent,this.map.getContainer()),l=Math.min(e.boxSelectStartLocation.x,s.x),d=Math.max(e.boxSelectStartLocation.x,s.x),p=Math.min(e.boxSelectStartLocation.y,s.y),f=Math.max(e.boxSelectStartLocation.y,s.y),T="translate("+l+"px, "+p+"px)";e.boxSelectElement.style.transform=T,e.boxSelectElement.style.WebkitTransform=T,e.boxSelectElement.style.width=d-l+"px",e.boxSelectElement.style.height=f-p+"px"},ie.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();var s={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};Wn(this.getSelected(),s),e.dragMoveLocation=t.lngLat},ie.onTouchEnd=ie.onMouseUp=function(e,t){var s=this;if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){var l=[e.boxSelectStartLocation,Gn(t.originalEvent,this.map.getContainer())],d=this.featuresAt(null,l,"click"),p=this.getUniqueIds(d).filter(function(f){return!s.isSelected(f)});p.length&&(this.select(p),p.forEach(function(f){return s.doRender(f)}),this.updateUIClasses({mouse:P.MOVE}))}this.stopExtendedInteractions(e)},ie.toDisplayFeatures=function(e,t,s){t.properties.active=this.isSelected(t.properties.id)?z.ACTIVE:z.INACTIVE,s(t),this.fireActionable(),t.properties.active===z.ACTIVE&&t.geometry.type!==b.POINT&&Yt(t).forEach(s)},ie.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},ie.onCombineFeatures=function(){var e=this.getSelected();if(!(e.length===0||e.length<2)){for(var t=[],s=[],l=e[0].type.replace("Multi",""),d=0;d<e.length;d++){var p=e[d];if(p.type.replace("Multi","")!==l)return;p.type.includes("Multi")?p.getCoordinates().forEach(function(T){t.push(T)}):t.push(p.getCoordinates()),s.push(p.toGeoJSON())}if(s.length>1){var f=this.newFeature({type:b.FEATURE,properties:s[0].properties,geometry:{type:"Multi"+l,coordinates:t}});this.addFeature(f),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([f.id]),this.map.fire(F.COMBINE_FEATURES,{createdFeatures:[f.toGeoJSON()],deletedFeatures:s})}this.fireActionable()}},ie.onUncombineFeatures=function(){var e=this,t=this.getSelected();if(t.length!==0){for(var s=[],l=[],d=function(f){var T=t[f];e.isInstanceOf("MultiFeature",T)&&(T.getFeatures().forEach(function(C){e.addFeature(C),C.properties=T.properties,s.push(C.toGeoJSON()),e.select([C.id])}),e.deleteFeature(T.id,{silent:!0}),l.push(T.toGeoJSON()))},p=0;p<t.length;p++)d(p);s.length>1&&this.map.fire(F.UNCOMBINE_FEATURES,{createdFeatures:s,deletedFeatures:l}),this.fireActionable()}};var Ho=$t(B.VERTEX),Jo=$t(B.MIDPOINT),Je={fireUpdate:function(){this.map.fire(F.UPDATE,{action:D.CHANGE_COORDINATES,features:this.getSelected().map(function(e){return e.toGeoJSON()})})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);var s=t.featureTarget.properties,l=e.selectedCoordPaths.indexOf(s.coord_path);Ht(t)||l!==-1?Ht(t)&&l===-1&&e.selectedCoordPaths.push(s.coord_path):e.selectedCoordPaths=[s.coord_path];var d=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(d)},onMidpoint:function(e,t){this.startDragging(e,t);var s=t.featureTarget.properties;e.feature.addCoordinate(s.coord_path,s.lng,s.lat),this.fireUpdate(),e.selectedCoordPaths=[s.coord_path]},pathsToCoordinates:function(e,t){return t.map(function(s){return{feature_id:e,coord_path:s}})},onFeature:function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,s){Wn(this.getSelected(),s),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,s){for(var l=e.selectedCoordPaths.map(function(T){return e.feature.getCoordinate(T)}),d=Jn(l.map(function(T){return{type:b.FEATURE,properties:{},geometry:{type:b.POINT,coordinates:T}}}),s),p=0;p<l.length;p++){var f=l[p];e.feature.updateCoordinate(e.selectedCoordPaths[p],f[0]+d.lng,f[1]+d.lat)}},clickNoTarget:function(){this.changeMode(x.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(x.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){var t=e.featureId,s=this.getFeature(t);if(!s)throw new Error("You must provide a featureId to enter direct_select mode");if(s.type===b.POINT)throw new TypeError("direct_select mode doesn't handle point features");var l={featureId:t,feature:s,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,l.selectedCoordPaths)),this.setSelected(t),Le.disable(this),this.setActionableState({trash:!0}),l},onStop:function(){Le.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,s){e.featureId===t.properties.id?(t.properties.active=z.ACTIVE,s(t),Yt(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(s)):(t.properties.active=z.INACTIVE,s(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort(function(t,s){return s.localeCompare(t,"en",{numeric:!0})}).forEach(function(t){return e.feature.removeCoordinate(t)}),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(x.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){var s=et(t),l=Ho(t),d=Jo(t),p=e.selectedCoordPaths.length===0;return s&&p||l&&!p?this.updateUIClasses({mouse:P.MOVE}):this.updateUIClasses({mouse:P.NONE}),(l||s||d)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0},onMouseOut:function(e){return e.dragMoving&&this.fireUpdate(),!0}};Je.onTouchStart=Je.onMouseDown=function(e,t){return Ho(t)?this.onVertex(e,t):et(t)?this.onFeature(e,t):Jo(t)?this.onMidpoint(e,t):void 0},Je.onDrag=function(e,t){if(e.canDragMove===!0){e.dragMoving=!0,t.originalEvent.stopPropagation();var s={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,s):this.dragFeature(e,t,s),e.dragMoveLocation=t.lngLat}},Je.onClick=function(e,t){return Gt(t)?this.clickNoTarget(e,t):et(t)?this.clickActiveFeature(e,t):qn(t)?this.clickInactive(e,t):void this.stopDragging(e)},Je.onTap=function(e,t){return Gt(t)?this.clickNoTarget(e,t):et(t)?this.clickActiveFeature(e,t):qn(t)?this.clickInactive(e,t):void 0},Je.onTouchEnd=Je.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var Ne={};function nn(e,t){return!!e.lngLat&&e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]}Ne.onSetup=function(){var e=this.newFeature({type:b.FEATURE,properties:{},geometry:{type:b.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:P.ADD}),this.activateUIButton(O.POINT),this.setActionableState({trash:!0}),{point:e}},Ne.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)},Ne.onTap=Ne.onClick=function(e,t){this.updateUIClasses({mouse:P.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(F.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.point.id]})},Ne.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},Ne.toDisplayFeatures=function(e,t,s){var l=t.properties.id===e.point.id;if(t.properties.active=l?z.ACTIVE:z.INACTIVE,!l)return s(t)},Ne.onTrash=Ne.stopDrawingAndRemove,Ne.onKeyUp=function(e,t){if(Jt(t)||Wt(t))return this.stopDrawingAndRemove(e,t)};var tt={onSetup:function(){var e=this.newFeature({type:b.FEATURE,properties:{},geometry:{type:b.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),Le.disable(this),this.updateUIClasses({mouse:P.ADD}),this.activateUIButton(O.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&nn(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:P.ADD}),e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Ct(t)&&this.updateUIClasses({mouse:P.POINTER})}};tt.onTap=tt.onClick=function(e,t){return Ct(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},tt.onKeyUp=function(e,t){Jt(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)):Wt(t)&&this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},tt.onStop=function(e){this.updateUIClasses({mouse:P.NONE}),Le.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate("0."+e.currentVertexPosition),e.polygon.isValid()?this.map.fire(F.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT,{},{silent:!0})))},tt.toDisplayFeatures=function(e,t,s){var l=t.properties.id===e.polygon.id;if(t.properties.active=l?z.ACTIVE:z.INACTIVE,!l)return s(t);if(t.geometry.coordinates.length!==0){var d=t.geometry.coordinates[0].length;if(!(d<3)){if(t.properties.meta=B.FEATURE,s(gt(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),d>3){var p=t.geometry.coordinates[0].length-3;s(gt(e.polygon.id,t.geometry.coordinates[0][p],"0."+p,!1))}if(d<=4){var f=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(s({type:b.FEATURE,properties:t.properties,geometry:{coordinates:f,type:b.LINE_STRING}}),d===3)return}return s(t)}}},tt.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)};var nt={onSetup:function(e){var t,s,l=(e=e||{}).featureId,d="forward";if(l){if(!(t=this.getFeature(l)))throw new Error("Could not find a feature with the provided featureId");var p=e.from;if(p&&p.type==="Feature"&&p.geometry&&p.geometry.type==="Point"&&(p=p.geometry),p&&p.type==="Point"&&p.coordinates&&p.coordinates.length===2&&(p=p.coordinates),!p||!Array.isArray(p))throw new Error("Please use the `from` property to indicate which point to continue the line from");var f=t.coordinates.length-1;if(t.coordinates[f][0]===p[0]&&t.coordinates[f][1]===p[1])s=f+1,t.addCoordinate.apply(t,[s].concat(t.coordinates[f]));else{if(t.coordinates[0][0]!==p[0]||t.coordinates[0][1]!==p[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");d="backwards",s=0,t.addCoordinate.apply(t,[s].concat(t.coordinates[0]))}}else t=this.newFeature({type:b.FEATURE,properties:{},geometry:{type:b.LINE_STRING,coordinates:[]}}),s=0,this.addFeature(t);return this.clearSelectedFeatures(),Le.disable(this),this.updateUIClasses({mouse:P.ADD}),this.activateUIButton(O.LINE),this.setActionableState({trash:!0}),{line:t,currentVertexPosition:s,direction:d}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&nn(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&nn(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:P.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Ct(t)&&this.updateUIClasses({mouse:P.POINTER})}};nt.onTap=nt.onClick=function(e,t){if(Ct(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},nt.onKeyUp=function(e,t){Wt(t)?this.changeMode(x.SIMPLE_SELECT,{featureIds:[e.line.id]}):Jt(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT))},nt.onStop=function(e){Le.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(""+e.currentVertexPosition),e.line.isValid()?this.map.fire(F.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT,{},{silent:!0})))},nt.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(x.SIMPLE_SELECT)},nt.toDisplayFeatures=function(e,t,s){var l=t.properties.id===e.line.id;if(t.properties.active=l?z.ACTIVE:z.INACTIVE,!l)return s(t);t.geometry.coordinates.length<2||(t.properties.meta=B.FEATURE,s(gt(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],""+(e.direction==="forward"?t.geometry.coordinates.length-2:1),!1)),s(t))};var Wo={simple_select:ie,direct_select:Je,draw_point:Ne,draw_polygon:tt,draw_line_string:nt},as={defaultMode:x.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Do,modes:Wo,controls:{},userProperties:!1},cs={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},ls={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Yo(e,t){return e.map(function(s){return s.source?s:He(s,{id:s.id+"."+t,source:t==="hot"?N.HOT:N.COLD})})}var Yn={exports:{}};(function(e,t){var s="__lodash_hash_undefined__",l=9007199254740991,d="[object Arguments]",p="[object Array]",f="[object Boolean]",T="[object Date]",C="[object Error]",M="[object Function]",A="[object Map]",L="[object Number]",U="[object Object]",Q="[object Promise]",j="[object RegExp]",te="[object Set]",S="[object String]",R="[object Symbol]",H="[object WeakMap]",le="[object ArrayBuffer]",ne="[object DataView]",Zn=/^\[object .+?Constructor\]$/,fs=/^(?:0|[1-9]\d*)$/,K={};K["[object Float32Array]"]=K["[object Float64Array]"]=K["[object Int8Array]"]=K["[object Int16Array]"]=K["[object Int32Array]"]=K["[object Uint8Array]"]=K["[object Uint8ClampedArray]"]=K["[object Uint16Array]"]=K["[object Uint32Array]"]=!0,K[d]=K[p]=K[le]=K[f]=K[ne]=K[T]=K[C]=K[M]=K[A]=K[L]=K[U]=K[j]=K[te]=K[S]=K[H]=!1;var Xo=typeof Rt=="object"&&Rt&&Rt.Object===Object&&Rt,hs=typeof self=="object"&&self&&self.Object===Object&&self,De=Xo||hs||Function("return this")(),Qo=t&&!t.nodeType&&t,er=Qo&&e&&!e.nodeType&&e,tr=er&&er.exports===Qo,Kn=tr&&Xo.process,nr=function(){try{return Kn&&Kn.binding&&Kn.binding("util")}catch{}}(),or=nr&&nr.isTypedArray;function gs(h,m){for(var I=-1,k=h==null?0:h.length;++I<k;)if(m(h[I],I,h))return!0;return!1}function ms(h){var m=-1,I=Array(h.size);return h.forEach(function(k,X){I[++m]=[X,k]}),I}function ys(h){var m=-1,I=Array(h.size);return h.forEach(function(k){I[++m]=k}),I}var rr,ir,sr,vs=Array.prototype,bs=Function.prototype,rn=Object.prototype,Xn=De["__core-js_shared__"],ar=bs.toString,Re=rn.hasOwnProperty,cr=(rr=/[^.]+$/.exec(Xn&&Xn.keys&&Xn.keys.IE_PROTO||""))?"Symbol(src)_1."+rr:"",lr=rn.toString,_s=RegExp("^"+ar.call(Re).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ur=tr?De.Buffer:void 0,sn=De.Symbol,dr=De.Uint8Array,pr=rn.propertyIsEnumerable,ws=vs.splice,ot=sn?sn.toStringTag:void 0,fr=Object.getOwnPropertySymbols,Es=ur?ur.isBuffer:void 0,Ss=(ir=Object.keys,sr=Object,function(h){return ir(sr(h))}),Qn=yt(De,"DataView"),Lt=yt(De,"Map"),eo=yt(De,"Promise"),to=yt(De,"Set"),no=yt(De,"WeakMap"),It=yt(Object,"create"),xs=st(Qn),Os=st(Lt),Ts=st(eo),Cs=st(to),Ls=st(no),hr=sn?sn.prototype:void 0,oo=hr?hr.valueOf:void 0;function rt(h){var m=-1,I=h==null?0:h.length;for(this.clear();++m<I;){var k=h[m];this.set(k[0],k[1])}}function Ue(h){var m=-1,I=h==null?0:h.length;for(this.clear();++m<I;){var k=h[m];this.set(k[0],k[1])}}function it(h){var m=-1,I=h==null?0:h.length;for(this.clear();++m<I;){var k=h[m];this.set(k[0],k[1])}}function an(h){var m=-1,I=h==null?0:h.length;for(this.__data__=new it;++m<I;)this.add(h[m])}function We(h){var m=this.__data__=new Ue(h);this.size=m.size}function Is(h,m){var I=un(h),k=!I&&Rs(h),X=!I&&!k&&ro(h),$=!I&&!k&&!X&&Sr(h),ee=I||k||X||$,oe=ee?function(ae,ke){for(var Be=-1,fe=Array(ae);++Be<ae;)fe[Be]=ke(Be);return fe}(h.length,String):[],Ie=oe.length;for(var se in h)!Re.call(h,se)||ee&&(se=="length"||X&&(se=="offset"||se=="parent")||$&&(se=="buffer"||se=="byteLength"||se=="byteOffset")||Ns(se,Ie))||oe.push(se);return oe}function cn(h,m){for(var I=h.length;I--;)if(br(h[I][0],m))return I;return-1}function Mt(h){return h==null?h===void 0?"[object Undefined]":"[object Null]":ot&&ot in Object(h)?function(m){var I=Re.call(m,ot),k=m[ot];try{m[ot]=void 0;var X=!0}catch{}var $=lr.call(m);return X&&(I?m[ot]=k:delete m[ot]),$}(h):function(m){return lr.call(m)}(h)}function gr(h){return At(h)&&Mt(h)==d}function mr(h,m,I,k,X){return h===m||(h==null||m==null||!At(h)&&!At(m)?h!=h&&m!=m:function($,ee,oe,Ie,se,ae){var ke=un($),Be=un(ee),fe=ke?p:Ye($),je=Be?p:Ye(ee),vt=(fe=fe==d?U:fe)==U,dn=(je=je==d?U:je)==U,bt=fe==je;if(bt&&ro($)){if(!ro(ee))return!1;ke=!0,vt=!1}if(bt&&!vt)return ae||(ae=new We),ke||Sr($)?yr($,ee,oe,Ie,se,ae):function(Y,J,pn,Ze,io,xe,ze){switch(pn){case ne:if(Y.byteLength!=J.byteLength||Y.byteOffset!=J.byteOffset)return!1;Y=Y.buffer,J=J.buffer;case le:return!(Y.byteLength!=J.byteLength||!xe(new dr(Y),new dr(J)));case f:case T:case L:return br(+Y,+J);case C:return Y.name==J.name&&Y.message==J.message;case j:case S:return Y==J+"";case A:var Ke=ms;case te:var Nt=1&Ze;if(Ke||(Ke=ys),Y.size!=J.size&&!Nt)return!1;var fn=ze.get(Y);if(fn)return fn==J;Ze|=2,ze.set(Y,J);var _t=yr(Ke(Y),Ke(J),Ze,io,xe,ze);return ze.delete(Y),_t;case R:if(oo)return oo.call(Y)==oo.call(J)}return!1}($,ee,fe,oe,Ie,se,ae);if(!(1&oe)){var Pt=vt&&Re.call($,"__wrapped__"),xr=dn&&Re.call(ee,"__wrapped__");if(Pt||xr){var Fs=Pt?$.value():$,Ds=xr?ee.value():ee;return ae||(ae=new We),se(Fs,Ds,oe,Ie,ae)}}return bt?(ae||(ae=new We),function(Y,J,pn,Ze,io,xe){var ze=1&pn,Ke=vr(Y),Nt=Ke.length,fn=vr(J).length;if(Nt!=fn&&!ze)return!1;for(var _t=Nt;_t--;){var at=Ke[_t];if(!(ze?at in J:Re.call(J,at)))return!1}var Or=xe.get(Y);if(Or&&xe.get(J))return Or==J;var hn=!0;xe.set(Y,J),xe.set(J,Y);for(var so=ze;++_t<Nt;){var gn=Y[at=Ke[_t]],mn=J[at];if(Ze)var Tr=ze?Ze(mn,gn,at,J,Y,xe):Ze(gn,mn,at,Y,J,xe);if(!(Tr===void 0?gn===mn||io(gn,mn,pn,Ze,xe):Tr)){hn=!1;break}so||(so=at=="constructor")}if(hn&&!so){var yn=Y.constructor,vn=J.constructor;yn==vn||!("constructor"in Y)||!("constructor"in J)||typeof yn=="function"&&yn instanceof yn&&typeof vn=="function"&&vn instanceof vn||(hn=!1)}return xe.delete(Y),xe.delete(J),hn}($,ee,oe,Ie,se,ae)):!1}(h,m,I,k,mr,X))}function Ms(h){return!(!Er(h)||function(m){return!!cr&&cr in m}(h))&&(_r(h)?_s:Zn).test(st(h))}function As(h){if(I=(m=h)&&m.constructor,k=typeof I=="function"&&I.prototype||rn,m!==k)return Ss(h);var m,I,k,X=[];for(var $ in Object(h))Re.call(h,$)&&$!="constructor"&&X.push($);return X}function yr(h,m,I,k,X,$){var ee=1&I,oe=h.length,Ie=m.length;if(oe!=Ie&&!(ee&&Ie>oe))return!1;var se=$.get(h);if(se&&$.get(m))return se==m;var ae=-1,ke=!0,Be=2&I?new an:void 0;for($.set(h,m),$.set(m,h);++ae<oe;){var fe=h[ae],je=m[ae];if(k)var vt=ee?k(je,fe,ae,m,h,$):k(fe,je,ae,h,m,$);if(vt!==void 0){if(vt)continue;ke=!1;break}if(Be){if(!gs(m,function(dn,bt){if(Pt=bt,!Be.has(Pt)&&(fe===dn||X(fe,dn,I,k,$)))return Be.push(bt);var Pt})){ke=!1;break}}else if(fe!==je&&!X(fe,je,I,k,$)){ke=!1;break}}return $.delete(h),$.delete(m),ke}function vr(h){return function(m,I,k){var X=I(m);return un(m)?X:function($,ee){for(var oe=-1,Ie=ee.length,se=$.length;++oe<Ie;)$[se+oe]=ee[oe];return $}(X,k(m))}(h,ks,Ps)}function ln(h,m){var I,k,X=h.__data__;return((k=typeof(I=m))=="string"||k=="number"||k=="symbol"||k=="boolean"?I!=="__proto__":I===null)?X[typeof m=="string"?"string":"hash"]:X.map}function yt(h,m){var I=function(k,X){return k?.[X]}(h,m);return Ms(I)?I:void 0}rt.prototype.clear=function(){this.__data__=It?It(null):{},this.size=0},rt.prototype.delete=function(h){var m=this.has(h)&&delete this.__data__[h];return this.size-=m?1:0,m},rt.prototype.get=function(h){var m=this.__data__;if(It){var I=m[h];return I===s?void 0:I}return Re.call(m,h)?m[h]:void 0},rt.prototype.has=function(h){var m=this.__data__;return It?m[h]!==void 0:Re.call(m,h)},rt.prototype.set=function(h,m){var I=this.__data__;return this.size+=this.has(h)?0:1,I[h]=It&&m===void 0?s:m,this},Ue.prototype.clear=function(){this.__data__=[],this.size=0},Ue.prototype.delete=function(h){var m=this.__data__,I=cn(m,h);return!(I<0)&&(I==m.length-1?m.pop():ws.call(m,I,1),--this.size,!0)},Ue.prototype.get=function(h){var m=this.__data__,I=cn(m,h);return I<0?void 0:m[I][1]},Ue.prototype.has=function(h){return cn(this.__data__,h)>-1},Ue.prototype.set=function(h,m){var I=this.__data__,k=cn(I,h);return k<0?(++this.size,I.push([h,m])):I[k][1]=m,this},it.prototype.clear=function(){this.size=0,this.__data__={hash:new rt,map:new(Lt||Ue),string:new rt}},it.prototype.delete=function(h){var m=ln(this,h).delete(h);return this.size-=m?1:0,m},it.prototype.get=function(h){return ln(this,h).get(h)},it.prototype.has=function(h){return ln(this,h).has(h)},it.prototype.set=function(h,m){var I=ln(this,h),k=I.size;return I.set(h,m),this.size+=I.size==k?0:1,this},an.prototype.add=an.prototype.push=function(h){return this.__data__.set(h,s),this},an.prototype.has=function(h){return this.__data__.has(h)},We.prototype.clear=function(){this.__data__=new Ue,this.size=0},We.prototype.delete=function(h){var m=this.__data__,I=m.delete(h);return this.size=m.size,I},We.prototype.get=function(h){return this.__data__.get(h)},We.prototype.has=function(h){return this.__data__.has(h)},We.prototype.set=function(h,m){var I=this.__data__;if(I instanceof Ue){var k=I.__data__;if(!Lt||k.length<199)return k.push([h,m]),this.size=++I.size,this;I=this.__data__=new it(k)}return I.set(h,m),this.size=I.size,this};var Ps=fr?function(h){return h==null?[]:(h=Object(h),function(m,I){for(var k=-1,X=m==null?0:m.length,$=0,ee=[];++k<X;){var oe=m[k];I(oe,k,m)&&(ee[$++]=oe)}return ee}(fr(h),function(m){return pr.call(h,m)}))}:function(){return[]},Ye=Mt;function Ns(h,m){return!!(m=m??l)&&(typeof h=="number"||fs.test(h))&&h>-1&&h%1==0&&h<m}function st(h){if(h!=null){try{return ar.call(h)}catch{}try{return h+""}catch{}}return""}function br(h,m){return h===m||h!=h&&m!=m}(Qn&&Ye(new Qn(new ArrayBuffer(1)))!=ne||Lt&&Ye(new Lt)!=A||eo&&Ye(eo.resolve())!=Q||to&&Ye(new to)!=te||no&&Ye(new no)!=H)&&(Ye=function(h){var m=Mt(h),I=m==U?h.constructor:void 0,k=I?st(I):"";if(k)switch(k){case xs:return ne;case Os:return A;case Ts:return Q;case Cs:return te;case Ls:return H}return m});var Rs=gr(function(){return arguments}())?gr:function(h){return At(h)&&Re.call(h,"callee")&&!pr.call(h,"callee")},un=Array.isArray,ro=Es||function(){return!1};function _r(h){if(!Er(h))return!1;var m=Mt(h);return m==M||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}function wr(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=l}function Er(h){var m=typeof h;return h!=null&&(m=="object"||m=="function")}function At(h){return h!=null&&typeof h=="object"}var Sr=or?function(h){return function(m){return h(m)}}(or):function(h){return At(h)&&wr(h.length)&&!!K[Mt(h)]};function ks(h){return(m=h)!=null&&wr(m.length)&&!_r(m)?Is(h):As(h);var m}e.exports=function(h,m){return mr(h,m)}})(Yn,Yn.exports);var Zo=r(Yn.exports);function Ko(e,t){return e.length===t.length&&JSON.stringify(e.map(function(s){return s}).sort())===JSON.stringify(t.map(function(s){return s}).sort())}var us={Polygon:Ee,LineString:Fe,Point:Qe,MultiPolygon:ge,MultiLineString:ge,MultiPoint:ge},ds=Object.freeze({__proto__:null,CommonSelectors:Gi,constrainFeatureMovement:Jn,createMidPoint:Bo,createSupplementaryPoints:Yt,createVertex:gt,doubleClickZoom:Le,euclideanDistance:Un,featuresAt:ft,getFeatureAtAndSetCursors:Vt,isClick:Bn,isEventAtCoordinates:nn,isTap:jn,mapEventToBoundingBox:zt,ModeHandler:i,moveFeatures:Wn,sortFeatures:Pe,stringSetsAreEqual:Ko,StringSet:we,theme:Do,toDenseArray:Tt}),ps=function(e,t){var s={options:e=function(d){d===void 0&&(d={});var p=He(d);return d.controls||(p.controls={}),d.displayControlsDefault===!1?p.controls=He(ls,d.controls):p.controls=He(cs,d.controls),(p=He(as,p)).styles=Yo(p.styles,"cold").concat(Yo(p.styles,"hot")),p}(e)};t=function(d,p){return p.modes=x,p.getFeatureIdsAt=function(f){return ft.click({point:f},null,d).map(function(T){return T.properties.id})},p.getSelectedIds=function(){return d.store.getSelectedIds()},p.getSelected=function(){return{type:b.FEATURE_COLLECTION,features:d.store.getSelectedIds().map(function(f){return d.store.get(f)}).map(function(f){return f.toGeoJSON()})}},p.getSelectedPoints=function(){return{type:b.FEATURE_COLLECTION,features:d.store.getSelectedCoordinates().map(function(f){return{type:b.FEATURE,properties:{},geometry:{type:b.POINT,coordinates:f.coordinates}}})}},p.set=function(f){if(f.type===void 0||f.type!==b.FEATURE_COLLECTION||!Array.isArray(f.features))throw new Error("Invalid FeatureCollection");var T=d.store.createRenderBatch(),C=d.store.getAllIds().slice(),M=p.add(f),A=new we(M);return(C=C.filter(function(L){return!A.has(L)})).length&&p.delete(C),T(),M},p.add=function(f){var T=JSON.parse(JSON.stringify(Yi(f))).features.map(function(C){if(C.id=C.id||Vn(),C.geometry===null)throw new Error("Invalid geometry: null");if(d.store.get(C.id)===void 0||d.store.get(C.id).type!==C.geometry.type){var M=us[C.geometry.type];if(M===void 0)throw new Error("Invalid geometry type: "+C.geometry.type+".");var A=new M(d,C);d.store.add(A)}else{var L=d.store.get(C.id);L.properties=C.properties,Zo(L.properties,C.properties)||d.store.featureChanged(L.id),Zo(L.getCoordinates(),C.geometry.coordinates)||L.incomingCoords(C.geometry.coordinates)}return C.id});return d.store.render(),T},p.get=function(f){var T=d.store.get(f);if(T)return T.toGeoJSON()},p.getAll=function(){return{type:b.FEATURE_COLLECTION,features:d.store.getAll().map(function(f){return f.toGeoJSON()})}},p.delete=function(f){return d.store.delete(f,{silent:!0}),p.getMode()!==x.DIRECT_SELECT||d.store.getSelectedIds().length?d.store.render():d.events.changeMode(x.SIMPLE_SELECT,void 0,{silent:!0}),p},p.deleteAll=function(){return d.store.delete(d.store.getAllIds(),{silent:!0}),p.getMode()===x.DIRECT_SELECT?d.events.changeMode(x.SIMPLE_SELECT,void 0,{silent:!0}):d.store.render(),p},p.changeMode=function(f,T){return T===void 0&&(T={}),f===x.SIMPLE_SELECT&&p.getMode()===x.SIMPLE_SELECT?(Ko(T.featureIds||[],d.store.getSelectedIds())||(d.store.setSelected(T.featureIds,{silent:!0}),d.store.render()),p):(f===x.DIRECT_SELECT&&p.getMode()===x.DIRECT_SELECT&&T.featureId===d.store.getSelectedIds()[0]||d.events.changeMode(f,T,{silent:!0}),p)},p.getMode=function(){return d.events.getMode()},p.trash=function(){return d.events.trash({silent:!0}),p},p.combineFeatures=function(){return d.events.combineFeatures({silent:!0}),p},p.uncombineFeatures=function(){return d.events.uncombineFeatures({silent:!0}),p},p.setFeatureProperty=function(f,T,C){return d.store.setFeatureProperty(f,T,C),p},p}(s,t),s.api=t;var l=$i(s);return t.onAdd=l.onAdd,t.onRemove=l.onRemove,t.types=O,t.options=e,t};function on(e){ps(e,this)}return on.modes=Wo,on.constants=be,on.lib=ds,on})})(li);var zc=li.exports;const $e=ii(zc),{cursors:uo,geojsonTypes:ui,modes:ct,meta:Ar}=$e.constants;function Vc(n){const o={...n};return o.clickOnFeature=function(i,r){r.featureTarget.geometry.type!==ui.POINT?this.changeMode(ct.DIRECT_SELECT,{featureId:r.featureTarget.properties.id}):(n.clickOnFeature.call(this,i,r),this.setSelected(r.featureTarget.properties.id))},o}function qc(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:()=>{};const r={...n};return r.clickInactive=function(a,c){c.featureTarget.geometry.type!==ui.POINT?this.changeMode(ct.DIRECT_SELECT,{featureId:c.featureTarget.properties.id}):this.changeMode(ct.SIMPLE_SELECT,{featureIds:[c.featureTarget.properties.id]})},r.dragFeature=function(a,c,u){const g=a.feature.toGeoJSON();o(g,c,u)?i():n.dragFeature.call(this,a,c,u)},r.onMouseMove=function(a,c){const u=n.onMouseMove.call(this,a,c),g=a.feature.toGeoJSON();if(o(g,c)){const _=$e.lib.CommonSelectors.isInactiveFeature(c),y=$e.lib.CommonSelectors.isOfMetaType(Ar.VERTEX)(c),w=$e.lib.CommonSelectors.isOfMetaType(Ar.MIDPOINT)(c);_||w?this.updateUIClasses({mouse:uo.POINTER}):y?this.updateUIClasses({mouse:uo.MOVE}):this.updateUIClasses({mouse:uo.NONE})}return u},r}function $c(n){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>!0;return{...n,[ct.SIMPLE_SELECT]:Vc(n[ct.SIMPLE_SELECT]),[ct.DIRECT_SELECT]:qc(n[ct.DIRECT_SELECT],o)}}function di(n,o){return function(){return n.apply(o,arguments)}}const{toString:Gc}=Object.prototype,{getPrototypeOf:Lo}=Object,Nn=(n=>o=>{const i=Gc.call(o);return n[i]||(n[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Ae=n=>(n=n.toLowerCase(),o=>Nn(o)===n),Rn=n=>o=>typeof o===n,{isArray:xt}=Array,Ft=Rn("undefined");function Hc(n){return n!==null&&!Ft(n)&&n.constructor!==null&&!Ft(n.constructor)&&ve(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const pi=Ae("ArrayBuffer");function Jc(n){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(n):o=n&&n.buffer&&pi(n.buffer),o}const Wc=Rn("string"),ve=Rn("function"),fi=Rn("number"),kn=n=>n!==null&&typeof n=="object",Yc=n=>n===!0||n===!1,On=n=>{if(Nn(n)!=="object")return!1;const o=Lo(n);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Zc=Ae("Date"),Kc=Ae("File"),Xc=Ae("Blob"),Qc=Ae("FileList"),el=n=>kn(n)&&ve(n.pipe),tl=n=>{let o;return n&&(typeof FormData=="function"&&n instanceof FormData||ve(n.append)&&((o=Nn(n))==="formdata"||o==="object"&&ve(n.toString)&&n.toString()==="[object FormData]"))},nl=Ae("URLSearchParams"),[ol,rl,il,sl]=["ReadableStream","Request","Response","Headers"].map(Ae),al=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bt(n,o,{allOwnKeys:i=!1}={}){if(n===null||typeof n>"u")return;let r,a;if(typeof n!="object"&&(n=[n]),xt(n))for(r=0,a=n.length;r<a;r++)o.call(null,n[r],r,n);else{const c=i?Object.getOwnPropertyNames(n):Object.keys(n),u=c.length;let g;for(r=0;r<u;r++)g=c[r],o.call(null,n[g],g,n)}}function hi(n,o){o=o.toLowerCase();const i=Object.keys(n);let r=i.length,a;for(;r-- >0;)if(a=i[r],o===a.toLowerCase())return a;return null}const lt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gi=n=>!Ft(n)&&n!==lt;function yo(){const{caseless:n}=gi(this)&&this||{},o={},i=(r,a)=>{const c=n&&hi(o,a)||a;On(o[c])&&On(r)?o[c]=yo(o[c],r):On(r)?o[c]=yo({},r):xt(r)?o[c]=r.slice():o[c]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Bt(arguments[r],i);return o}const cl=(n,o,i,{allOwnKeys:r}={})=>(Bt(o,(a,c)=>{i&&ve(a)?n[c]=di(a,i):n[c]=a},{allOwnKeys:r}),n),ll=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),ul=(n,o,i,r)=>{n.prototype=Object.create(o.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:o.prototype}),i&&Object.assign(n.prototype,i)},dl=(n,o,i,r)=>{let a,c,u;const g={};if(o=o||{},n==null)return o;do{for(a=Object.getOwnPropertyNames(n),c=a.length;c-- >0;)u=a[c],(!r||r(u,n,o))&&!g[u]&&(o[u]=n[u],g[u]=!0);n=i!==!1&&Lo(n)}while(n&&(!i||i(n,o))&&n!==Object.prototype);return o},pl=(n,o,i)=>{n=String(n),(i===void 0||i>n.length)&&(i=n.length),i-=o.length;const r=n.indexOf(o,i);return r!==-1&&r===i},fl=n=>{if(!n)return null;if(xt(n))return n;let o=n.length;if(!fi(o))return null;const i=new Array(o);for(;o-- >0;)i[o]=n[o];return i},hl=(n=>o=>n&&o instanceof n)(typeof Uint8Array<"u"&&Lo(Uint8Array)),gl=(n,o)=>{const r=(n&&n[Symbol.iterator]).call(n);let a;for(;(a=r.next())&&!a.done;){const c=a.value;o.call(n,c[0],c[1])}},ml=(n,o)=>{let i;const r=[];for(;(i=n.exec(o))!==null;)r.push(i);return r},yl=Ae("HTMLFormElement"),vl=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,r,a){return r.toUpperCase()+a}),Pr=(({hasOwnProperty:n})=>(o,i)=>n.call(o,i))(Object.prototype),bl=Ae("RegExp"),mi=(n,o)=>{const i=Object.getOwnPropertyDescriptors(n),r={};Bt(i,(a,c)=>{let u;(u=o(a,c,n))!==!1&&(r[c]=u||a)}),Object.defineProperties(n,r)},_l=n=>{mi(n,(o,i)=>{if(ve(n)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const r=n[i];if(ve(r)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},wl=(n,o)=>{const i={},r=a=>{a.forEach(c=>{i[c]=!0})};return xt(n)?r(n):r(String(n).split(o)),i},El=()=>{},Sl=(n,o)=>n!=null&&Number.isFinite(n=+n)?n:o,po="abcdefghijklmnopqrstuvwxyz",Nr="0123456789",yi={DIGIT:Nr,ALPHA:po,ALPHA_DIGIT:po+po.toUpperCase()+Nr},xl=(n=16,o=yi.ALPHA_DIGIT)=>{let i="";const{length:r}=o;for(;n--;)i+=o[Math.random()*r|0];return i};function Ol(n){return!!(n&&ve(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const Tl=n=>{const o=new Array(10),i=(r,a)=>{if(kn(r)){if(o.indexOf(r)>=0)return;if(!("toJSON"in r)){o[a]=r;const c=xt(r)?[]:{};return Bt(r,(u,g)=>{const _=i(u,a+1);!Ft(_)&&(c[g]=_)}),o[a]=void 0,c}}return r};return i(n,0)},Cl=Ae("AsyncFunction"),Ll=n=>n&&(kn(n)||ve(n))&&ve(n.then)&&ve(n.catch),vi=((n,o)=>n?setImmediate:o?((i,r)=>(lt.addEventListener("message",({source:a,data:c})=>{a===lt&&c===i&&r.length&&r.shift()()},!1),a=>{r.push(a),lt.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",ve(lt.postMessage)),Il=typeof queueMicrotask<"u"?queueMicrotask.bind(lt):typeof process<"u"&&process.nextTick||vi,v={isArray:xt,isArrayBuffer:pi,isBuffer:Hc,isFormData:tl,isArrayBufferView:Jc,isString:Wc,isNumber:fi,isBoolean:Yc,isObject:kn,isPlainObject:On,isReadableStream:ol,isRequest:rl,isResponse:il,isHeaders:sl,isUndefined:Ft,isDate:Zc,isFile:Kc,isBlob:Xc,isRegExp:bl,isFunction:ve,isStream:el,isURLSearchParams:nl,isTypedArray:hl,isFileList:Qc,forEach:Bt,merge:yo,extend:cl,trim:al,stripBOM:ll,inherits:ul,toFlatObject:dl,kindOf:Nn,kindOfTest:Ae,endsWith:pl,toArray:fl,forEachEntry:gl,matchAll:ml,isHTMLForm:yl,hasOwnProperty:Pr,hasOwnProp:Pr,reduceDescriptors:mi,freezeMethods:_l,toObjectSet:wl,toCamelCase:vl,noop:El,toFiniteNumber:Sl,findKey:hi,global:lt,isContextDefined:gi,ALPHABET:yi,generateString:xl,isSpecCompliantForm:Ol,toJSONObject:Tl,isAsyncFn:Cl,isThenable:Ll,setImmediate:vi,asap:Il};function V(n,o,i,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",o&&(this.code=o),i&&(this.config=i),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}v.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.status}}});const bi=V.prototype,_i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{_i[n]={value:n}});Object.defineProperties(V,_i);Object.defineProperty(bi,"isAxiosError",{value:!0});V.from=(n,o,i,r,a,c)=>{const u=Object.create(bi);return v.toFlatObject(n,u,function(_){return _!==Error.prototype},g=>g!=="isAxiosError"),V.call(u,n.message,o,i,r,a),u.cause=n,u.name=n.name,c&&Object.assign(u,c),u};const Ml=null;function vo(n){return v.isPlainObject(n)||v.isArray(n)}function wi(n){return v.endsWith(n,"[]")?n.slice(0,-2):n}function Rr(n,o,i){return n?n.concat(o).map(function(a,c){return a=wi(a),!i&&c?"["+a+"]":a}).join(i?".":""):o}function Al(n){return v.isArray(n)&&!n.some(vo)}const Pl=v.toFlatObject(v,{},null,function(o){return/^is[A-Z]/.test(o)});function Fn(n,o,i){if(!v.isObject(n))throw new TypeError("target must be an object");o=o||new FormData,i=v.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,x){return!v.isUndefined(x[b])});const r=i.metaTokens,a=i.visitor||w,c=i.dots,u=i.indexes,_=(i.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(o);if(!v.isFunction(a))throw new TypeError("visitor must be a function");function y(O){if(O===null)return"";if(v.isDate(O))return O.toISOString();if(!_&&v.isBlob(O))throw new V("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(O)||v.isTypedArray(O)?_&&typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function w(O,b,x){let F=O;if(O&&!x&&typeof O=="object"){if(v.endsWith(b,"{}"))b=r?b:b.slice(0,-2),O=JSON.stringify(O);else if(v.isArray(O)&&Al(O)||(v.isFileList(O)||v.endsWith(b,"[]"))&&(F=v.toArray(O)))return b=wi(b),F.forEach(function(B,z){!(v.isUndefined(B)||B===null)&&o.append(u===!0?Rr([b],z,c):u===null?b:b+"[]",y(B))}),!1}return vo(O)?!0:(o.append(Rr(x,b,c),y(O)),!1)}const E=[],N=Object.assign(Pl,{defaultVisitor:w,convertValue:y,isVisitable:vo});function P(O,b){if(!v.isUndefined(O)){if(E.indexOf(O)!==-1)throw Error("Circular reference detected in "+b.join("."));E.push(O),v.forEach(O,function(F,D){(!(v.isUndefined(F)||F===null)&&a.call(o,F,v.isString(D)?D.trim():D,b,N))===!0&&P(F,b?b.concat(D):[D])}),E.pop()}}if(!v.isObject(n))throw new TypeError("data must be an object");return P(n),o}function kr(n){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return o[r]})}function Io(n,o){this._pairs=[],n&&Fn(n,this,o)}const Ei=Io.prototype;Ei.append=function(o,i){this._pairs.push([o,i])};Ei.toString=function(o){const i=o?function(r){return o.call(this,r,kr)}:kr;return this._pairs.map(function(a){return i(a[0])+"="+i(a[1])},"").join("&")};function Nl(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Si(n,o,i){if(!o)return n;const r=i&&i.encode||Nl,a=i&&i.serialize;let c;if(a?c=a(o,i):c=v.isURLSearchParams(o)?o.toString():new Io(o,i).toString(r),c){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+c}return n}class Fr{constructor(){this.handlers=[]}use(o,i,r){return this.handlers.push({fulfilled:o,rejected:i,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){v.forEach(this.handlers,function(r){r!==null&&o(r)})}}const xi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rl=typeof URLSearchParams<"u"?URLSearchParams:Io,kl=typeof FormData<"u"?FormData:null,Fl=typeof Blob<"u"?Blob:null,Dl={isBrowser:!0,classes:{URLSearchParams:Rl,FormData:kl,Blob:Fl},protocols:["http","https","file","blob","url","data"]},Mo=typeof window<"u"&&typeof document<"u",bo=typeof navigator=="object"&&navigator||void 0,Ul=Mo&&(!bo||["ReactNative","NativeScript","NS"].indexOf(bo.product)<0),Bl=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jl=Mo&&window.location.href||"http://localhost",zl=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mo,hasStandardBrowserEnv:Ul,hasStandardBrowserWebWorkerEnv:Bl,navigator:bo,origin:jl},Symbol.toStringTag,{value:"Module"})),me={...zl,...Dl};function Vl(n,o){return Fn(n,new me.classes.URLSearchParams,Object.assign({visitor:function(i,r,a,c){return me.isNode&&v.isBuffer(i)?(this.append(r,i.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},o))}function ql(n){return v.matchAll(/\w+|\[(\w*)]/g,n).map(o=>o[0]==="[]"?"":o[1]||o[0])}function $l(n){const o={},i=Object.keys(n);let r;const a=i.length;let c;for(r=0;r<a;r++)c=i[r],o[c]=n[c];return o}function Oi(n){function o(i,r,a,c){let u=i[c++];if(u==="__proto__")return!0;const g=Number.isFinite(+u),_=c>=i.length;return u=!u&&v.isArray(a)?a.length:u,_?(v.hasOwnProp(a,u)?a[u]=[a[u],r]:a[u]=r,!g):((!a[u]||!v.isObject(a[u]))&&(a[u]=[]),o(i,r,a[u],c)&&v.isArray(a[u])&&(a[u]=$l(a[u])),!g)}if(v.isFormData(n)&&v.isFunction(n.entries)){const i={};return v.forEachEntry(n,(r,a)=>{o(ql(r),a,i,0)}),i}return null}function Gl(n,o,i){if(v.isString(n))try{return(o||JSON.parse)(n),v.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(n)}const jt={transitional:xi,adapter:["xhr","http","fetch"],transformRequest:[function(o,i){const r=i.getContentType()||"",a=r.indexOf("application/json")>-1,c=v.isObject(o);if(c&&v.isHTMLForm(o)&&(o=new FormData(o)),v.isFormData(o))return a?JSON.stringify(Oi(o)):o;if(v.isArrayBuffer(o)||v.isBuffer(o)||v.isStream(o)||v.isFile(o)||v.isBlob(o)||v.isReadableStream(o))return o;if(v.isArrayBufferView(o))return o.buffer;if(v.isURLSearchParams(o))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let g;if(c){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Vl(o,this.formSerializer).toString();if((g=v.isFileList(o))||r.indexOf("multipart/form-data")>-1){const _=this.env&&this.env.FormData;return Fn(g?{"files[]":o}:o,_&&new _,this.formSerializer)}}return c||a?(i.setContentType("application/json",!1),Gl(o)):o}],transformResponse:[function(o){const i=this.transitional||jt.transitional,r=i&&i.forcedJSONParsing,a=this.responseType==="json";if(v.isResponse(o)||v.isReadableStream(o))return o;if(o&&v.isString(o)&&(r&&!this.responseType||a)){const u=!(i&&i.silentJSONParsing)&&a;try{return JSON.parse(o)}catch(g){if(u)throw g.name==="SyntaxError"?V.from(g,V.ERR_BAD_RESPONSE,this,null,this.response):g}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:me.classes.FormData,Blob:me.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],n=>{jt.headers[n]={}});const Hl=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jl=n=>{const o={};let i,r,a;return n&&n.split(`
`).forEach(function(u){a=u.indexOf(":"),i=u.substring(0,a).trim().toLowerCase(),r=u.substring(a+1).trim(),!(!i||o[i]&&Hl[i])&&(i==="set-cookie"?o[i]?o[i].push(r):o[i]=[r]:o[i]=o[i]?o[i]+", "+r:r)}),o},Dr=Symbol("internals");function kt(n){return n&&String(n).trim().toLowerCase()}function Tn(n){return n===!1||n==null?n:v.isArray(n)?n.map(Tn):String(n)}function Wl(n){const o=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=i.exec(n);)o[r[1]]=r[2];return o}const Yl=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function fo(n,o,i,r,a){if(v.isFunction(r))return r.call(this,o,i);if(a&&(o=i),!!v.isString(o)){if(v.isString(r))return o.indexOf(r)!==-1;if(v.isRegExp(r))return r.test(o)}}function Zl(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,i,r)=>i.toUpperCase()+r)}function Kl(n,o){const i=v.toCamelCase(" "+o);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+i,{value:function(a,c,u){return this[r].call(this,o,a,c,u)},configurable:!0})})}class ye{constructor(o){o&&this.set(o)}set(o,i,r){const a=this;function c(g,_,y){const w=kt(_);if(!w)throw new Error("header name must be a non-empty string");const E=v.findKey(a,w);(!E||a[E]===void 0||y===!0||y===void 0&&a[E]!==!1)&&(a[E||_]=Tn(g))}const u=(g,_)=>v.forEach(g,(y,w)=>c(y,w,_));if(v.isPlainObject(o)||o instanceof this.constructor)u(o,i);else if(v.isString(o)&&(o=o.trim())&&!Yl(o))u(Jl(o),i);else if(v.isHeaders(o))for(const[g,_]of o.entries())c(_,g,r);else o!=null&&c(i,o,r);return this}get(o,i){if(o=kt(o),o){const r=v.findKey(this,o);if(r){const a=this[r];if(!i)return a;if(i===!0)return Wl(a);if(v.isFunction(i))return i.call(this,a,r);if(v.isRegExp(i))return i.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,i){if(o=kt(o),o){const r=v.findKey(this,o);return!!(r&&this[r]!==void 0&&(!i||fo(this,this[r],r,i)))}return!1}delete(o,i){const r=this;let a=!1;function c(u){if(u=kt(u),u){const g=v.findKey(r,u);g&&(!i||fo(r,r[g],g,i))&&(delete r[g],a=!0)}}return v.isArray(o)?o.forEach(c):c(o),a}clear(o){const i=Object.keys(this);let r=i.length,a=!1;for(;r--;){const c=i[r];(!o||fo(this,this[c],c,o,!0))&&(delete this[c],a=!0)}return a}normalize(o){const i=this,r={};return v.forEach(this,(a,c)=>{const u=v.findKey(r,c);if(u){i[u]=Tn(a),delete i[c];return}const g=o?Zl(c):String(c).trim();g!==c&&delete i[c],i[g]=Tn(a),r[g]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const i=Object.create(null);return v.forEach(this,(r,a)=>{r!=null&&r!==!1&&(i[a]=o&&v.isArray(r)?r.join(", "):r)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,i])=>o+": "+i).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...i){const r=new this(o);return i.forEach(a=>r.set(a)),r}static accessor(o){const r=(this[Dr]=this[Dr]={accessors:{}}).accessors,a=this.prototype;function c(u){const g=kt(u);r[g]||(Kl(a,u),r[g]=!0)}return v.isArray(o)?o.forEach(c):c(o),this}}ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(ye.prototype,({value:n},o)=>{let i=o[0].toUpperCase()+o.slice(1);return{get:()=>n,set(r){this[i]=r}}});v.freezeMethods(ye);function ho(n,o){const i=this||jt,r=o||i,a=ye.from(r.headers);let c=r.data;return v.forEach(n,function(g){c=g.call(i,c,a.normalize(),o?o.status:void 0)}),a.normalize(),c}function Ti(n){return!!(n&&n.__CANCEL__)}function Ot(n,o,i){V.call(this,n??"canceled",V.ERR_CANCELED,o,i),this.name="CanceledError"}v.inherits(Ot,V,{__CANCEL__:!0});function Ci(n,o,i){const r=i.config.validateStatus;!i.status||!r||r(i.status)?n(i):o(new V("Request failed with status code "+i.status,[V.ERR_BAD_REQUEST,V.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function Xl(n){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return o&&o[1]||""}function Ql(n,o){n=n||10;const i=new Array(n),r=new Array(n);let a=0,c=0,u;return o=o!==void 0?o:1e3,function(_){const y=Date.now(),w=r[c];u||(u=y),i[a]=_,r[a]=y;let E=c,N=0;for(;E!==a;)N+=i[E++],E=E%n;if(a=(a+1)%n,a===c&&(c=(c+1)%n),y-u<o)return;const P=w&&y-w;return P?Math.round(N*1e3/P):void 0}}function e0(n,o){let i=0,r=1e3/o,a,c;const u=(y,w=Date.now())=>{i=w,a=null,c&&(clearTimeout(c),c=null),n.apply(null,y)};return[(...y)=>{const w=Date.now(),E=w-i;E>=r?u(y,w):(a=y,c||(c=setTimeout(()=>{c=null,u(a)},r-E)))},()=>a&&u(a)]}const Cn=(n,o,i=3)=>{let r=0;const a=Ql(50,250);return e0(c=>{const u=c.loaded,g=c.lengthComputable?c.total:void 0,_=u-r,y=a(_),w=u<=g;r=u;const E={loaded:u,total:g,progress:g?u/g:void 0,bytes:_,rate:y||void 0,estimated:y&&g&&w?(g-u)/y:void 0,event:c,lengthComputable:g!=null,[o?"download":"upload"]:!0};n(E)},i)},Ur=(n,o)=>{const i=n!=null;return[r=>o[0]({lengthComputable:i,total:n,loaded:r}),o[1]]},Br=n=>(...o)=>v.asap(()=>n(...o)),t0=me.hasStandardBrowserEnv?function(){const o=me.navigator&&/(msie|trident)/i.test(me.navigator.userAgent),i=document.createElement("a");let r;function a(c){let u=c;return o&&(i.setAttribute("href",u),u=i.href),i.setAttribute("href",u),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return r=a(window.location.href),function(u){const g=v.isString(u)?a(u):u;return g.protocol===r.protocol&&g.host===r.host}}():function(){return function(){return!0}}(),n0=me.hasStandardBrowserEnv?{write(n,o,i,r,a,c){const u=[n+"="+encodeURIComponent(o)];v.isNumber(i)&&u.push("expires="+new Date(i).toGMTString()),v.isString(r)&&u.push("path="+r),v.isString(a)&&u.push("domain="+a),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function o0(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function r0(n,o){return o?n.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):n}function Li(n,o){return n&&!o0(o)?r0(n,o):o}const jr=n=>n instanceof ye?{...n}:n;function pt(n,o){o=o||{};const i={};function r(y,w,E){return v.isPlainObject(y)&&v.isPlainObject(w)?v.merge.call({caseless:E},y,w):v.isPlainObject(w)?v.merge({},w):v.isArray(w)?w.slice():w}function a(y,w,E){if(v.isUndefined(w)){if(!v.isUndefined(y))return r(void 0,y,E)}else return r(y,w,E)}function c(y,w){if(!v.isUndefined(w))return r(void 0,w)}function u(y,w){if(v.isUndefined(w)){if(!v.isUndefined(y))return r(void 0,y)}else return r(void 0,w)}function g(y,w,E){if(E in o)return r(y,w);if(E in n)return r(void 0,y)}const _={url:c,method:c,data:c,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:g,headers:(y,w)=>a(jr(y),jr(w),!0)};return v.forEach(Object.keys(Object.assign({},n,o)),function(w){const E=_[w]||a,N=E(n[w],o[w],w);v.isUndefined(N)&&E!==g||(i[w]=N)}),i}const Ii=n=>{const o=pt({},n);let{data:i,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:c,headers:u,auth:g}=o;o.headers=u=ye.from(u),o.url=Si(Li(o.baseURL,o.url),n.params,n.paramsSerializer),g&&u.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):"")));let _;if(v.isFormData(i)){if(me.hasStandardBrowserEnv||me.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((_=u.getContentType())!==!1){const[y,...w]=_?_.split(";").map(E=>E.trim()).filter(Boolean):[];u.setContentType([y||"multipart/form-data",...w].join("; "))}}if(me.hasStandardBrowserEnv&&(r&&v.isFunction(r)&&(r=r(o)),r||r!==!1&&t0(o.url))){const y=a&&c&&n0.read(c);y&&u.set(a,y)}return o},i0=typeof XMLHttpRequest<"u",s0=i0&&function(n){return new Promise(function(i,r){const a=Ii(n);let c=a.data;const u=ye.from(a.headers).normalize();let{responseType:g,onUploadProgress:_,onDownloadProgress:y}=a,w,E,N,P,O;function b(){P&&P(),O&&O(),a.cancelToken&&a.cancelToken.unsubscribe(w),a.signal&&a.signal.removeEventListener("abort",w)}let x=new XMLHttpRequest;x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout;function F(){if(!x)return;const B=ye.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),W={data:!g||g==="text"||g==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:B,config:n,request:x};Ci(function(be){i(be),b()},function(be){r(be),b()},W),x=null}"onloadend"in x?x.onloadend=F:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(F)},x.onabort=function(){x&&(r(new V("Request aborted",V.ECONNABORTED,n,x)),x=null)},x.onerror=function(){r(new V("Network Error",V.ERR_NETWORK,n,x)),x=null},x.ontimeout=function(){let z=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const W=a.transitional||xi;a.timeoutErrorMessage&&(z=a.timeoutErrorMessage),r(new V(z,W.clarifyTimeoutError?V.ETIMEDOUT:V.ECONNABORTED,n,x)),x=null},c===void 0&&u.setContentType(null),"setRequestHeader"in x&&v.forEach(u.toJSON(),function(z,W){x.setRequestHeader(W,z)}),v.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),g&&g!=="json"&&(x.responseType=a.responseType),y&&([N,O]=Cn(y,!0),x.addEventListener("progress",N)),_&&x.upload&&([E,P]=Cn(_),x.upload.addEventListener("progress",E),x.upload.addEventListener("loadend",P)),(a.cancelToken||a.signal)&&(w=B=>{x&&(r(!B||B.type?new Ot(null,n,x):B),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(w),a.signal&&(a.signal.aborted?w():a.signal.addEventListener("abort",w)));const D=Xl(a.url);if(D&&me.protocols.indexOf(D)===-1){r(new V("Unsupported protocol "+D+":",V.ERR_BAD_REQUEST,n));return}x.send(c||null)})},a0=(n,o)=>{const{length:i}=n=n?n.filter(Boolean):[];if(o||i){let r=new AbortController,a;const c=function(y){if(!a){a=!0,g();const w=y instanceof Error?y:this.reason;r.abort(w instanceof V?w:new Ot(w instanceof Error?w.message:w))}};let u=o&&setTimeout(()=>{u=null,c(new V(`timeout ${o} of ms exceeded`,V.ETIMEDOUT))},o);const g=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(c):y.removeEventListener("abort",c)}),n=null)};n.forEach(y=>y.addEventListener("abort",c));const{signal:_}=r;return _.unsubscribe=()=>v.asap(g),_}},c0=function*(n,o){let i=n.byteLength;if(i<o){yield n;return}let r=0,a;for(;r<i;)a=r+o,yield n.slice(r,a),r=a},l0=async function*(n,o){for await(const i of u0(n))yield*c0(i,o)},u0=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const o=n.getReader();try{for(;;){const{done:i,value:r}=await o.read();if(i)break;yield r}}finally{await o.cancel()}},zr=(n,o,i,r)=>{const a=l0(n,o);let c=0,u,g=_=>{u||(u=!0,r&&r(_))};return new ReadableStream({async pull(_){try{const{done:y,value:w}=await a.next();if(y){g(),_.close();return}let E=w.byteLength;if(i){let N=c+=E;i(N)}_.enqueue(new Uint8Array(w))}catch(y){throw g(y),y}},cancel(_){return g(_),a.return()}},{highWaterMark:2})},Dn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Mi=Dn&&typeof ReadableStream=="function",d0=Dn&&(typeof TextEncoder=="function"?(n=>o=>n.encode(o))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Ai=(n,...o)=>{try{return!!n(...o)}catch{return!1}},p0=Mi&&Ai(()=>{let n=!1;const o=new Request(me.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!o}),Vr=64*1024,_o=Mi&&Ai(()=>v.isReadableStream(new Response("").body)),Ln={stream:_o&&(n=>n.body)};Dn&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(o=>{!Ln[o]&&(Ln[o]=v.isFunction(n[o])?i=>i[o]():(i,r)=>{throw new V(`Response type '${o}' is not supported`,V.ERR_NOT_SUPPORT,r)})})})(new Response);const f0=async n=>{if(n==null)return 0;if(v.isBlob(n))return n.size;if(v.isSpecCompliantForm(n))return(await new Request(me.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(v.isArrayBufferView(n)||v.isArrayBuffer(n))return n.byteLength;if(v.isURLSearchParams(n)&&(n=n+""),v.isString(n))return(await d0(n)).byteLength},h0=async(n,o)=>{const i=v.toFiniteNumber(n.getContentLength());return i??f0(o)},g0=Dn&&(async n=>{let{url:o,method:i,data:r,signal:a,cancelToken:c,timeout:u,onDownloadProgress:g,onUploadProgress:_,responseType:y,headers:w,withCredentials:E="same-origin",fetchOptions:N}=Ii(n);y=y?(y+"").toLowerCase():"text";let P=a0([a,c&&c.toAbortSignal()],u),O;const b=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let x;try{if(_&&p0&&i!=="get"&&i!=="head"&&(x=await h0(w,r))!==0){let W=new Request(o,{method:"POST",body:r,duplex:"half"}),ce;if(v.isFormData(r)&&(ce=W.headers.get("content-type"))&&w.setContentType(ce),W.body){const[be,G]=Ur(x,Cn(Br(_)));r=zr(W.body,Vr,be,G)}}v.isString(E)||(E=E?"include":"omit");const F="credentials"in Request.prototype;O=new Request(o,{...N,signal:P,method:i.toUpperCase(),headers:w.normalize().toJSON(),body:r,duplex:"half",credentials:F?E:void 0});let D=await fetch(O);const B=_o&&(y==="stream"||y==="response");if(_o&&(g||B&&b)){const W={};["status","statusText","headers"].forEach(_e=>{W[_e]=D[_e]});const ce=v.toFiniteNumber(D.headers.get("content-length")),[be,G]=g&&Ur(ce,Cn(Br(g),!0))||[];D=new Response(zr(D.body,Vr,be,()=>{G&&G(),b&&b()}),W)}y=y||"text";let z=await Ln[v.findKey(Ln,y)||"text"](D,n);return!B&&b&&b(),await new Promise((W,ce)=>{Ci(W,ce,{data:z,headers:ye.from(D.headers),status:D.status,statusText:D.statusText,config:n,request:O})})}catch(F){throw b&&b(),F&&F.name==="TypeError"&&/fetch/i.test(F.message)?Object.assign(new V("Network Error",V.ERR_NETWORK,n,O),{cause:F.cause||F}):V.from(F,F&&F.code,n,O)}}),wo={http:Ml,xhr:s0,fetch:g0};v.forEach(wo,(n,o)=>{if(n){try{Object.defineProperty(n,"name",{value:o})}catch{}Object.defineProperty(n,"adapterName",{value:o})}});const qr=n=>`- ${n}`,m0=n=>v.isFunction(n)||n===null||n===!1,Pi={getAdapter:n=>{n=v.isArray(n)?n:[n];const{length:o}=n;let i,r;const a={};for(let c=0;c<o;c++){i=n[c];let u;if(r=i,!m0(i)&&(r=wo[(u=String(i)).toLowerCase()],r===void 0))throw new V(`Unknown adapter '${u}'`);if(r)break;a[u||"#"+c]=r}if(!r){const c=Object.entries(a).map(([g,_])=>`adapter ${g} `+(_===!1?"is not supported by the environment":"is not available in the build"));let u=o?c.length>1?`since :
`+c.map(qr).join(`
`):" "+qr(c[0]):"as no adapter specified";throw new V("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return r},adapters:wo};function go(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ot(null,n)}function $r(n){return go(n),n.headers=ye.from(n.headers),n.data=ho.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Pi.getAdapter(n.adapter||jt.adapter)(n).then(function(r){return go(n),r.data=ho.call(n,n.transformResponse,r),r.headers=ye.from(r.headers),r},function(r){return Ti(r)||(go(n),r&&r.response&&(r.response.data=ho.call(n,n.transformResponse,r.response),r.response.headers=ye.from(r.response.headers))),Promise.reject(r)})}const Ni="1.7.7",Ao={};["object","boolean","number","function","string","symbol"].forEach((n,o)=>{Ao[n]=function(r){return typeof r===n||"a"+(o<1?"n ":" ")+n}});const Gr={};Ao.transitional=function(o,i,r){function a(c,u){return"[Axios v"+Ni+"] Transitional option '"+c+"'"+u+(r?". "+r:"")}return(c,u,g)=>{if(o===!1)throw new V(a(u," has been removed"+(i?" in "+i:"")),V.ERR_DEPRECATED);return i&&!Gr[u]&&(Gr[u]=!0,console.warn(a(u," has been deprecated since v"+i+" and will be removed in the near future"))),o?o(c,u,g):!0}};function y0(n,o,i){if(typeof n!="object")throw new V("options must be an object",V.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let a=r.length;for(;a-- >0;){const c=r[a],u=o[c];if(u){const g=n[c],_=g===void 0||u(g,c,n);if(_!==!0)throw new V("option "+c+" must be "+_,V.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new V("Unknown option "+c,V.ERR_BAD_OPTION)}}const Eo={assertOptions:y0,validators:Ao},Xe=Eo.validators;class ut{constructor(o){this.defaults=o,this.interceptors={request:new Fr,response:new Fr}}async request(o,i){try{return await this._request(o,i)}catch(r){if(r instanceof Error){let a;Error.captureStackTrace?Error.captureStackTrace(a={}):a=new Error;const c=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?c&&!String(r.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+c):r.stack=c}catch{}}throw r}}_request(o,i){typeof o=="string"?(i=i||{},i.url=o):i=o||{},i=pt(this.defaults,i);const{transitional:r,paramsSerializer:a,headers:c}=i;r!==void 0&&Eo.assertOptions(r,{silentJSONParsing:Xe.transitional(Xe.boolean),forcedJSONParsing:Xe.transitional(Xe.boolean),clarifyTimeoutError:Xe.transitional(Xe.boolean)},!1),a!=null&&(v.isFunction(a)?i.paramsSerializer={serialize:a}:Eo.assertOptions(a,{encode:Xe.function,serialize:Xe.function},!0)),i.method=(i.method||this.defaults.method||"get").toLowerCase();let u=c&&v.merge(c.common,c[i.method]);c&&v.forEach(["delete","get","head","post","put","patch","common"],O=>{delete c[O]}),i.headers=ye.concat(u,c);const g=[];let _=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(i)===!1||(_=_&&b.synchronous,g.unshift(b.fulfilled,b.rejected))});const y=[];this.interceptors.response.forEach(function(b){y.push(b.fulfilled,b.rejected)});let w,E=0,N;if(!_){const O=[$r.bind(this),void 0];for(O.unshift.apply(O,g),O.push.apply(O,y),N=O.length,w=Promise.resolve(i);E<N;)w=w.then(O[E++],O[E++]);return w}N=g.length;let P=i;for(E=0;E<N;){const O=g[E++],b=g[E++];try{P=O(P)}catch(x){b.call(this,x);break}}try{w=$r.call(this,P)}catch(O){return Promise.reject(O)}for(E=0,N=y.length;E<N;)w=w.then(y[E++],y[E++]);return w}getUri(o){o=pt(this.defaults,o);const i=Li(o.baseURL,o.url);return Si(i,o.params,o.paramsSerializer)}}v.forEach(["delete","get","head","options"],function(o){ut.prototype[o]=function(i,r){return this.request(pt(r||{},{method:o,url:i,data:(r||{}).data}))}});v.forEach(["post","put","patch"],function(o){function i(r){return function(c,u,g){return this.request(pt(g||{},{method:o,headers:r?{"Content-Type":"multipart/form-data"}:{},url:c,data:u}))}}ut.prototype[o]=i(),ut.prototype[o+"Form"]=i(!0)});class Po{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(c){i=c});const r=this;this.promise.then(a=>{if(!r._listeners)return;let c=r._listeners.length;for(;c-- >0;)r._listeners[c](a);r._listeners=null}),this.promise.then=a=>{let c;const u=new Promise(g=>{r.subscribe(g),c=g}).then(a);return u.cancel=function(){r.unsubscribe(c)},u},o(function(c,u,g){r.reason||(r.reason=new Ot(c,u,g),i(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const i=this._listeners.indexOf(o);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const o=new AbortController,i=r=>{o.abort(r)};return this.subscribe(i),o.signal.unsubscribe=()=>this.unsubscribe(i),o.signal}static source(){let o;return{token:new Po(function(a){o=a}),cancel:o}}}function v0(n){return function(i){return n.apply(null,i)}}function b0(n){return v.isObject(n)&&n.isAxiosError===!0}const So={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(So).forEach(([n,o])=>{So[o]=n});function Ri(n){const o=new ut(n),i=di(ut.prototype.request,o);return v.extend(i,ut.prototype,o,{allOwnKeys:!0}),v.extend(i,o,null,{allOwnKeys:!0}),i.create=function(a){return Ri(pt(n,a))},i}const re=Ri(jt);re.Axios=ut;re.CanceledError=Ot;re.CancelToken=Po;re.isCancel=Ti;re.VERSION=Ni;re.toFormData=Fn;re.AxiosError=V;re.Cancel=re.CanceledError;re.all=function(o){return Promise.all(o)};re.spread=v0;re.isAxiosError=b0;re.mergeConfig=pt;re.AxiosHeaders=ye;re.formToJSON=n=>Oi(v.isHTMLForm(n)?new FormData(n):n);re.getAdapter=Pi.getAdapter;re.HttpStatusCode=So;re.default=re;var ki={exports:{}};(function(n){var o={};function i(c){return Math.floor(Math.abs(c)+.5)*(c>=0?1:-1)}function r(c,u,g){c=i(c*g),u=i(u*g);var _=(c-u)*2;_<0&&(_=-_-1);for(var y="";_>=32;)y+=String.fromCharCode((32|_&31)+63),_/=32;return y+=String.fromCharCode((_|0)+63),y}o.decode=function(c,u){for(var g=0,_=0,y=0,w=[],E=0,N=0,P=null,O,b,x=Math.pow(10,Number.isInteger(u)?u:5);g<c.length;){P=null,E=1,N=0;do P=c.charCodeAt(g++)-63,N+=(P&31)*E,E*=32;while(P>=32);O=N&1?(-N-1)/2:N/2,E=1,N=0;do P=c.charCodeAt(g++)-63,N+=(P&31)*E,E*=32;while(P>=32);b=N&1?(-N-1)/2:N/2,_+=O,y+=b,w.push([_/x,y/x])}return w},o.encode=function(c,u){if(!c.length)return"";for(var g=Math.pow(10,Number.isInteger(u)?u:5),_=r(c[0][0],0,g)+r(c[0][1],0,g),y=1;y<c.length;y++){var w=c[y],E=c[y-1];_+=r(w[0],E[0],g),_+=r(w[1],E[1],g)}return _};function a(c){for(var u=[],g=0;g<c.length;g++){var _=c[g].slice();u.push([_[1],_[0]])}return u}o.fromGeoJSON=function(c,u){if(c&&c.type==="Feature"&&(c=c.geometry),!c||c.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return o.encode(a(c.coordinates),u)},o.toGeoJSON=function(c,u){var g=o.decode(c,u);return{type:"LineString",coordinates:a(g)}},n.exports&&(n.exports=o)})(ki);var _0=ki.exports;const w0=ii(_0);async function E0(n){try{return(await re.post("https://valhalla1.openstreetmap.de/route",{locations:n.map(r=>({lat:r[1],lon:r[0],type:"through"})),costing:"pedestrian",costing_options:{pedestrian:{walking_speed:5.1,use_hills:.9,use_ferry:0,max_hiking_difficulty:6}},elevation_interval:30,units:"kilometers",shape_format:"polyline6",directions_type:"none"})).data}catch(o){console.error("Error fetching route from Valhalla:",o)}}function S0(n,o){const i=[];n.trip.legs.forEach(a=>{w0.decode(a.shape,6).forEach(u=>{i.push([u[1],u[0]])})});const r={type:"Feature",geometry:{type:"LineString",coordinates:i},properties:{}};o.getSource("route")?o.getSource("route").setData(r):(o.addSource("route",{type:"geojson",data:r}),o.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#007cbf","line-width":4}}))}function x0(n,o){const i={type:"FeatureCollection",features:n.pointFeatures};o.getSource("points")?o.getSource("points").setData(i):(o.addSource("points",{type:"geojson",data:i}),o.addLayer({id:"points",type:"circle",source:"points",paint:{"circle-radius":7,"circle-color":"#00A"}}))}const O0={onSetup(){return{coordinates:[],pointFeatures:[],selectedPointId:null}},onClick(n,o){if(o.lngLat){const i=this.map.queryRenderedFeatures(o.point,{layers:["points"],filter:["==","$type","Point"]});if(i.length>0){const r=i[0];n.selectedPointId=r.properties?.id||null,this.updateUIClasses({mouse:"move"})}else{const r={type:"Feature",geometry:{type:"Point",coordinates:[o.lngLat.lng,o.lngLat.lat]},properties:{id:String(Date.now())}};n.coordinates.push([o.lngLat.lng,o.lngLat.lat]),n.pointFeatures.push(r),this.updateUIClasses({mouse:"add"}),this.activateUIButton("custom_route"),this.map.fire("draw.custom_route.update",{coordinates:n.coordinates}),x0(n,this.map),n.coordinates.length>1&&E0(n.coordinates).then(a=>{S0(a,this.map)})}}},toDisplayFeatures(n,o){console.log("Add geo json: "+o)},onStop(n){this.updateUIClasses({mouse:"none"}),this.activateUIButton(),n.coordinates.length>0&&this.map.fire("draw.custom_route.complete",{coordinates:n.coordinates})}};let In=$e.modes;In=$c(In);In.custom_route=O0;$e.constants.classes.CONTROL_BASE="maplibregl-ctrl";$e.constants.classes.CONTROL_PREFIX="maplibregl-ctrl-";$e.constants.classes.CONTROL_GROUP="maplibregl-ctrl-group";const _n="#00F",Hr="#00A",Jr=new $e({displayControlsDefault:!1,clickBuffer:10,modes:In,controls:{polygon:!1,trash:!0,line_string:!0,point:!0,custom_route:!0},styles:[{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":_n,"line-dasharray":[.2,2],"line-width":4}},{id:"gl-draw-line-halo",type:"line",filter:["all",["==","$type","LineString"],["==","active","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#FFF","line-width":8,"line-opacity":.4}},{id:"gl-draw-line",type:"line",filter:["all",["==","$type","LineString"],["==","active","false"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":_n,"line-width":4,"line-opacity":.6}},{id:"gl-draw-polygon-midpoint-halo-active",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#FFF","circle-opacity":.6}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":5,"circle-color":_n,"circle-opacity":.6}},{id:"gl-draw-polygon-and-line-vertex-halo-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"]],paint:{"circle-radius":9,"circle-color":"#FFF"}},{id:"gl-draw-polygon-and-line-vertex-active",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"]],paint:{"circle-radius":7,"circle-color":_n}},{id:"points-circle-halo",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":9,"circle-color":"#FFF","circle-opacity":.6}},{id:"points-circle-active",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","active","true"]],paint:{"circle-radius":7,"circle-color":Hr}},{id:"points-circle-inactive",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"],["==","active","false"]],paint:{"circle-radius":7,"circle-color":Hr,"circle-opacity":.8}}]}),wn=8,T0=7.5,C0=Dt({__name:"WdMapView",setup(n,{expose:o}){o(),na(G=>({"163622f1":_.value,"9eeb1c2a":E.value,b18ef9e2:w.value,"611a2cb8":y.value}));const i=To(),r=oa(),a=ra(),c=Co(),u=Pn(),g=Zr("_q_l_"),_=Te("0"),y=Te("0"),w=Te("0"),E=Te("0");g===void 0?console.error("MapView needs to be child of QLayout"):Kr(()=>{_.value=`${g.header.offset}px`,y.value=`${g.right.offset}px`,g.footer.offset<window.innerHeight-250&&(w.value=`${g.footer.offset}px`),E.value=`${g.left.offset}px`,console.debug("Layout offsets changed: (top, right, bottom, left): ",_.value,y.value,w.value,E.value)});const N=Te(null),P=Fc(()=>{u.map?.resize()},50);jc(N,()=>{P()});function O(G){console.debug(`Maplibre version ${G.map.version} loaded`),G.map.scrollZoom.setWheelZoomRate(.003),W(G),G.map.on("mouseenter","wd-huts",F),G.map.on("mouseleave","wd-huts",D),G.map.on("click","wd-huts",x),console.debug("Map controls added.",a.query.draw),"draw"in a.query&&(G.map.addControl(Jr),a.query.draw=="route"&&Jr.changeMode("custom_route"))}const b=Te(void 0);function x(G){if(console.debug("Hut layer clicked."),G.target.getZoom()>wn){let _e=G.features?.[0];if(console.debug("  Selected huts:",G.features?.map(Pe=>Pe.properties.slug)),_e){b.value!==void 0&&G.target.setFeatureState({source:"wd-huts",id:b.value.id},{selected:!1}),b.value?.id!=_e.id?(G.target.setFeatureState({source:"wd-huts",id:_e.id},{selected:!0}),b.value=_e):b.value=void 0;const Pe=_e.properties.slug;a.params.slug==Pe?r.push({name:"map",hash:a.hash,query:a.query}):r.push({name:"map-hut",params:{slug:Pe},hash:a.hash,query:a.query})}}}function F(G){G.target.getZoom()>wn&&(G.target.getCanvas().style.cursor="pointer")}function D(G){G.target.getZoom()>wn&&(G.target.getCanvas().style.cursor="")}const B="http://127.0.0.1:8000",z=B+"/static/huts/sprite";function W(G){console.debug("Style data changed event",G);const _e=G.map.getSprite();let Pe=!1;for(const zt of _e)zt.id=="wodore"&&(Pe=!0);Pe||(console.debug(`Add sprite 'wodore' from '${z}'`),G.map.addSprite("wodore",z))}const be={$q:i,router:r,route:a,basemapStore:c,mapRef:u,$layout:g,top:_,right:y,bottom:w,left:E,mapDiv:N,mapResize:P,onMapLoad:O,selectedHutFeature:b,onHutLayerClick:x,minHutClickZoom:wn,onLayerEnter:F,onLayerLeave:D,SPRITE_BASE_URL:B,_spriteUrl:z,onMapStyledata:W,mapCenter:[8.22,46.7],mapZoom:T0,get MglMap(){return sa},get MglNavigationControl(){return aa},get MglScaleControl(){return ca},get MglGeolocateControl(){return la},get MglAttributionControl(){return ua}};return Object.defineProperty(be,"__isScriptSetup",{enumerable:!1,value:!0}),be}}),L0={ref:"mapDiv",style:{height:"100vh"}};function I0(n,o,i,r,a,c){const u=Ac,g=vc;return he(),Me(pa,null,{default:Ce(()=>[dt("div",L0,[Oe(r.MglMap,{"onMap:load":r.onMapLoad,"onMap:styledata":r.onMapStyledata,hash:"p","map-style":r.basemapStore.getBasemap()?.style,zoom:r.mapZoom,"bearing-snap":15,center:r.mapCenter,"attribution-control":!1,"min-zoom":7,"max-zoom":20,"max-bounds":[3.6,43,18.7,49.7]},{default:Ce(()=>[Oe(u,{position:r.$q.platform.is.mobile?"bottom-right":"top-left",direction:r.$q.platform.is.mobile?"left":"right",offset:[(r.$q.platform.is.mobile,14),r.$q.platform.is.mobile?20:14]},null,8,["position","direction","offset"]),Oe(g,{position:"top-left",direction:"down",offset:[(r.$q.platform.is.mobile,14),r.$q.platform.is.mobile?14:68]},null,8,["offset"]),Oe(r.MglGeolocateControl),Oe(r.MglNavigationControl,{"show-zoom":!1}),Oe(r.MglAttributionControl,{position:r.$q.platform.is.mobile?"bottom-left":"bottom-right"},null,8,["position"]),Oe(r.MglScaleControl)]),_:1},8,["map-style"])],512)]),_:1})}const V0=Ut(C0,[["render",I0],["__file","WdMapView.vue"]]);export{V0 as default};
