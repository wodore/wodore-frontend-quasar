import{C as w,D as P,G as L,j as u,c as T,u as D,d as N,r as x,aZ as G,g as Z,k as J,aG as X,a_ as K,q as b,Q as I,t as W,af as ee,P as H,i as Q,h as B,v as te,y as R,E as q,F as S,H as v,a9 as oe,N as ae,aa as se,_ as A,z as le,A as ne,L as ie,ai as re,p as ce,a$ as ue,J as O,b0 as de,b1 as pe,M as fe,R as me,S as ge,B as E,I as m,b2 as he}from"./index-BtPhEAjX.js";import{L as ve,_ as _e,j as ye,F as be,c as we,C as xe}from"./vue-maplibre-gl.es-dIdRfGzE.js";import{Q as Se}from"./QTooltip-DKkM2d4q.js";import"./_commonjsHelpers-C4iS2aBk.js";const ke={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$e=L("path",{fill:"currentColor",d:"M17 8h-7V6a2 2 0 0 1 4 0a1 1 0 0 0 2 0a4 4 0 0 0-8 0v2H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m1 11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"},null,-1),Ce=L("path",{fill:"currentColor",d:"M12 12a3 3 0 1 0 3 3a3 3 0 0 0-3-3m0 4a1 1 0 1 1 1-1a1 1 0 0 1-1 1"},null,-1),Me=[$e,Ce];function qe(e,t){return w(),P("svg",ke,[...Me])}const Le={name:"eva-unlock-outline",render:qe},ze={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},je=L("circle",{cx:"12",cy:"15",r:"1",fill:"currentColor"},null,-1),Be=L("path",{fill:"currentColor",d:"M17 8h-1V6.11a4 4 0 1 0-8 0V8H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m-7-1.89A2.06 2.06 0 0 1 12 4a2.06 2.06 0 0 1 2 2.11V8h-4ZM12 18a3 3 0 1 1 3-3a3 3 0 0 1-3 3"},null,-1),Ve=[je,Be];function Pe(e,t){return w(),P("svg",ze,[...Ve])}const Ie={name:"eva-lock-fill",render:Pe},Qe=["top","right","bottom","left"],F={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Qe.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Re(e,t){return{formClass:u(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:u(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:u(()=>{if(e.externalLabel===!0){const o=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(o===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const Ae=["up","right","down","left"],Oe=["left","center","right"],Ee=T({name:"QFab",props:{...F,...D,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...F.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>Ae.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Oe.includes(e)}},emits:N,setup(e,{slots:t}){const o=x(null),l=x(e.modelValue===!0),i=G(),{proxy:{$q:g}}=Z(),{formClass:p,labelProps:n}=Re(e,l),k=u(()=>e.persistent!==!0),{hide:$,toggle:r}=J({showing:l,hideOnRouteChange:k}),s=u(()=>({opened:l.value})),c=u(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${p.value}`+(l.value===!0?" q-fab--opened":" q-fab--closed")),d=u(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${l.value===!0?"opened":"closed"}`),_=u(()=>{const a={id:i.value,role:"menu"};return l.value!==!0&&(a["aria-hidden"]="true"),a}),f=u(()=>`q-fab__icon-holder  q-fab__icon-holder--${l.value===!0?"opened":"closed"}`);function C(a,y){const h=t[a],M=`q-fab__${a} absolute-full`;return h===void 0?b(H,{class:M,name:e[y]||g.iconSet.fab[y]}):b("div",{class:M},h(s.value))}function j(){const a=[];return e.hideIcon!==!0&&a.push(b("div",{class:f.value},[C("icon","icon"),C("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&a[n.value.action](b("div",n.value.data,t.label!==void 0?t.label(s.value):[e.label])),ee(t.tooltip,a)}return X(K,{showing:l,onChildClick(a){$(a),o.value!==null&&o.value.$el.focus()}}),()=>b("div",{class:c.value},[b(I,{ref:o,class:p.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":l.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i.value,onClick:r},j),b("div",{class:d.value,..._.value},W(t.default))])}}),Fe={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Te(){const{props:e,proxy:{$q:t}}=Z(),o=Q(te,B);if(o===B)return console.error("QPageSticky needs to be child of QLayout"),B;const l=u(()=>{const s=e.position;return{top:s.indexOf("top")!==-1,right:s.indexOf("right")!==-1,bottom:s.indexOf("bottom")!==-1,left:s.indexOf("left")!==-1,vertical:s==="top"||s==="bottom",horizontal:s==="left"||s==="right"}}),i=u(()=>o.header.offset),g=u(()=>o.right.offset),p=u(()=>o.footer.offset),n=u(()=>o.left.offset),k=u(()=>{let s=0,c=0;const d=l.value,_=t.lang.rtl===!0?-1:1;d.top===!0&&i.value!==0?c=`${i.value}px`:d.bottom===!0&&p.value!==0&&(c=`${-p.value}px`),d.left===!0&&n.value!==0?s=`${_*n.value}px`:d.right===!0&&g.value!==0&&(s=`${-_*g.value}px`);const f={transform:`translate(${s}, ${c})`};return e.offset&&(f.margin=`${e.offset[1]}px ${e.offset[0]}px`),d.vertical===!0?(n.value!==0&&(f[t.lang.rtl===!0?"right":"left"]=`${n.value}px`),g.value!==0&&(f[t.lang.rtl===!0?"left":"right"]=`${g.value}px`)):d.horizontal===!0&&(i.value!==0&&(f.top=`${i.value}px`),p.value!==0&&(f.bottom=`${p.value}px`)),f}),$=u(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function r(s){const c=W(s.default);return b("div",{class:$.value,style:k.value},e.expand===!0?c:[b("div",c)])}return{$layout:o,getStickyContent:r}}const Ze=T({name:"QPageSticky",props:Fe,setup(e,{slots:t}){const{getStickyContent:o}=Te();return()=>o(t)}}),We=["src"],He=R({__name:"WdMapStyleSwitchItem",props:{item:{}},setup(e){return(t,o)=>(w(),q(I,{round:"",style:{padding:"0"},ripple:!1,color:t.item.active?"accent-500":"primary-400"},{default:S(()=>[v(oe,{size:"55px"},{default:S(()=>[L("img",{style:{padding:"3px"},src:t.item.img},null,8,We)]),_:1}),v(Se,null,{default:S(()=>[ae(se(t.item.label),1)]),_:1})]),_:1},8,["color"]))}}),Ue=A(He,[["__file","WdMapStyleSwitchItem.vue"]]),Ye=R({__name:"WdMapStyleSwitcher",props:le({mapStyle:{},position:{default:"top-left"}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=x(!1),o=x(!1),l=Q(ve);function i(){if(n.value!==void 0){for(let r=0,s=n.value.length;r<s;r++)if(n.value[r].active)return n.value[r]}}function g(r){if(n.value===void 0)return!1;const s=i();if(s!==void 0&&r.name==s.name)return!1;l.value.setStyle(r.style,{diff:!1});for(let c=0,d=n.value.length;c<d;c++)n.value[c].active=!1;return r.active=!0,o.value||(t.value=!1),!0}function p(){o.value=!o.value}const n=ne(e,"modelValue");console.debug(e.mapStyle);const $="img:"+new URL("/assets/style-switch-B3q3o7S_.svg",import.meta.url).href;return(r,s)=>{const c=Ie,d=Le;return w(),q(Ze,{position:r.position,offset:[18,18],style:{"z-index":"5"}},{default:S(()=>[v(Ee,{ref:"fabStyleRef",push:"","vertical-actions-align":"left",icon:$,padding:"sm",direction:"right",persistent:"",color:t.value?"negative-300":"primary-100",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=_=>t.value=_)},{default:S(()=>[(w(!0),P(ie,null,re(n.value,(_,f)=>ce((w(),q(Ue,{tabindex:f,onClick:C=>g(_),key:_.name,item:_},null,8,["tabindex","onClick","item"])),[[ue,!0]])),128)),v(I,{round:"",flat:"",style:{padding:"0"},ripple:!1,color:o.value?"accent-500":"secondary-800",onClick:p},{default:S(()=>[v(H,null,{default:S(()=>[o.value?(w(),q(c,{key:0})):O("",!0),o.value?O("",!0):(w(),q(d,{key:1}))]),_:1})]),_:1},8,["color"])]),_:1},8,["color","modelValue"])]),_:1},8,["position"])}}}),De=A(Ye,[["__file","WdMapStyleSwitcher.vue"]]),Ne=11,Ge={"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],7,7,9,10,22,16],"text-font":["Open Sans Semibold"],"text-anchor":"bottom","icon-allow-overlap":!0,"text-allow-overlap":!1,"symbol-sort-key":["get","type_id"],"icon-overlap":"always","text-overlap":"never","text-optional":!0,"icon-image":["step",["zoom"],["coalesce",["image",["concat","wodore:simple/",["get","type_open_slug"]]],["image","wodore:simple/unknown"]],Ne,["coalesce",["image",["concat","wodore:detailed/",["get","type_open_slug"]]],["image","wodore:detailed/unknown"]]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,9,.3,20,2],visibility:"visible"},Je={"icon-opacity":["interpolate",["linear"],["zoom"],7,.7,12,.8,22,.85],"text-opacity":["step",["zoom"],0,9,1],"text-halo-width":2,"text-halo-color":"#ffffff","text-translate":["interpolate",["linear"],["zoom"],9,["literal",[0,-6]],20,["literal",[0,-40]]]};function Xe({name:e,tiles:t,attribution:o}){const l={version:8,sources:{},glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",layers:[{id:`${e}-raster-layer`,type:"raster",source:`${e}-raster-tiles`,minzoom:0,maxzoom:22}]};return l.sources[`${e}-raster-tiles`]={type:"raster",tiles:t,tileSize:256,attribution:o},l}const Ke="/assets/outdoor-v2-BR_lxvv7.png",et="/assets/satellite-C2H1DPJ2.png",tt="/assets/select_map-BPM0HDk0.png",ot="/assets/swiss-raster-D1bEQQjo.png",at="/assets/swiss-vector-BQsQYbTX.png",st=Xe({name:"swiss-raster",tiles:["https://wmts0.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts1.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts2.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts3.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts4.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts5.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts6.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts7.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts8.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts9.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg"],attribution:'<a href="https://www.swisstopo.admin.ch/" target="_blank">&copy; swisstop</a>'});function z(e){return new URL(Object.assign({"/src/assets/wodore-design/map/switch/outdoor-v2.png":Ke,"/src/assets/wodore-design/map/switch/satellite.png":et,"/src/assets/wodore-design/map/switch/select_map.png":tt,"/src/assets/wodore-design/map/switch/swiss-raster.png":ot,"/src/assets/wodore-design/map/switch/swiss-vector.png":at})[`/src/assets/wodore-design/map/switch/${e}`],import.meta.url).href}const lt=de("map-styles",()=>({styles:[{name:"swiss-vector",label:"Topo Vector",active:!0,img:z("swiss-vector.png"),style:"https://api.maptiler.com/maps/ch-swisstopo-lbm-vivid/style.json?key=yYYuZy3hwmMjY087FDvY"},{name:"swiss-raster",label:"Topo Raster",img:z("swiss-raster.png"),style:st},{name:"satellite",label:"Satellite",img:z("satellite.png"),style:"https://api.maptiler.com/maps/hybrid/style.json?key=cQX2iET1gmOW38bedbUh"},{name:"outdoor-osm",label:"Outdoor OSM",img:z("outdoor-v2.png"),style:"https://api.maptiler.com/maps/outdoor-v2/style.json?key=yYYuZy3hwmMjY087FDvY"}]})),V=8,nt=7.5,it=R({__name:"WdMapView",setup(e){pe(a=>({"1c3f564c":g.value,"4a267d22":k.value,"49fe9c86":n.value,"0a00ef3e":p.value}));const t=fe(),o=me(),l=lt(),i=Q("_q_l_"),g=x("0"),p=x("0"),n=x("0"),k=x("0");i===void 0?console.error("MapView needs to be child of QLayout"):ge(()=>{g.value=`${i.header.offset}px`,p.value=`${i.right.offset}px`,i.footer.offset<window.innerHeight-250&&(n.value=`${i.footer.offset}px`),k.value=`${i.left.offset}px`,console.debug("Layout offsets changed: (top, right, bottom, left): ",g.value,p.value,n.value,k.value)});const $=x("https://api.wodore.com/v1/huts/huts.geojson?lang=de&limit=5000&embed_all=false&embed_type=true&embed_owner=false&embed_capacity=false&embed_sources=false&include_elevation=false&include_name=true&flat=true");function r(a){console.debug(`Maplibre version ${a.map.version} loaded`),a.map.scrollZoom.setWheelZoomRate(.003),C(a)}function s(a){if(console.debug("Hut layer clicked."),a.target.getZoom()>V){let y=a.features?.[0];if(console.debug("  Selected huts:",a.features?.map(h=>h.properties.slug)),y){const h=y.properties.slug;o.params.slug==h?t.push({name:"map",hash:o.hash,query:o.query}):t.push({name:"map-hut",params:{slug:h},hash:o.hash,query:o.query})}}}function c(a){a.target.getZoom()>V&&(a.target.getCanvas().style.cursor="pointer")}function d(a){a.target.getZoom()>V&&(a.target.getCanvas().style.cursor="")}const f="https://api.wodore.com"+"/static/huts/sprite";function C(a){console.debug("Style data changed");const y=a.map.getSprite();let h=!1;for(const M of y)M.id=="wodore"&&(h=!0);h||(console.debug(`Add sprite 'wodore' from '${f}'`),a.map.addSprite("wodore",f))}const j=[8.22,46.7];return(a,y)=>{const h=De,M=E("MglGeolocationControl"),U=E("MglGeoJsonSource");return w(),q(m(xe),{language:"de","onMap:styledata":C,"onMap:load":r,hash:"p",zoom:nt,center:j,"map-style":m(l).styles[0].style,style:{position:"fixed",right:"0px",top:"0",bottom:"0",left:"0"}},{default:S(()=>[v(h,{modelValue:m(l).styles,"onUpdate:modelValue":y[0]||(y[0]=Y=>m(l).styles=Y),"map-style":m(l).styles[0]},null,8,["modelValue","map-style"]),v(M),v(m(_e)),v(m(ye)),v(m(be),{"map-styles":m(l).styles,"map-style":m(l).styles[0],position:"top-right"},null,8,["map-styles","map-style"]),v(U,{"source-id":"huts",data:$.value},{default:S(()=>[v(m(we),{onClick:he(s,["prevent"]),onMouseenter:c,onMouseleave:d,layout:m(Ge),paint:m(Je),"layer-id":"huts"},null,8,["layout","paint"])]),_:1},8,["data"])]),_:1},8,["map-style"])}}}),pt=A(it,[["__file","WdMapView.vue"]]);export{pt as default};
