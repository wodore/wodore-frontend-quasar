import{a2 as ye,a3 as q,a4 as x,a5 as Se,a6 as P,a7 as j,bf as J,bg as B,a8 as F,aa as I,a9 as pe,h as D,z as N,B as A,A as Z,D as y,H as R,bh as V,C as ee,aT as Ce,x as X,aX as Oe,bi as Te,bj as qe,j as _e,r as g,l as we,s as z,y as _,bk as Ee,b7 as Me,b6 as Pe,aO as Ae,bl as $,bm as te}from"./index-SCrZ0887.js";import{u as De}from"./use-hydration-C-M8TFf6.js";import{c as He}from"./selection-FnpNi18x.js";const Q={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},je=Object.keys(Q);Q.all=!0;function le(t){const i={};for(const n of je)t[n]===!0&&(i[n]=!0);return Object.keys(i).length===0?Q:(i.horizontal===!0?i.left=i.right=!0:i.left===!0&&i.right===!0&&(i.horizontal=!0),i.vertical===!0?i.up=i.down=!0:i.up===!0&&i.down===!0&&(i.vertical=!0),i.horizontal===!0&&i.vertical===!0&&(i.all=!0),i)}const Be=["INPUT","TEXTAREA"];function re(t,i){return i.event===void 0&&t.target!==void 0&&t.target.draggable!==!0&&typeof i.handler=="function"&&Be.includes(t.target.nodeName.toUpperCase())===!1&&(t.qClonedBy===void 0||t.qClonedBy.indexOf(i.uid)===-1)}function L(t,i,n){const v=F(t);let e,r=v.left-i.event.x,o=v.top-i.event.y,l=Math.abs(r),u=Math.abs(o);const s=i.direction;s.horizontal===!0&&s.vertical!==!0?e=r<0?"left":"right":s.horizontal!==!0&&s.vertical===!0?e=o<0?"up":"down":s.up===!0&&o<0?(e="up",l>u&&(s.left===!0&&r<0?e="left":s.right===!0&&r>0&&(e="right"))):s.down===!0&&o>0?(e="down",l>u&&(s.left===!0&&r<0?e="left":s.right===!0&&r>0&&(e="right"))):s.left===!0&&r<0?(e="left",l<u&&(s.up===!0&&o<0?e="up":s.down===!0&&o>0&&(e="down"))):s.right===!0&&r>0&&(e="right",l<u&&(s.up===!0&&o<0?e="up":s.down===!0&&o>0&&(e="down")));let m=!1;if(e===void 0&&n===!1){if(i.event.isFirst===!0||i.event.lastDir===void 0)return{};e=i.event.lastDir,m=!0,e==="left"||e==="right"?(v.left-=r,l=0,r=0):(v.top-=o,u=0,o=0)}return{synthetic:m,payload:{evt:t,touch:i.event.mouse!==!0,mouse:i.event.mouse===!0,position:v,direction:e,isFirst:i.event.isFirst,isFinal:n===!0,duration:Date.now()-i.event.time,distance:{x:l,y:u},offset:{x:r,y:o},delta:{x:v.left-i.event.lastX,y:v.top-i.event.lastY}}}}let Ie=0;const oe=ye({name:"touch-pan",beforeMount(t,{value:i,modifiers:n}){if(n.mouse!==!0&&q.has.touch!==!0)return;function v(r,o){n.mouse===!0&&o===!0?pe(r):(n.stop===!0&&B(r),n.prevent===!0&&J(r))}const e={uid:"qvtp_"+Ie++,handler:i,modifiers:n,direction:le(n),noop:x,mouseStart(r){re(r,e)&&Se(r)&&(P(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(r,!0))},touchStart(r){if(re(r,e)){const o=r.target;P(e,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","passiveCapture"],[o,"touchend","end","passiveCapture"]]),e.start(r)}},start(r,o){if(q.is.firefox===!0&&j(t,!0),e.lastEvt=r,o===!0||n.stop===!0){if(e.direction.all!==!0&&(o!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const s=r.type.indexOf("mouse")!==-1?new MouseEvent(r.type,r):new TouchEvent(r.type,r);r.defaultPrevented===!0&&J(s),r.cancelBubble===!0&&B(s),Object.assign(s,{qKeyEvent:r.qKeyEvent,qClickOutside:r.qClickOutside,qAnchorHandled:r.qAnchorHandled,qClonedBy:r.qClonedBy===void 0?[e.uid]:r.qClonedBy.concat(e.uid)}),e.initialEvent={target:r.target,event:s}}B(r)}const{left:l,top:u}=F(r);e.event={x:l,y:u,time:Date.now(),mouse:o===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:l,lastY:u}},move(r){if(e.event===void 0)return;const o=F(r),l=o.left-e.event.x,u=o.top-e.event.y;if(l===0&&u===0)return;e.lastEvt=r;const s=e.event.mouse===!0,m=()=>{v(r,s);let h;n.preserveCursor!==!0&&n.preservecursor!==!0&&(h=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),s===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),He(),e.styleCleanup=S=>{if(e.styleCleanup=void 0,h!==void 0&&(document.documentElement.style.cursor=h),document.body.classList.remove("non-selectable"),s===!0){const O=()=>{document.body.classList.remove("no-pointer-events--children")};S!==void 0?setTimeout(()=>{O(),S()},50):O()}else S!==void 0&&S()}};if(e.event.detected===!0){e.event.isFirst!==!0&&v(r,e.event.mouse);const{payload:h,synthetic:S}=L(r,e,!1);h!==void 0&&(e.handler(h)===!1?e.end(r):(e.styleCleanup===void 0&&e.event.isFirst===!0&&m(),e.event.lastX=h.position.left,e.event.lastY=h.position.top,e.event.lastDir=S===!0?void 0:h.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||s===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){m(),e.event.detected=!0,e.move(r);return}const f=Math.abs(l),b=Math.abs(u);f!==b&&(e.direction.horizontal===!0&&f>b||e.direction.vertical===!0&&f<b||e.direction.up===!0&&f<b&&u<0||e.direction.down===!0&&f<b&&u>0||e.direction.left===!0&&f>b&&l<0||e.direction.right===!0&&f>b&&l>0?(e.event.detected=!0,e.move(r)):e.end(r,!0))},end(r,o){if(e.event!==void 0){if(I(e,"temp"),q.is.firefox===!0&&j(t,!1),o===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(L(r===void 0?e.lastEvt:r,e).payload);const{payload:l}=L(r===void 0?e.lastEvt:r,e,!0),u=()=>{e.handler(l)};e.styleCleanup!==void 0?e.styleCleanup(u):u()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(t.__qtouchpan=e,n.mouse===!0){const r=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";P(e,"main",[[t,"mousedown","mouseStart",`passive${r}`]])}q.has.touch===!0&&P(e,"main",[[t,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,i){const n=t.__qtouchpan;n!==void 0&&(i.oldValue!==i.value&&(typeof value!="function"&&n.end(),n.handler=i.value),n.direction=le(i.modifiers))},beforeUnmount(t){const i=t.__qtouchpan;i!==void 0&&(i.event!==void 0&&i.end(),I(i,"main"),I(i,"temp"),q.is.firefox===!0&&j(t,!1),i.styleCleanup!==void 0&&i.styleCleanup(),delete t.__qtouchpan)}}),ve=typeof ResizeObserver<"u",ie=ve===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},ae=D({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:i}){let n=null,v,e={width:-1,height:-1};function r(u){u===!0||t.debounce===0||t.debounce==="0"?o():n===null&&(n=setTimeout(o,t.debounce))}function o(){if(n!==null&&(clearTimeout(n),n=null),v){const{offsetWidth:u,offsetHeight:s}=v;(u!==e.width||s!==e.height)&&(e={width:u,height:s},i("resize",e))}}const{proxy:l}=R();if(l.trigger=r,ve===!0){let u;const s=m=>{v=l.$el.parentNode,v?(u=new ResizeObserver(r),u.observe(v),o()):m!==!0&&Z(()=>{s(!0)})};return N(()=>{s()}),A(()=>{n!==null&&clearTimeout(n),u!==void 0&&(u.disconnect!==void 0?u.disconnect():v&&u.unobserve(v))}),x}else{let u=function(){n!==null&&(clearTimeout(n),n=null),f!==void 0&&(f.removeEventListener!==void 0&&f.removeEventListener("resize",r,V.passive),f=void 0)},s=function(){u(),v&&v.contentDocument&&(f=v.contentDocument.defaultView,f.addEventListener("resize",r,V.passive),o())};const{isHydrated:m}=De();let f;return N(()=>{Z(()=>{v=l.$el,v&&s()})}),A(u),()=>{if(m.value===!0)return y("object",{class:"q--avoid-card-border",style:ie.style,tabindex:-1,type:"text/html",data:ie.url,"aria-hidden":"true",onLoad:s})}}}}),$e=D({props:["store","barStyle","verticalBarStyle","horizontalBarStyle"],setup(t){return()=>[y("div",{class:t.store.scroll.vertical.barClass.value,style:[t.barStyle,t.verticalBarStyle],"aria-hidden":"true",onMousedown:t.store.onVerticalMousedown}),y("div",{class:t.store.scroll.horizontal.barClass.value,style:[t.barStyle,t.horizontalBarStyle],"aria-hidden":"true",onMousedown:t.store.onHorizontalMousedown}),ee(y("div",{ref:t.store.scroll.vertical.ref,class:t.store.scroll.vertical.thumbClass.value,style:t.store.scroll.vertical.style.value,"aria-hidden":"true"}),t.store.thumbVertDir),ee(y("div",{ref:t.store.scroll.horizontal.ref,class:t.store.scroll.horizontal.thumbClass.value,style:t.store.scroll.horizontal.style.value,"aria-hidden":"true"}),t.store.thumbHorizDir)]}}),{passive:ne}=V,Le=["both","horizontal","vertical"],ke=D({name:"QScrollObserver",props:{axis:{type:String,validator:t=>Le.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:Ce},emits:["scroll"],setup(t,{emit:i}){const n={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let v=null,e,r;X(()=>t.scrollTarget,()=>{u(),l()});function o(){v!==null&&v();const f=Math.max(0,Te(e)),b=qe(e),h={top:f-n.position.top,left:b-n.position.left};if(t.axis==="vertical"&&h.top===0||t.axis==="horizontal"&&h.left===0)return;const S=Math.abs(h.top)>=Math.abs(h.left)?h.top<0?"up":"down":h.left<0?"left":"right";n.position={top:f,left:b},n.directionChanged=n.direction!==S,n.delta=h,n.directionChanged===!0&&(n.direction=S,n.inflectionPoint=n.position),i("scroll",{...n})}function l(){e=Oe(r,t.scrollTarget),e.addEventListener("scroll",s,ne),s(!0)}function u(){e!==void 0&&(e.removeEventListener("scroll",s,ne),e=void 0)}function s(f){if(f===!0||t.debounce===0||t.debounce==="0")o();else if(v===null){const[b,h]=t.debounce?[setTimeout(o,t.debounce),clearTimeout]:[requestAnimationFrame(o),cancelAnimationFrame];v=()=>{h(b),v=null}}}const{proxy:m}=R();return X(()=>m.$q.lang.rtl,o),N(()=>{r=m.$el.parentNode,l()}),A(()=>{v!==null&&v(),u()}),Object.assign(m,{trigger:s,getPosition:()=>n}),x}}),ue=["vertical","horizontal"],k={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},se={prevent:!0,mouse:!0,mouseAllDir:!0},ce=t=>t>=250?50:Math.ceil(t/5),Xe=D({name:"QScrollArea",props:{..._e,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],verticalOffset:{type:Array,default:[0,0]},horizontalOffset:{type:Array,default:[0,0]},contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(t,{slots:i,emit:n}){const v=g(!1),e=g(!1),r=g(!1),o={vertical:g(0),horizontal:g(0)},l={vertical:{ref:g(null),position:g(0),size:g(0)},horizontal:{ref:g(null),position:g(0),size:g(0)}},{proxy:u}=R(),s=we(t,u.$q);let m=null,f;const b=g(null),h=z(()=>"q-scrollarea"+(s.value===!0?" q-scrollarea--dark":""));Object.assign(o,{verticalInner:z(()=>o.vertical.value-t.verticalOffset[0]-t.verticalOffset[1]),horizontalInner:z(()=>o.horizontal.value-t.horizontalOffset[0]-t.horizontalOffset[1])}),l.vertical.percentage=z(()=>{const a=l.vertical.size.value-o.vertical.value;if(a<=0)return 0;const c=_(l.vertical.position.value/a,0,1);return Math.round(c*1e4)/1e4}),l.vertical.thumbHidden=z(()=>(t.visible===null?r.value:t.visible)!==!0&&v.value===!1&&e.value===!1||l.vertical.size.value<=o.vertical.value+1),l.vertical.thumbStart=z(()=>t.verticalOffset[0]+l.vertical.percentage.value*(o.verticalInner.value-l.vertical.thumbSize.value)),l.vertical.thumbSize=z(()=>Math.round(_(o.verticalInner.value*o.verticalInner.value/l.vertical.size.value,ce(o.verticalInner.value),o.verticalInner.value))),l.vertical.style=z(()=>({...t.thumbStyle,...t.verticalThumbStyle,top:`${l.vertical.thumbStart.value}px`,height:`${l.vertical.thumbSize.value}px`,right:`${t.horizontalOffset[1]}px`})),l.vertical.thumbClass=z(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.vertical.barClass=z(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(l.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),l.horizontal.percentage=z(()=>{const a=l.horizontal.size.value-o.horizontal.value;if(a<=0)return 0;const c=_(Math.abs(l.horizontal.position.value)/a,0,1);return Math.round(c*1e4)/1e4}),l.horizontal.thumbHidden=z(()=>(t.visible===null?r.value:t.visible)!==!0&&v.value===!1&&e.value===!1||l.horizontal.size.value<=o.horizontal.value+1),l.horizontal.thumbStart=z(()=>t.horizontalOffset[0]+l.horizontal.percentage.value*(o.horizontalInner.value-l.horizontal.thumbSize.value)),l.horizontal.thumbSize=z(()=>Math.round(_(o.horizontalInner.value*o.horizontalInner.value/l.horizontal.size.value,ce(o.horizontalInner.value),o.horizontalInner.value))),l.horizontal.style=z(()=>({...t.thumbStyle,...t.horizontalThumbStyle,[u.$q.lang.rtl===!0?"right":"left"]:`${l.horizontal.thumbStart.value}px`,width:`${l.horizontal.thumbSize.value}px`,bottom:`${t.verticalOffset[1]}px`})),l.horizontal.thumbClass=z(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),l.horizontal.barClass=z(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(l.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const S=z(()=>l.vertical.thumbHidden.value===!0&&l.horizontal.thumbHidden.value===!0?t.contentStyle:t.contentActiveStyle);function O(){const a={};return ue.forEach(c=>{const d=l[c];Object.assign(a,{[c+"Position"]:d.position.value,[c+"Percentage"]:d.percentage.value,[c+"Size"]:d.size.value,[c+"ContainerSize"]:o[c].value,[c+"ContainerInnerSize"]:o[c+"Inner"].value})}),a}const Y=Ee(()=>{const a=O();a.ref=u,n("scroll",a)},0);function U(a,c,d){if(ue.includes(a)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(a==="vertical"?te:$)(b.value,c,d)}function de({height:a,width:c}){let d=!1;o.vertical.value!==a&&(o.vertical.value=a,d=!0),o.horizontal.value!==c&&(o.horizontal.value=c,d=!0),d===!0&&w()}function fe({position:a}){let c=!1;l.vertical.position.value!==a.top&&(l.vertical.position.value=a.top,c=!0),l.horizontal.position.value!==a.left&&(l.horizontal.position.value=a.left,c=!0),c===!0&&w()}function he({height:a,width:c}){l.horizontal.size.value!==c&&(l.horizontal.size.value=c,w()),l.vertical.size.value!==a&&(l.vertical.size.value=a,w())}function K(a,c){const d=l[c];if(a.isFirst===!0){if(d.thumbHidden.value===!0)return;f=d.position.value,e.value=!0}else if(e.value!==!0)return;a.isFinal===!0&&(e.value=!1);const C=k[c],T=(d.size.value-o[c].value)/(o[c+"Inner"].value-d.thumbSize.value),M=a.distance[C.dist],H=f+(a.direction===C.dir?1:-1)*M*T;G(H,c)}function W(a,c){const d=l[c];if(d.thumbHidden.value!==!0){const C=c==="vertical"?t.verticalOffset[0]:t.horizontalOffset[0],T=a[k[c].offset]-C,M=d.thumbStart.value-C;if(T<M||T>M+d.thumbSize.value){const H=T-d.thumbSize.value/2,ge=_(H/(o[c+"Inner"].value-d.thumbSize.value),0,1);G(ge*Math.max(0,d.size.value-o[c].value),c)}d.ref.value!==null&&d.ref.value.dispatchEvent(new MouseEvent(a.type,a))}}function w(){v.value=!0,m!==null&&clearTimeout(m),m=setTimeout(()=>{m=null,v.value=!1},t.delay),t.onScroll!==void 0&&Y()}function G(a,c){b.value[k[c].scroll]=a}let p=null;function be(){p!==null&&clearTimeout(p),p=setTimeout(()=>{p=null,r.value=!0},u.$q.platform.is.ios?50:0)}function me(){p!==null&&(clearTimeout(p),p=null),r.value=!1}let E=null;X(()=>u.$q.lang.rtl,a=>{b.value!==null&&$(b.value,Math.abs(l.horizontal.position.value)*(a===!0?-1:1))}),Me(()=>{E={top:l.vertical.position.value,left:l.horizontal.position.value}}),Pe(()=>{if(E===null)return;const a=b.value;a!==null&&($(a,E.left),te(a,E.top))}),A(Y.cancel),Object.assign(u,{getScrollTarget:()=>b.value,getScroll:O,getScrollPosition:()=>({top:l.vertical.position.value,left:l.horizontal.position.value}),getScrollPercentage:()=>({top:l.vertical.percentage.value,left:l.horizontal.percentage.value}),setScrollPosition:U,setScrollPercentage(a,c,d){U(a,c*(l[a].size.value-o[a].value)*(a==="horizontal"&&u.$q.lang.rtl===!0?-1:1),d)}});const ze={scroll:l,thumbVertDir:[[oe,a=>{K(a,"vertical")},void 0,{vertical:!0,...se}]],thumbHorizDir:[[oe,a=>{K(a,"horizontal")},void 0,{horizontal:!0,...se}]],onVerticalMousedown(a){W(a,"vertical")},onHorizontalMousedown(a){W(a,"horizontal")}};return()=>y("div",{class:h.value,onMouseenter:be,onMouseleave:me},[y("div",{ref:b,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:t.tabindex!==void 0?t.tabindex:void 0},[y("div",{class:"q-scrollarea__content absolute",style:S.value},Ae(i.default,[y(ae,{debounce:0,onResize:he})])),y(ke,{axis:"both",onScroll:fe})]),y(ae,{debounce:0,onResize:de}),y($e,{store:ze,barStyle:t.barStyle,verticalBarStyle:t.verticalBarStyle,horizontalBarStyle:t.horizontalBarStyle})])}});export{Xe as Q,oe as T,ae as a,ke as b,le as g,re as s};
