import{C as _,D as O,G as j,y as A,E as S,F as B,H as C,a9 as J,N as K,aa as ee,J as z,Q as T,_ as E,j as d,c as W,u as te,d as ae,r as k,aY as oe,g as Z,k as se,aG as le,aZ as ne,q as x,t as Y,af as re,P as F,i as U,h as M,v as ie,a_ as ce,aN as ue,a$ as I,L as pe,ai as de,I as y,p as fe,b0 as me,b1 as ge,M as he,R as be,S as ve}from"./index-BGGYbZfO.js";import{Q as _e}from"./QTooltip-YK_OtsU8.js";import{u as D}from"./use-quasar-BxwluYQj.js";import{i as ye,A as we,C as xe,x as Se,O as ke,p as $e}from"./vue-maplibre-gl.es-CxkRcH2g.js";import"./_commonjsHelpers-C4iS2aBk.js";const Be={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ce=j("path",{fill:"currentColor",d:"M17 8h-7V6a2 2 0 0 1 4 0a1 1 0 0 0 2 0a4 4 0 0 0-8 0v2H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m1 11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1Z"},null,-1),qe=j("path",{fill:"currentColor",d:"M12 12a3 3 0 1 0 3 3a3 3 0 0 0-3-3m0 4a1 1 0 1 1 1-1a1 1 0 0 1-1 1"},null,-1),Le=[Ce,qe];function ze(e,t){return _(),O("svg",Be,[...Le])}const je={name:"eva-unlock-outline",render:ze},Pe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Me=j("circle",{cx:"12",cy:"15",r:"1",fill:"currentColor"},null,-1),Ie=j("path",{fill:"currentColor",d:"M17 8h-1V6.11a4 4 0 1 0-8 0V8H7a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3v-8a3 3 0 0 0-3-3m-7-1.89A2.06 2.06 0 0 1 12 4a2.06 2.06 0 0 1 2 2.11V8h-4ZM12 18a3 3 0 1 1 3-3a3 3 0 0 1-3 3"},null,-1),Re=[Me,Ie];function Ve(e,t){return _(),O("svg",Pe,[...Re])}const Qe={name:"eva-lock-fill",render:Ve},Oe=["src"],Ae=A({__name:"WdBasemapSwitchItem",props:{label:{},img:{},active:{type:Boolean},tooltip:{type:Boolean}},setup(e){return(t,s)=>(_(),S(T,{round:"",style:{padding:"0"},ripple:!1,color:t.active?"accent-500":"primary-400"},{default:B(()=>[C(J,{size:"55px"},{default:B(()=>[j("img",{style:{padding:"3px"},src:t.img},null,8,Oe)]),_:1}),t.tooltip?(_(),S(_e,{key:0},{default:B(()=>[K(ee(t.label),1)]),_:1})):z("",!0)]),_:1},8,["color"]))}}),Te=E(Ae,[["__file","WdBasemapSwitchItem.vue"]]),Ee=["top","right","bottom","left"],H={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Ee.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function He(e,t){return{formClass:d(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:d(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:d(()=>{if(e.externalLabel===!0){const s=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(s===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const We=["up","right","down","left"],Ze=["left","center","right"],Ye=W({name:"QFab",props:{...H,...te,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{...H.hideLabel,default:null},direction:{type:String,default:"right",validator:e=>We.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Ze.includes(e)}},emits:ae,setup(e,{slots:t}){const s=k(null),o=k(e.modelValue===!0),i=oe(),{proxy:{$q:l}}=Z(),{formClass:f,labelProps:p}=He(e,o),c=d(()=>e.persistent!==!0),{hide:u,toggle:w}=se({showing:o,hideOnRouteChange:c}),n=d(()=>({opened:o.value})),m=d(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${f.value}`+(o.value===!0?" q-fab--opened":" q-fab--closed")),r=d(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${o.value===!0?"opened":"closed"}`),g=d(()=>{const h={id:i.value,role:"menu"};return o.value!==!0&&(h["aria-hidden"]="true"),h}),b=d(()=>`q-fab__icon-holder  q-fab__icon-holder--${o.value===!0?"opened":"closed"}`);function L(h,a){const $=t[h],v=`q-fab__${h} absolute-full`;return $===void 0?x(F,{class:v,name:e[a]||l.iconSet.fab[a]}):x("div",{class:v},$(n.value))}function P(){const h=[];return e.hideIcon!==!0&&h.push(x("div",{class:b.value},[L("icon","icon"),L("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&h[p.value.action](x("div",p.value.data,t.label!==void 0?t.label(n.value):[e.label])),re(t.tooltip,h)}return le(ne,{showing:o,onChildClick(h){u(h),s.value!==null&&s.value.$el.focus()}}),()=>x("div",{class:m.value},[x(T,{ref:s,class:f.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i.value,onClick:w},P),x("div",{class:r.value,...g.value},Y(t.default))])}}),Fe={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Ue(){const{props:e,proxy:{$q:t}}=Z(),s=U(ie,M);if(s===M)return console.error("QPageSticky needs to be child of QLayout"),M;const o=d(()=>{const n=e.position;return{top:n.indexOf("top")!==-1,right:n.indexOf("right")!==-1,bottom:n.indexOf("bottom")!==-1,left:n.indexOf("left")!==-1,vertical:n==="top"||n==="bottom",horizontal:n==="left"||n==="right"}}),i=d(()=>s.header.offset),l=d(()=>s.right.offset),f=d(()=>s.footer.offset),p=d(()=>s.left.offset),c=d(()=>{let n=0,m=0;const r=o.value,g=t.lang.rtl===!0?-1:1;r.top===!0&&i.value!==0?m=`${i.value}px`:r.bottom===!0&&f.value!==0&&(m=`${-f.value}px`),r.left===!0&&p.value!==0?n=`${g*p.value}px`:r.right===!0&&l.value!==0&&(n=`${-g*l.value}px`);const b={transform:`translate(${n}, ${m})`};return e.offset&&(b.margin=`${e.offset[1]}px ${e.offset[0]}px`),r.vertical===!0?(p.value!==0&&(b[t.lang.rtl===!0?"right":"left"]=`${p.value}px`),l.value!==0&&(b[t.lang.rtl===!0?"left":"right"]=`${l.value}px`)):r.horizontal===!0&&(i.value!==0&&(b.top=`${i.value}px`),f.value!==0&&(b.bottom=`${f.value}px`)),b}),u=d(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function w(n){const m=Y(n.default);return x("div",{class:u.value,style:c.value},e.expand===!0?m:[x("div",m)])}return{$layout:s,getStickyContent:w}}const De=W({name:"QPageSticky",props:Fe,setup(e,{slots:t}){const{getStickyContent:s}=Ue();return()=>s(t)}}),Ne="/assets/oe-raster-EIpPqIBW.png",Xe="/assets/outdoor-v2-BR_lxvv7.png",Ge="/assets/satellite-C2H1DPJ2.png",Je="/assets/select_map-BPM0HDk0.png",Ke="/assets/swiss-raster-D1bEQQjo.png",et="/assets/swiss-vector-BQsQYbTX.png",tt=11,at={"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],7,7,9,10,22,16],"text-font":["Open Sans Semibold"],"text-anchor":"bottom","icon-allow-overlap":!0,"text-allow-overlap":!1,"symbol-sort-key":["get","type_id"],"icon-overlap":"always","text-overlap":"never","text-optional":!0,"icon-image":["step",["zoom"],["coalesce",["image",["concat","wodore:simple/",["get","type_open_slug"]]],["image","wodore:simple/unknown"]],tt,["coalesce",["image",["concat","wodore:detailed/",["get","type_open_slug"]]],["image","wodore:detailed/unknown"]]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,9,.3,20,2],visibility:"visible"},ot={"icon-opacity":["interpolate",["linear"],["zoom"],7,.7,12,.8,22,.85],"text-opacity":["step",["zoom"],0,9,1],"text-halo-width":2,"text-halo-color":"#ffffff","text-translate":["interpolate",["linear"],["zoom"],9,["literal",[0,-6]],20,["literal",[0,-40]]]};function N({name:e,tiles:t,attribution:s,tileSize:o=256}){const i={version:8,name:e,sources:{},glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",layers:[{id:`${e}-raster-layer`,type:"raster",source:`${e}-raster-tiles`,minzoom:0,maxzoom:22}]};return i.sources[`${e}-raster-tiles`]={type:"raster",tiles:t,tileSize:o,attribution:s},i}const st=N({name:"ch-swisstopo-raster",tiles:["https://wmts0.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts1.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts2.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts3.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts4.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts5.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts6.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts7.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts8.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg","https://wmts9.geo.admin.ch/1.0.0/ch.swisstopo.pixelkarte-farbe/default/current/3857/{z}/{x}/{y}.jpeg"],attribution:'<a href="https://www.swisstopo.admin.ch/" target="_blank">&copy; swisstop</a>'}),R="bmaphidpi",V="jpeg",lt=N({name:"oe-raster",tiles:["https://maps1.wien.gv.at/basemap/"+R+"/normal/google3857/{z}/{y}/{x}."+V,"https://maps2.wien.gv.at/basemap/"+R+"/normal/google3857/{z}/{y}/{x}."+V,"https://maps3.wien.gv.at/basemap/"+R+"/normal/google3857/{z}/{y}/{x}."+V],attribution:'<a href="https://www.swisstopo.admin.ch/" target="_blank">&copy; swisstop</a>',tileSize:512});function q(e){return new URL(Object.assign({"/src/assets/wodore-design/map/switch/oe-raster.png":Ne,"/src/assets/wodore-design/map/switch/outdoor-v2.png":Xe,"/src/assets/wodore-design/map/switch/satellite.png":Ge,"/src/assets/wodore-design/map/switch/select_map.png":Je,"/src/assets/wodore-design/map/switch/swiss-raster.png":Ke,"/src/assets/wodore-design/map/switch/swiss-vector.png":et})[`/src/assets/wodore-design/map/switch/${e}`],import.meta.url).href}const X=ce("basemap",()=>{const e=ye();function t(){for(const l of o)if(l.active)return l}function s(l,f=!1){const p=t();if(p!==void 0&&l.name==p.name&&!f)return console.debug("Active baselayer is already set."),!1;e.map?.setStyle(l.style,{diff:!0,transformStyle:(c,u)=>{const w=c!==void 0?c.layers.filter(g=>g.id.startsWith("wd-")):[],n=u.layers.concat(w),m=u.sources;if(c!==void 0)for(const[g,b]of Object.entries(c.sources))g.startsWith("wd-")&&(m[g]=b);const r={...u,sources:m,layers:n};return console.debug("new style",r),r}});for(const c of o)c.name==l.name?c.active=!0:c.active=!1;return I.set("basemapStyle",l),console.debug("Map layer is set to ",l.label),!0}const o=ue([{name:"CH swisstopo LBM Vivid",label:"Schweiz Topo Vector",active:!0,show:!0,img:q("swiss-vector.png"),style:"https://api.maptiler.com/maps/ch-swisstopo-lbm-vivid/style.json?key=yYYuZy3hwmMjY087FDvY",layers:{ways:{before:"Other place labels"},background:{before:"Building line"}}},{name:"ch-swisstopo-raster",label:"Schweiz Topo Raster",show:!0,img:q("swiss-raster.png"),style:st,layers:{ways:{before:void 0},background:{before:void 0}}},{name:"Satellite Hybrid",label:"Satellite",show:!0,img:q("satellite.png"),style:"https://api.maptiler.com/maps/hybrid/style.json?key=cQX2iET1gmOW38bedbUh",layers:{ways:{before:"Tunnel"},background:{before:"State labels"}}},{name:"outdoor-osm",label:"Outdoor OSM",show:!1,img:q("outdoor-v2.png"),style:"https://api.maptiler.com/maps/outdoor-v2/style.json?key=yYYuZy3hwmMjY087FDvY",layers:{background:{before:"Contour index"},ways:{before:"Park"}}},{name:"oe-vector",label:"Östereich Topo Vector",active:!0,show:!1,img:q("swiss-vector.png"),style:"styles/basemapv-bmapv-3857-resources-styles-root.json",layers:{ways:{before:void 0},background:{before:void 0}}},{name:"oe-raster",label:"Östereich Topo Raster",show:!1,img:q("oe-raster.png"),style:lt,layers:{ways:{before:void 0},background:{before:void 0}}}]),i=I.hasItem("basemapStyle")?I.getItem("basemapStyle"):o[0];return s(i),{basemaps:o,setBasemap:s,getBasemap:t}}),nt=A({__name:"WdBasemapSwitch",props:{position:{default:"top-left"},direction:{default:"right"}},setup(e){const t=X(),s=D(),o=k(!1),i=k(!1);function l(c){const u=t.setBasemap(c);return!i.value&&u?(o.value=!1,!0):u}function f(){i.value=!i.value}const p="img:"+new URL("/assets/style-switch-Dvj_H7Y5.svg",import.meta.url).href;return(c,u)=>{const w=Te,n=Qe,m=je;return _(),S(De,{position:c.position,offset:[18,24],style:{"z-index":"5"}},{default:B(()=>[C(Ye,{ref:"fabStyleRef",push:"","vertical-actions-align":"left",icon:p,padding:"sm",direction:c.direction,persistent:"",color:o.value?"negative-400":"primary-100",modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=r=>o.value=r)},{default:B(()=>[(_(!0),O(pe,null,de(y(t).basemaps,(r,g)=>fe((_(),S(w,{tabindex:g,onClick:b=>l(r),key:r.name,label:r.label,img:r.img,active:r.active,tooltip:y(s).platform.is.desktop},null,8,["tabindex","onClick","label","img","active","tooltip"])),[[me,r.show]])),128)),y(s).screen.gt.xs?(_(),S(T,{key:0,round:"",flat:"",style:{padding:"0"},ripple:!1,color:i.value?"accent-500":"secondary-800",onClick:f},{default:B(()=>[C(F,null,{default:B(()=>[i.value?(_(),S(n,{key:0})):z("",!0),i.value?z("",!0):(_(),S(m,{key:1}))]),_:1})]),_:1},8,["color"])):z("",!0)]),_:1},8,["direction","color","modelValue"])]),_:1},8,["position"])}}}),rt=E(nt,[["__file","WdBasemapSwitch.vue"]]),Q=8,it=7.5,ct=A({__name:"WdMapView",setup(e){ge(a=>({"2ea90158":f.value,b3193f38:u.value,"72c09170":c.value,"284f0d5f":p.value}));const t=D(),s=he(),o=be(),i=X(),l=U("_q_l_"),f=k("0"),p=k("0"),c=k("0"),u=k("0");l===void 0?console.error("MapView needs to be child of QLayout"):ve(()=>{f.value=`${l.header.offset}px`,p.value=`${l.right.offset}px`,l.footer.offset<window.innerHeight-250&&(c.value=`${l.footer.offset}px`),u.value=`${l.left.offset}px`,console.debug("Layout offsets changed: (top, right, bottom, left): ",f.value,p.value,c.value,u.value)});const w=k("https://api.wodore.com/v1/huts/huts.geojson?lang=de&limit=5000&embed_all=false&embed_type=true&embed_owner=false&embed_capacity=false&embed_sources=false&include_elevation=false&include_name=true&flat=true");function n(a){console.debug(`Maplibre version ${a.map.version} loaded`),a.map.scrollZoom.setWheelZoomRate(.003),P(a)}function m(a){if(console.debug("Hut layer clicked."),a.target.getZoom()>Q){let $=a.features?.[0];if(console.debug("  Selected huts:",a.features?.map(v=>v.properties.slug)),$){const v=$.properties.slug;o.params.slug==v?s.push({name:"map",hash:o.hash,query:o.query}):s.push({name:"map-hut",params:{slug:v},hash:o.hash,query:o.query})}}}function r(a){a.target.getZoom()>Q&&(a.target.getCanvas().style.cursor="pointer")}function g(a){a.target.getZoom()>Q&&(a.target.getCanvas().style.cursor="")}const L="https://api.wodore.com"+"/static/huts/sprite";function P(a){console.debug("Style data changed",a),console.debug("Huts layer:",a.map.getLayer("wd-huts")),a.map.getSource("wd-huts")===void 0&&a.map.addSource("wd-huts",{data:w.value,buffer:512,tolerance:.7,promoteId:"slug",type:"geojson"}),a.map.getLayer("wd-huts")===void 0&&(a.map.addLayer({layout:at,paint:ot,id:"wd-huts",type:"symbol",source:"wd-huts"}),a.map.on("mouseenter","wd-huts",r),a.map.on("mouseleave","wd-huts",g),a.map.on("click","wd-huts",m));const $=a.map.getSprite();let v=!1;for(const G of $)G.id=="wodore"&&(v=!0);v||(console.debug(`Add sprite 'wodore' from '${L}'`),a.map.addSprite("wodore",L))}const h=[8.22,46.7];return(a,$)=>{const v=rt;return _(),S(y($e),{"onMap:styledata":P,"onMap:load":n,hash:"p","map-style":y(i).getBasemap()?.style,zoom:it,center:h,"attribution-control":!1},{default:B(()=>[C(v,{position:"bottom-right",direction:"left"}),C(y(we)),y(t).platform.is.desktop?(_(),S(y(xe),{key:0})):z("",!0),C(y(Se)),C(y(ke),{position:"bottom-right"})]),_:1},8,["map-style"])}}}),gt=E(ct,[["__file","WdMapView.vue"]]);export{gt as default};
