import{c as L,k as J,r as W,g as X,N as D,n as ee,o as re,h as R,a7 as te,m as ne,au as ie,w as ae,aJ as P}from"./index-CinwDIS5.js";import{g as oe,c as T,a as M}from"./_commonjsHelpers-C4iS2aBk.js";const se={ratio:[String,Number]};function ce(t,a){return L(()=>{const m=Number(t.ratio||(a!==void 0?a.value:void 0));return isNaN(m)!==!0&&m>0?{paddingBottom:`${100/m}%`}:null})}const ue=1.7778,xe=J({name:"QImg",props:{...se,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:ue},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:a,emit:m}){const v=W(t.initialRatio),C=ce(t,v),y=X(),{registerTimeout:z,removeTimeout:b}=D(),{registerTimeout:S,removeTimeout:h}=D(),c=L(()=>t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null),d=L(()=>t.errorSrc!==void 0?{src:t.errorSrc,__qerror:!0}:null),u=[W(null),W(c.value)],i=W(0),g=W(!1),n=W(!1),s=L(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),_=L(()=>({width:t.width,height:t.height})),e=L(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition q-img__image--`),r=L(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));function o(){if(h(),t.loadingShowDelay===0){g.value=!0;return}S(()=>{g.value=!0},t.loadingShowDelay)}function l(){h(),g.value=!1}function p({target:f}){P(y)===!1&&(b(),v.value=f.naturalHeight===0?.5:f.naturalWidth/f.naturalHeight,w(f,1))}function w(f,A){A===1e3||P(y)===!0||(f.complete===!0?B(f):z(()=>{w(f,A+1)},50))}function B(f){P(y)!==!0&&(i.value=i.value^1,u[i.value].value=null,l(),f.getAttribute("__qerror")!=="true"&&(n.value=!1),m("load",f.currentSrc||f.src))}function x(f){b(),l(),n.value=!0,u[i.value].value=d.value,u[i.value^1].value=c.value,m("error",f)}function q(f){const A=u[f].value,I={key:"img_"+f,class:e.value,style:r.value,alt:t.alt,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...A};return i.value===f?Object.assign(I,{class:I.class+"current",onLoad:p,onError:x}):I.class+="loaded",R("div",{class:"q-img__container absolute-full",key:"img"+f},R("img",I))}function H(){return g.value===!1?R("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ne(a[n.value===!0?"error":"default"])):R("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},a.loading!==void 0?a.loading():t.noSpinner===!0?void 0:[R(ie,{color:t.spinnerColor,size:t.spinnerSize})])}{let f=function(){ae(()=>t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null,A=>{b(),n.value=!1,A===null?(l(),u[i.value^1].value=c.value):o(),u[i.value].value=A},{immediate:!0})};ee.value===!0?re(f):f()}return()=>{const f=[];return C.value!==null&&f.push(R("div",{key:"filler",style:C.value})),u[0].value!==null&&f.push(q(0)),u[1].value!==null&&f.push(q(1)),f.push(R(te,{name:"q-transition--fade"},H)),R("div",{key:"main",class:s.value,style:_.value,role:"img","aria-label":t.alt},f)}}});var Q={exports:{}};function le(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var E={exports:{}};const fe={},ve=Object.freeze(Object.defineProperty({__proto__:null,default:fe},Symbol.toStringTag,{value:"Module"})),he=oe(ve);var K;function k(){return K||(K=1,function(t,a){(function(m,v){t.exports=v()})(T,function(){var m=m||function(v,C){var y;if(typeof window<"u"&&window.crypto&&(y=window.crypto),typeof self<"u"&&self.crypto&&(y=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(y=globalThis.crypto),!y&&typeof window<"u"&&window.msCrypto&&(y=window.msCrypto),!y&&typeof T<"u"&&T.crypto&&(y=T.crypto),!y&&typeof le=="function")try{y=he}catch{}var z=function(){if(y){if(typeof y.getRandomValues=="function")try{return y.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof y.randomBytes=="function")try{return y.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},b=Object.create||function(){function e(){}return function(r){var o;return e.prototype=r,o=new e,e.prototype=null,o}}(),S={},h=S.lib={},c=h.Base=function(){return{extend:function(e){var r=b(this);return e&&r.mixIn(e),(!r.hasOwnProperty("init")||this.init===r.init)&&(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=h.WordArray=c.extend({init:function(e,r){e=this.words=e||[],r!=C?this.sigBytes=r:this.sigBytes=e.length*4},toString:function(e){return(e||i).stringify(this)},concat:function(e){var r=this.words,o=e.words,l=this.sigBytes,p=e.sigBytes;if(this.clamp(),l%4)for(var w=0;w<p;w++){var B=o[w>>>2]>>>24-w%4*8&255;r[l+w>>>2]|=B<<24-(l+w)%4*8}else for(var x=0;x<p;x+=4)r[l+x>>>2]=o[x>>>2];return this.sigBytes+=p,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=v.ceil(r/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var r=[],o=0;o<e;o+=4)r.push(z());return new d.init(r,e)}}),u=S.enc={},i=u.Hex={stringify:function(e){for(var r=e.words,o=e.sigBytes,l=[],p=0;p<o;p++){var w=r[p>>>2]>>>24-p%4*8&255;l.push((w>>>4).toString(16)),l.push((w&15).toString(16))}return l.join("")},parse:function(e){for(var r=e.length,o=[],l=0;l<r;l+=2)o[l>>>3]|=parseInt(e.substr(l,2),16)<<24-l%8*4;return new d.init(o,r/2)}},g=u.Latin1={stringify:function(e){for(var r=e.words,o=e.sigBytes,l=[],p=0;p<o;p++){var w=r[p>>>2]>>>24-p%4*8&255;l.push(String.fromCharCode(w))}return l.join("")},parse:function(e){for(var r=e.length,o=[],l=0;l<r;l++)o[l>>>2]|=(e.charCodeAt(l)&255)<<24-l%4*8;return new d.init(o,r)}},n=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(g.stringify(e)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(e){return g.parse(unescape(encodeURIComponent(e)))}},s=h.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){typeof e=="string"&&(e=n.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var r,o=this._data,l=o.words,p=o.sigBytes,w=this.blockSize,B=w*4,x=p/B;e?x=v.ceil(x):x=v.max((x|0)-this._minBufferSize,0);var q=x*w,H=v.min(q*4,p);if(q){for(var f=0;f<q;f+=w)this._doProcessBlock(l,f);r=l.splice(0,q),o.sigBytes-=H}return new d.init(r,H)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});h.Hasher=s.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){s.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var r=this._doFinalize();return r},blockSize:16,_createHelper:function(e){return function(r,o){return new e.init(o).finalize(r)}},_createHmacHelper:function(e){return function(r,o){return new _.HMAC.init(e,o).finalize(r)}}});var _=S.algo={};return S}(Math);return m})}(E)),E.exports}var N={exports:{}},O;function de(){return O||(O=1,function(t,a){(function(m,v){t.exports=v(k())})(T,function(m){return function(v){var C=m,y=C.lib,z=y.WordArray,b=y.Hasher,S=C.algo,h=[],c=[];(function(){function i(_){for(var e=v.sqrt(_),r=2;r<=e;r++)if(!(_%r))return!1;return!0}function g(_){return(_-(_|0))*4294967296|0}for(var n=2,s=0;s<64;)i(n)&&(s<8&&(h[s]=g(v.pow(n,1/2))),c[s]=g(v.pow(n,1/3)),s++),n++})();var d=[],u=S.SHA256=b.extend({_doReset:function(){this._hash=new z.init(h.slice(0))},_doProcessBlock:function(i,g){for(var n=this._hash.words,s=n[0],_=n[1],e=n[2],r=n[3],o=n[4],l=n[5],p=n[6],w=n[7],B=0;B<64;B++){if(B<16)d[B]=i[g+B]|0;else{var x=d[B-15],q=(x<<25|x>>>7)^(x<<14|x>>>18)^x>>>3,H=d[B-2],f=(H<<15|H>>>17)^(H<<13|H>>>19)^H>>>10;d[B]=q+d[B-7]+f+d[B-16]}var A=o&l^~o&p,I=s&_^s&e^_&e,G=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),Z=(o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25),$=w+Z+A+c[B]+d[B],Y=G+I;w=p,p=l,l=o,o=r+$|0,r=e,e=_,_=s,s=$+Y|0}n[0]=n[0]+s|0,n[1]=n[1]+_|0,n[2]=n[2]+e|0,n[3]=n[3]+r|0,n[4]=n[4]+o|0,n[5]=n[5]+l|0,n[6]=n[6]+p|0,n[7]=n[7]+w|0},_doFinalize:function(){var i=this._data,g=i.words,n=this._nDataBytes*8,s=i.sigBytes*8;return g[s>>>5]|=128<<24-s%32,g[(s+64>>>9<<4)+14]=v.floor(n/4294967296),g[(s+64>>>9<<4)+15]=n,i.sigBytes=g.length*4,this._process(),this._hash},clone:function(){var i=b.clone.call(this);return i._hash=this._hash.clone(),i}});C.SHA256=b._createHelper(u),C.HmacSHA256=b._createHmacHelper(u)}(Math),m.SHA256})}(N)),N.exports}var U={exports:{}},j;function ge(){return j||(j=1,function(t,a){(function(m,v){t.exports=v(k())})(T,function(m){(function(){var v=m,C=v.lib,y=C.Base,z=v.enc,b=z.Utf8,S=v.algo;S.HMAC=y.extend({init:function(h,c){h=this._hasher=new h.init,typeof c=="string"&&(c=b.parse(c));var d=h.blockSize,u=d*4;c.sigBytes>u&&(c=h.finalize(c)),c.clamp();for(var i=this._oKey=c.clone(),g=this._iKey=c.clone(),n=i.words,s=g.words,_=0;_<d;_++)n[_]^=1549556828,s[_]^=909522486;i.sigBytes=g.sigBytes=u,this.reset()},reset:function(){var h=this._hasher;h.reset(),h.update(this._iKey)},update:function(h){return this._hasher.update(h),this},finalize:function(h){var c=this._hasher,d=c.finalize(h);c.reset();var u=c.finalize(this._oKey.clone().concat(d));return u}})})()})}(U)),U.exports}(function(t,a){(function(m,v,C){t.exports=v(k(),de(),ge())})(T,function(m){return m.HmacSHA256})})(Q);var ye=Q.exports;const me=M(ye);var V={exports:{}};(function(t,a){(function(m,v){t.exports=v(k())})(T,function(m){return function(){var v=m,C=v.lib,y=C.WordArray,z=v.enc;z.Base64={stringify:function(S){var h=S.words,c=S.sigBytes,d=this._map;S.clamp();for(var u=[],i=0;i<c;i+=3)for(var g=h[i>>>2]>>>24-i%4*8&255,n=h[i+1>>>2]>>>24-(i+1)%4*8&255,s=h[i+2>>>2]>>>24-(i+2)%4*8&255,_=g<<16|n<<8|s,e=0;e<4&&i+e*.75<c;e++)u.push(d.charAt(_>>>6*(3-e)&63));var r=d.charAt(64);if(r)for(;u.length%4;)u.push(r);return u.join("")},parse:function(S){var h=S.length,c=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var u=0;u<c.length;u++)d[c.charCodeAt(u)]=u}var i=c.charAt(64);if(i){var g=S.indexOf(i);g!==-1&&(h=g)}return b(S,h,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function b(S,h,c){for(var d=[],u=0,i=0;i<h;i++)if(i%4){var g=c[S.charCodeAt(i-1)]<<i%4*2,n=c[S.charCodeAt(i)]>>>6-i%4*2,s=g|n;d[u>>>2]|=s<<24-u%4*8,u++}return y.create(d,u)}}(),m.enc.Base64})})(V);var Se=V.exports;const pe=M(Se);function _e(t,a){return me(t,a).toString(pe).replace(/\+/g,"-").replace(/\//g,"_")}function F(t){const a=t.split("x");return[Math.abs(parseInt(a[0])),Math.abs(parseInt(a[1]))]}function Ce(t,a={size:"600x400"}){a.filters||(a.filters=[]);const m=a.trim?"/trim":"";let v="";if(a.cropStart&&a.cropStop)v="/"+a.cropStart+":"+a.cropStop;else if(a.cropStart){const n=F(a.size),s=F(a.cropStart);v="/"+a.cropStart+":"+(s[0]+n[0]).toString()+"x"+(s[1]+n[1]).toString()}a.focal&&a.filters?.push(`focal(${a.focal})`),a.quality&&a.filters?.push(`quality(${a.quality})`);const C=a.size?"/"+a.size:"",y=a.trim?"/fit":"",z=a.stretch?"/stretch":"",b=a.smart?"/smart":"",S=a.halign?"/"+a.halign:"",h=a.valign?"/"+a.valign:"",c=a.filters.length>0?"/filters:"+a.filters.join(":"):"",d="https://img.wodore.com",i=((n,s)=>n.split(s).filter(Boolean).join(s))(m+v+y+z+C+S+h+b+c+"/"+encodeURIComponent(t),"/");let g="unsafe";return a.unsafe||(g=_e(i,"4dBvaAemV3dwrjYcZ81GUeQ7nwErbZTQ")),d+"/"+g+"/"+i}export{xe as Q,Ce as g};
