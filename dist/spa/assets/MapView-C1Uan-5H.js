import{d as M,a2 as j,i as _,r as a,a3 as k,N as d,O as z,Q as C,R as g,f as t,W as s,_ as L}from"./index-CDfkDRAm.js";import{_ as Y,j as $,F as V,C as Z}from"./vue-maplibre-gl.es-_JT-6Co6.js";const O="https://api.wodore.com",E=M({__name:"MapView",setup(F){j(e=>({"38c618ef":n.value,"400d88a6":p.value,"93c8375e":r.value,"1f849b36":i.value}));const h=_("layout"),o=_("_q_l_"),n=a("0"),i=a("0"),r=a("0"),p=a("0");o===void 0?console.error("MapView needs to be child of QLayout"):k(()=>{n.value=`${o.header.offset}px`,i.value=`${o.right.offset}px`,r.value=`${o.footer.offset}px`,p.value=`${o.left.offset}px`,console.log("layout",o),console.log("layout2",h),o&&(console.log("layout top: ",n.value),console.log("layout right: ",i.value),console.log("layout bottom: ",r.value),console.log("layout left: ",p.value))});const v=a("https://api.wodore.com/v1/huts/huts.geojson?lang=de&limit=5000&embed_all=false&embed_type=true&embed_owner=false&embed_capacity=false&embed_sources=false&include_elevation=false&include_name=true&flat=true"),w={"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],7,7,9,10,22,16],"text-font":["Open Sans Semibold"],"text-anchor":"bottom","icon-allow-overlap":!0,"text-allow-overlap":!1,"symbol-sort-key":["get","type_id"],"icon-overlap":"always","text-overlap":"never","text-optional":!0,"icon-image":["step",["zoom"],["coalesce",["image",["concat","wodore:simple/",["get","type_open_slug"]]],["image","wodore:simple/unknown"]],11,["coalesce",["image",["concat","wodore:detailed/",["get","type_open_slug"]]],["image","wodore:detailed/unknown"]]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,9,.3,20,2],visibility:"visible"},b={"icon-opacity":["interpolate",["linear"],["zoom"],7,.7,12,.8,22,.85],"text-opacity":["step",["zoom"],0,9,1],"text-halo-width":2,"text-halo-color":"#ffffff","text-translate":["interpolate",["linear"],["zoom"],9,["literal",[0,-6]],20,["literal",[0,-40]]]},c=[{name:"swiss-vector",label:"Swisstopo",style:"https://api.maptiler.com/maps/ch-swisstopo-lbm-vivid/style.json?key=yYYuZy3hwmMjY087FDvY"},{name:"satellite",label:"Satellite",style:"https://api.maptiler.com/maps/hybrid/style.json?key=cQX2iET1gmOW38bedbUh"},{name:"outdoor-osm",label:"Outdoor OSM",style:"https://api.maptiler.com/maps/outdoor-v2/style.json?key=yYYuZy3hwmMjY087FDvY"}];function x(e){console.debug(`Maplibre version ${e.map.version} loaded`),e.map.scrollZoom.setWheelZoomRate(.003),y(e)}const f=O+"/static/huts/sprite";function y(e){console.debug("Style data changed");const m=e.map.getSprite();console.debug("Check sprite 'wodore' in ",m);let l=!1;for(const u of m)u.id=="wodore"&&(l=!0);l||(console.debug(`Add sprite 'wodore' from '${f}'`),e.map.addSprite("wodore",f))}return(e,m)=>{const l=d("MglGeolocationControl"),u=d("MglSymbolLayer"),S=d("MglGeoJsonSource");return z(),C(s(Z),{language:"de","onMap:styledata":y,"onMap:load":x,hash:"map",zoom:7.5,center:[8.22,46.7],"map-style":c[0].style,style:{position:"fixed",right:"0px",top:"0",bottom:"0",left:"0"}},{default:g(()=>[t(l),t(s(Y)),t(s($)),t(s(V),{"map-styles":c,"map-style":c[0],position:"top-left"},null,8,["map-style"]),t(S,{"source-id":"huts",data:v.value},{default:g(()=>[t(u,{layout:w,paint:b,"layer-id":"huts"})]),_:1},8,["data"])]),_:1},8,["map-style"])}}}),B=L(E,[["__file","MapView.vue"]]);export{B as default};
