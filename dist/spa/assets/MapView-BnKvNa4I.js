import{d as S,a2 as M,i as f,r as t,a3 as j,N as k,O as z,Q as C,R as y,f as a,W as l,_ as Y}from"./index-qT9Emee9.js";import{_ as Z,j as $,F as L,Z as V,c as O,C as E}from"./vue-maplibre-gl.es-BV5c0PQI.js";const F="https://api.wodore.com",R=S({__name:"MapView",setup(A){M(e=>({"3ef53536":i.value,"30237df7":p.value,b68287ca:r.value,"56babba8":n.value}));const _=f("layout"),o=f("_q_l_"),i=t("0"),n=t("0"),r=t("0"),p=t("0");o===void 0?console.error("MapView needs to be child of QLayout"):j(()=>{i.value=`${o.header.offset}px`,n.value=`${o.right.offset}px`,r.value=`${o.footer.offset}px`,p.value=`${o.left.offset}px`,console.log("layout",o),console.log("layout2",_),o&&(console.log("layout top: ",i.value),console.log("layout right: ",n.value),console.log("layout bottom: ",r.value),console.log("layout left: ",p.value))});const h=t("https://api.wodore.com/v1/huts/huts.geojson?lang=de&limit=5000&embed_all=false&embed_type=true&embed_owner=false&embed_capacity=false&embed_sources=false&include_elevation=false&include_name=true&flat=true"),g=t(null),v={"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],7,7,9,10,22,16],"text-font":["Open Sans Semibold"],"text-anchor":"bottom","icon-allow-overlap":!0,"text-allow-overlap":!1,"symbol-sort-key":["get","type_id"],"icon-overlap":"always","text-overlap":"never","text-optional":!0,"icon-image":["step",["zoom"],["coalesce",["image",["concat","wodore:simple/",["get","type_open_slug"]]],["image","wodore:simple/unknown"]],11,["coalesce",["image",["concat","wodore:detailed/",["get","type_open_slug"]]],["image","wodore:detailed/unknown"]]],"icon-size":["interpolate",["linear"],["zoom"],7,.1,9,.3,20,2],visibility:"visible"},w={"icon-opacity":["interpolate",["linear"],["zoom"],7,.7,12,.8,22,.85],"text-opacity":["step",["zoom"],0,9,1],"text-halo-width":2,"text-halo-color":"#ffffff","text-translate":["interpolate",["linear"],["zoom"],9,["literal",[0,-6]],20,["literal",[0,-40]]]},c=[{name:"swiss-vector",label:"Swisstopo",style:"https://api.maptiler.com/maps/ch-swisstopo-lbm-vivid/style.json?key=yYYuZy3hwmMjY087FDvY"},{name:"satellite",label:"Satellite",style:"https://api.maptiler.com/maps/hybrid/style.json?key=cQX2iET1gmOW38bedbUh"},{name:"outdoor-osm",label:"Outdoor OSM",style:"https://api.maptiler.com/maps/outdoor-v2/style.json?key=yYYuZy3hwmMjY087FDvY"}];function b(e){console.debug(`Maplibre version ${e.map.version} loaded`),e.map.scrollZoom.setWheelZoomRate(.003),u(e)}const d=F+"/static/huts/sprite";function u(e){console.debug("Style data changed");const m=e.map.getSprite();console.debug("Check sprite 'wodore' in ",m);let s=!1;for(const x of m)x.id=="wodore"&&(s=!0);s||(console.debug(`Add sprite 'wodore' from '${d}'`),e.map.addSprite("wodore",d))}return(e,m)=>{const s=k("MglGeolocationControl");return z(),C(l(E),{language:"de",ref_key:"map",ref:g,"onMap:styledata":u,"onMap:load":b,hash:"map",zoom:7.5,center:[8.22,46.7],"map-style":c[0].style,style:{position:"fixed",right:"0px",top:"0",bottom:"0",left:"0"}},{default:y(()=>[a(s),a(l(Z)),a(l($)),a(l(L),{"map-styles":c,"map-style":c[0],position:"top-left"},null,8,["map-style"]),a(l(V),{"source-id":"huts",data:h.value},{default:y(()=>[a(l(O),{layout:v,paint:w,"layer-id":"huts"})]),_:1},8,["data"])]),_:1},8,["map-style"])}}}),W=Y(R,[["__file","MapView.vue"]]);export{W as default};
