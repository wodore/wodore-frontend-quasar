import{c as Me,u as at,a as ot,d as lt,g as $e,e as nt,f as ut,i as rt,h as ue,r as y,j as u,k as it,l as st,w as _,o as qe,n as me,m as Te,p as Ve,q as Q,s as he,t as ct,v as dt,x as vt,y as U,z as Se,A as We,B as Le,C as k,D as P,E as q,F as x,G as re,H as p,Q as ie,I as Fe,J as S,K as ze,L as ft,_ as E,M as Oe,N as mt,O as ht,P as pt,R as gt,S as pe,T as bt,U as ge}from"./index-BFJ2FR6b.js";import{T as X,b as A,Q as yt,a as wt,_ as je,c as _t,d as be,e as ye,f as xt,g as kt}from"./QLayout-BWoej_J8.js";import{u as J}from"./use-quasar-lrKm7lJh.js";import"./use-hydration-CHDnoWmq.js";const we=150,De=Me({name:"QDrawer",inheritAttrs:!1,props:{...at,...ot,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...lt,"onLayout","miniState"],setup(e,{slots:l,emit:i,attrs:c}){const o=$e(),{proxy:{$q:v}}=o,n=nt(e,v),{preventBodyScroll:r}=vt(),{registerTimeout:M,removeTimeout:W}=ut(),a=rt(dt,ue);if(a===ue)return console.error("QDrawer needs to be child of QLayout"),ue;let g,f=null,b;const m=y(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),B=u(()=>e.mini===!0&&m.value!==!0),d=u(()=>B.value===!0?e.miniWidth:e.width),h=y(e.showIfAbove===!0&&m.value===!1?!0:e.modelValue===!0),j=u(()=>e.persistent!==!0&&(m.value===!0||Pe.value===!0));function w(t,s){if(Qe(),t!==!1&&a.animate(),$(0),m.value===!0){const C=a.instances[R.value];C!==void 0&&C.belowBreakpoint===!0&&C.hide(!1),L(1),a.isContainer.value!==!0&&r(!0)}else L(0),t!==!1&&oe(!1);M(()=>{t!==!1&&oe(!0),s!==!0&&i("show",t)},we)}function T(t,s){Ae(),t!==!1&&a.animate(),L(0),$(z.value*d.value),le(),s!==!0?M(()=>{i("hide",t)},we):W()}const{show:Y,hide:D}=it({showing:h,hideOnRouteChange:j,handleShow:w,handleHide:T}),{addToHistory:Qe,removeFromHistory:Ae}=st(h,D,j),N={belowBreakpoint:m,hide:D},V=u(()=>e.side==="right"),z=u(()=>(v.lang.rtl===!0?-1:1)*(V.value===!0?1:-1)),ce=y(0),O=y(!1),Z=y(!1),de=y(d.value*z.value),R=u(()=>V.value===!0?"left":"right"),ee=u(()=>h.value===!0&&m.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:d.value:0),te=u(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(V.value?"R":"L")!==-1||v.platform.is.ios===!0&&a.isContainer.value===!0),H=u(()=>e.overlay===!1&&h.value===!0&&m.value===!1),Pe=u(()=>e.overlay===!0&&h.value===!0&&m.value===!1),Ie=u(()=>"fullscreen q-drawer__backdrop"+(h.value===!1&&O.value===!1?" hidden":"")),Ue=u(()=>({backgroundColor:`rgba(0,0,0,${ce.value*.4})`})),ve=u(()=>V.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),Ee=u(()=>V.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),Ne=u(()=>{const t={};return a.header.space===!0&&ve.value===!1&&(te.value===!0?t.top=`${a.header.offset}px`:a.header.space===!0&&(t.top=`${a.header.size}px`)),a.footer.space===!0&&Ee.value===!1&&(te.value===!0?t.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(t.bottom=`${a.footer.size}px`)),t}),Re=u(()=>{const t={width:`${d.value}px`,transform:`translateX(${de.value}px)`};return m.value===!0?t:Object.assign(t,Ne.value)}),Ke=u(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Xe=u(()=>`q-drawer q-drawer--${e.side}`+(Z.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(n.value===!0?" q-drawer--dark q-dark":"")+(O.value===!0?" no-transition":h.value===!0?"":" q-layout--prevent-focus")+(m.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${B.value===!0?"mini":"standard"}`+(te.value===!0||H.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(ve.value===!0?" q-drawer--top-padding":""))),Ge=u(()=>{const t=v.lang.rtl===!0?e.side:R.value;return[[X,et,void 0,{[t]:!0,mouse:!0}]]}),Je=u(()=>{const t=v.lang.rtl===!0?R.value:e.side;return[[X,fe,void 0,{[t]:!0,mouse:!0}]]}),Ye=u(()=>{const t=v.lang.rtl===!0?R.value:e.side;return[[X,fe,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function ae(){tt(m,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}_(m,t=>{t===!0?(g=h.value,h.value===!0&&D(!1)):e.overlay===!1&&e.behavior!=="mobile"&&g!==!1&&(h.value===!0?($(0),L(0),le()):Y(!1))}),_(()=>e.side,(t,s)=>{a.instances[s]===N&&(a.instances[s]=void 0,a[s].space=!1,a[s].offset=0),a.instances[t]=N,a[t].size=d.value,a[t].space=H.value,a[t].offset=ee.value}),_(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&ae()}),_(()=>e.behavior+e.breakpoint,ae),_(a.isContainer,t=>{h.value===!0&&r(t!==!0),t===!0&&ae()}),_(a.scrollbarWidth,()=>{$(h.value===!0?0:void 0)}),_(ee,t=>{F("offset",t)}),_(H,t=>{i("onLayout",t),F("space",t)}),_(V,()=>{$()}),_(d,t=>{$(),ne(e.miniToOverlay,t)}),_(()=>e.miniToOverlay,t=>{ne(t,d.value)}),_(()=>v.lang.rtl,()=>{$()}),_(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Ze(),a.animate())}),_(B,t=>{i("miniState",t)});function $(t){t===void 0?me(()=>{t=h.value===!0?0:d.value,$(z.value*t)}):(a.isContainer.value===!0&&V.value===!0&&(m.value===!0||Math.abs(t)===d.value)&&(t+=z.value*a.scrollbarWidth.value),de.value=t)}function L(t){ce.value=t}function oe(t){const s=t===!0?"remove":a.isContainer.value!==!0?"add":"";s!==""&&document.body.classList[s]("q-body--drawer-toggle")}function Ze(){f!==null&&clearTimeout(f),o.proxy&&o.proxy.$el&&o.proxy.$el.classList.add("q-drawer--mini-animate"),Z.value=!0,f=setTimeout(()=>{f=null,Z.value=!1,o&&o.proxy&&o.proxy.$el&&o.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function et(t){if(h.value!==!1)return;const s=d.value,C=A(t.distance.x,0,s);if(t.isFinal===!0){C>=Math.min(75,s)===!0?Y():(a.animate(),L(0),$(z.value*s)),O.value=!1;return}$((v.lang.rtl===!0?V.value!==!0:V.value)?Math.max(s-C,0):Math.min(0,C-s)),L(A(C/s,0,1)),t.isFirst===!0&&(O.value=!0)}function fe(t){if(h.value!==!0)return;const s=d.value,C=t.direction===e.side,K=(v.lang.rtl===!0?C!==!0:C)?A(t.distance.x,0,s):0;if(t.isFinal===!0){Math.abs(K)<Math.min(75,s)===!0?(a.animate(),L(1),$(0)):D(),O.value=!1;return}$(z.value*K),L(A(1-K/s,0,1)),t.isFirst===!0&&(O.value=!0)}function le(){r(!1),oe(!0)}function F(t,s){a.update(e.side,t,s)}function tt(t,s){t.value!==s&&(t.value=s)}function ne(t,s){F("size",t===!0?e.miniWidth:s)}return a.instances[e.side]=N,ne(e.miniToOverlay,d.value),F("space",H.value),F("offset",ee.value),e.showIfAbove===!0&&e.modelValue!==!0&&h.value===!0&&e["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),qe(()=>{i("onLayout",H.value),i("miniState",B.value),g=e.showIfAbove===!0;const t=()=>{(h.value===!0?w:T)(!1,!0)};if(a.totalWidth.value!==0){me(t);return}b=_(a.totalWidth,()=>{b(),b=void 0,h.value===!1&&e.showIfAbove===!0&&m.value===!1?Y(!1):t()})}),Te(()=>{b!==void 0&&b(),f!==null&&(clearTimeout(f),f=null),h.value===!0&&le(),a.instances[e.side]===N&&(a.instances[e.side]=void 0,F("size",0),F("offset",0),F("space",!1))}),()=>{const t=[];m.value===!0&&(e.noSwipeOpen===!1&&t.push(Ve(Q("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),Ge.value)),t.push(he("div",{ref:"backdrop",class:Ie.value,style:Ue.value,"aria-hidden":"true",onClick:D},void 0,"backdrop",e.noSwipeBackdrop!==!0&&h.value===!0,()=>Ye.value)));const s=B.value===!0&&l.mini!==void 0,C=[Q("div",{...c,key:""+s,class:[Ke.value,c.class]},s===!0?l.mini():ct(l.default))];return e.elevated===!0&&h.value===!0&&C.push(Q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(he("aside",{ref:"content",class:Xe.value,style:Re.value},C,"contentclose",e.noSwipeClose!==!0&&m.value===!0,()=>Je.value)),Q("div",{class:"q-drawer-container"},t)}}}),Bt={class:"text-primary-100 absolute-top z-max q-pa-xs",style:{width:"50px"}},Ct={style:{top:"-20px",right:"50px"},class:"text-primary-100 absolute-top-right z-top q-pa-xs"},Mt={style:{"padding-top":"0px"},class:"background--blur scroll shadow-2 fit"},_e=50,xe=100,$t=U({__name:"WdMapContent",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:Se(["close"],["update:modelValue"]),setup(e){const l=J(),i=We(e,"modelValue"),c=u(()=>l.screen.lt.md),o=y(window.innerHeight*.4),v=y(window.innerHeight-_e),n=y(o.value),r=u(()=>n.value+(v.value-n.value)/2),M=u(()=>a.value?"wd-arrow-up-down":o.value<r.value?"wd-arrowhead-up":"wd-arrowhead-down");function W(){o.value<r.value?o.value=v.value:o.value=n.value}const a=y(!1),g=f=>{if(!(f&&f.evt&&f.delta))return;a.value=f.isFinal!==!0;const b=f.evt.view?f.evt.view?.innerHeight:600;f.direction=="up"&&(o.value<=b-150?o.value-=f.delta.y:o.value=b-_e),f.direction=="down"&&(o.value>=xe?o.value-=f.delta.y:o.value=xe),f.isFinal&&(o.value<r.value?n.value=o.value:v.value=o.value)};return(f,b)=>{const m=Le("router-view");return k(),P(ft,null,[c.value?S("",!0):(k(),q(De,{key:0,modelValue:i.value,"onUpdate:modelValue":b[1]||(b[1]=B=>i.value=B),side:"right",width:Fe(l).screen.gt.md?460:380,breakpoint:0,class:"shadow-2"},{default:x(()=>[re("div",Bt,[p(ie,{round:"",dense:"",unelevated:"",color:"accent-100",icon:"wd-close",class:"text-primary-900 q-ma-sm",size:"md",onClick:b[0]||(b[0]=B=>f.$emit("close","landscape"))})]),p(m,{name:"content"})]),_:1},8,["modelValue","width"])),p(yt,{class:"text-black fixed-bottom"},{default:x(()=>[i.value&&c.value?(k(),P("div",{key:0,style:ze({"max-height":o.value+"px",height:o.value+"px","padding-top":"0px"})},[re("div",Ct,[Ve(p(ie,{round:"",dense:"",unelevated:"",color:"accent-100",icon:M.value,size:"md",class:"text-primary-700",onClick:W},null,8,["icon"]),[[X,g,void 0,{vertical:!0,prevent:!0,mouse:!0}]]),p(ie,{round:"",dense:"",unelevated:"",color:"accent-100",icon:"wd-close",class:"q-ml-md text-primary-700",size:"md",onClick:b[2]||(b[2]=B=>f.$emit("close","portrait"))})]),re("div",Mt,[p(m,{name:"content"})])],4)):S("",!0)]),_:1})],64)}}}),qt=E($t,[["__file","WdMapContent.vue"]]),Tt=U({__name:"WdFeedbackButton",setup(e){const l=J(),i=Oe();function c(){i.push({name:"feedback"})}return(o,v)=>{const n=je;return k(),q(n,{icon:"wd-message",onClick:c,"aria-label":"Open feedback form"},{default:x(()=>[Fe(l).screen.xs?S("",!0):(k(),q(wt,{key:0,anchor:"center left",self:"center right"},{default:x(()=>[mt("Send feedback.")]),_:1}))]),_:1})}}}),Vt=E(Tt,[["__file","WdFeedbackButton.vue"]]),ke="wd-menu",Be="wd-menu-arrow",St=U({__name:"WdMenuButton",props:Se({side:{default:"left"},function:{default:"both"},mobile:{type:Boolean,default:!1},desktop:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const l=We(e,"modelValue"),i=e,c=J(),o=u(()=>c.screen.xs),v=u(()=>l.value?"primary-300":"primary-100"),n=u(()=>l.value?"close menu":"open menu"),r=u(()=>i.function=="open"?ke:i.function=="close"||l.value?Be:ke),M=u(()=>!i.mobile&&!i.desktop||i.mobile&&o.value?!0:!!(i.desktop&&!o.value));return(W,a)=>{const g=je;return M.value?(k(),q(g,{key:0,color:v.value,icon:r.value,class:ht({"rotate-180":i.side=="right"}),"aria-label":n.value,onClick:a[0]||(a[0]=f=>l.value=!l.value)},null,8,["color","icon","class","aria-label"])):S("",!0)}}}),Wt=E(St,[["__file","WdMenuButton.vue"]]),se=XMLHttpRequest,He=se.prototype.open,Lt=["top","right","bottom","left"];let G=[],I=0;function Ft({p:e,pos:l,active:i,horiz:c,reverse:o,dir:v}){let n=1,r=1;return c===!0?(o===!0&&(n=-1),l==="bottom"&&(r=-1),{transform:`translate3d(${n*(e-100)}%,${i?0:r*-200}%,0)`}):(o===!0&&(r=-1),l==="right"&&(n=-1),{transform:`translate3d(${i?0:v*n*-200}%,${r*(e-100)}%,0)`})}function zt(e,l){return typeof l!="number"&&(e<25?l=Math.random()*3+3:e<65?l=Math.random()*3:e<85?l=Math.random()*2:e<99?l=.6:l=0),A(e+l,0,100)}function Ot(e){I++,G.push(e),!(I>1)&&(se.prototype.open=function(l,i){const c=[],o=()=>{G.forEach(n=>{(n.hijackFilter.value===null||n.hijackFilter.value(i)===!0)&&(n.start(),c.push(n.stop))})},v=()=>{c.forEach(n=>{n()})};this.addEventListener("loadstart",o,{once:!0}),this.addEventListener("loadend",v,{once:!0}),He.apply(this,arguments)})}function jt(e){G=G.filter(l=>l.start!==e),I=Math.max(0,I-1),I===0&&(se.prototype.open=He)}const Dt=Me({name:"QAjaxBar",props:{position:{type:String,default:"top",validator:e=>Lt.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,hijackFilter:Function},emits:["start","stop"],setup(e,{emit:l}){const{proxy:i}=$e(),c=y(0),o=y(!1),v=y(!0);let n=0,r=null,M;const W=u(()=>`q-loading-bar q-loading-bar--${e.position}`+(e.color!==void 0?` bg-${e.color}`:"")+(v.value===!0?"":" no-transition")),a=u(()=>e.position==="top"||e.position==="bottom"),g=u(()=>a.value===!0?"height":"width"),f=u(()=>{const w=o.value,T=Ft({p:c.value,pos:e.position,active:w,horiz:a.value,reverse:i.$q.lang.rtl===!0&&["top","bottom"].includes(e.position)?e.reverse===!1:e.reverse,dir:i.$q.lang.rtl===!0?-1:1});return T[g.value]=e.size,T.opacity=w?1:0,T}),b=u(()=>o.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c.value}:{"aria-hidden":"true"});function m(w=300){const T=M;return M=Math.max(0,w)||0,n++,n>1?(T===0&&w>0?h():r!==null&&T>0&&w<=0&&(clearTimeout(r),r=null),n):(r!==null&&clearTimeout(r),l("start"),c.value=0,r=setTimeout(()=>{r=null,v.value=!0,w>0&&h()},o._value===!0?500:1),o._value!==!0&&(o.value=!0,v.value=!1),n)}function B(w){return n>0&&(c.value=zt(c.value,w)),n}function d(){if(n=Math.max(0,n-1),n>0)return n;r!==null&&(clearTimeout(r),r=null),l("stop");const w=()=>{v.value=!0,c.value=100,r=setTimeout(()=>{r=null,o.value=!1},1e3)};return c.value===0?r=setTimeout(w,1):w(),n}function h(){c.value<100&&(r=setTimeout(()=>{r=null,B(),h()},M))}let j;return qe(()=>{e.skipHijack!==!0&&(j=!0,Ot({start:m,stop:d,hijackFilter:u(()=>e.hijackFilter||null)}))}),Te(()=>{r!==null&&clearTimeout(r),j===!0&&jt(m)}),Object.assign(i,{start:m,stop:d,increment:B}),()=>Q("div",{class:W.value,style:f.value,...b.value})}}),Ht={class:"text-h4"},Qt={key:0,class:"text-black text-weight-medium"},At=U({__name:"WodoreLogo",props:{icon:{type:Boolean,default:!1},text:{type:Boolean,default:!1},textColorLeft:{default:"black"},textColorRight:{default:"accent"},logoPath:{default:"/logos/wodore_mobile.svg"}},setup(e){const l=e,i=u(()=>!l.icon&&!l.text?!0:l.icon),c=u(()=>!l.icon&&!l.text?!0:l.text);return(o,v)=>(k(),P("span",Ht,[c.value?(k(),P("span",Qt,"wo")):S("",!0),i.value?(k(),q(pt,{key:1,style:{transform:"translateY(-4px)"},name:"img:"+l.logoPath},null,8,["name"])):S("",!0),c.value?(k(),P("span",{key:2,style:ze({"margin-left":l.icon?0:"3pt"}),class:"text-accent text-weight-regular"},"dore",4)):S("",!0)]))}}),Ce=E(At,[["__file","WodoreLogo.vue"]]),Pt=U({__name:"MainLayout",setup(e){const l=J();function i(a){return!/^.*timetable.search.ch.*/.test(a)}const c=u(()=>l.screen.xs),o=y(!1),v=y(!0),n=y(!1),r=gt(),M=Oe();pe(()=>{n.value=r.meta?.dialog}),pe(()=>{v.value=r.meta?.content});function W(a){console.debug(`Closed content in ${a} mode.`),M.push({name:"map",hash:r.hash,query:r.query})}return(a,g)=>{const f=Wt,b=Vt,m=Le("router-view"),B=qt;return k(),q(_t,{view:"hHh LpR lFf",class:"overflow-hidden"},{default:x(()=>[p(Dt,{color:"accent","hijack-filter":i}),p(xt,{class:"text-white shadow-6 app-header"},{default:x(()=>[p(be,null,{default:x(()=>[p(f,{desktop:"",modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=d=>o.value=d)},null,8,["modelValue"]),p(ye,null,{default:x(()=>[p(Ce,{class:"text-h4",text:!c.value,icon:""},null,8,["text"])]),_:1}),c.value?S("",!0):(k(),q(b,{key:0})),p(bt,{modelValue:n.value,"onUpdate:modelValue":g[1]||(g[1]=d=>n.value=d),"no-backdrop-dismiss":"",persistent:"",maximized:c.value,"backdrop-filter":"blur(3px) saturate(180%) grayscale(60%)"},{default:x(()=>[p(m,{name:"dialog"},{default:x(({Component:d})=>[(k(),q(ge(d)))]),_:1})]),_:1},8,["modelValue","maximized"]),p(f,{mobile:"",function:"open",side:"right",modelValue:o.value,"onUpdate:modelValue":g[2]||(g[2]=d=>o.value=d)},null,8,["modelValue"])]),_:1})]),_:1}),p(De,{modelValue:o.value,"onUpdate:modelValue":g[4]||(g[4]=d=>o.value=d),side:c.value?"right":"left",width:200,breakpoint:610,class:"shadow-2"},{default:x(()=>[c.value?(k(),q(be,{key:0,class:"bg-primary-600"},{default:x(()=>[p(ye,null,{default:x(()=>[p(Ce,{text:"",class:"text-h5"})]),_:1}),p(b,{size:"md"}),p(f,{mobile:"",side:"right",modelValue:o.value,"onUpdate:modelValue":g[3]||(g[3]=d=>o.value=d)},null,8,["modelValue"])]),_:1})):S("",!0),p(m,{name:"menu"})]),_:1},8,["modelValue","side"]),p(kt,null,{default:x(()=>[p(m,null,{default:x(({Component:d})=>[(k(),q(ge(d)))]),_:1})]),_:1}),p(B,{onClose:W,modelValue:v.value,"onUpdate:modelValue":g[5]||(g[5]=d=>v.value=d)},null,8,["modelValue"])]),_:1})}}}),Kt=E(Pt,[["__file","MainLayout.vue"]]);export{Kt as default};
