import{g as $,Q as A}from"./imageService-bLrHdWN3.js";import{h as U,k as w,g as L,r as F,V as N,aH as O,aI as j,o as D,m as K,aJ as M,I as R,q as T,aK as z,aL as G,d as H,ae as J,a9 as k,aa as I,ab as i,aM as W,f as n,af as X,aN as Y,aC as V,aO as q,am as C,al as Z,aP as ee,F as te,ad as S,ah as ae,aQ as oe,aF as ne,aG as se,a8 as le}from"./index-ClLRFvrC.js";import{u as re}from"./use-quasar-DC5Lwja5.js";import"./_commonjsHelpers-C4iS2aBk.js";const ue=U("div",{class:"q-space"}),ce=w({name:"QSpace",setup(){return()=>ue}}),ie=w({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(s,{slots:x,emit:m}){const f=L(),o=F(null);let l=0;const u=[];function g(e){const t=typeof e=="boolean"?e:s.noErrorFocus!==!0,v=++l,b=(a,r)=>{m("validation"+(a===!0?"Success":"Error"),r)},Q=a=>{const r=a.validate();return typeof r.then=="function"?r.then(c=>({valid:c,comp:a}),c=>({valid:!1,comp:a,err:c})):Promise.resolve({valid:r,comp:a})};return(s.greedy===!0?Promise.all(u.map(Q)).then(a=>a.filter(r=>r.valid!==!0)):u.reduce((a,r)=>a.then(()=>Q(r).then(c=>{if(c.valid===!1)return Promise.reject(c)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return v===l&&b(!0),!0;if(v===l){const{comp:r,err:c}=a[0];if(c!==void 0&&console.error(c),b(!1,r),t===!0){const B=a.find(({comp:P})=>typeof P.focus=="function"&&M(P.$)===!1);B!==void 0&&B.comp.focus()}}return!1})}function h(){l++,u.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&R(e);const t=l+1;g().then(v=>{t===l&&v===!0&&(s.onSubmit!==void 0?m("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function _(e){e!==void 0&&R(e),m("reset"),T(()=>{h(),s.autofocus===!0&&s.noResetFocus!==!0&&p()})}function p(){z(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),t=>t.tabIndex!==-1);e?.focus({preventScroll:!0})})}N(G,{bindComponent(e){u.push(e)},unbindComponent(e){const t=u.indexOf(e);t!==-1&&u.splice(t,1)}});let d=!1;return O(()=>{d=!0}),j(()=>{d===!0&&s.autofocus===!0&&p()}),D(()=>{s.autofocus===!0&&p()}),Object.assign(f.proxy,{validate:g,resetValidation:h,submit:y,reset:_,focus:p,getValidationComponents:()=>u}),()=>U("form",{class:"q-form",ref:o,onSubmit:y,onReset:_},K(x.default))}}),E=s=>(ne("data-v-a3c73a00"),s=s(),se(),s),de=E(()=>V("div",{class:"card-header absolute-bottom text-white text-h5"},null,-1)),me=E(()=>V("div",{class:"absolute-bottom text-accent-400 text-h4 text-center card-header__text"}," Feedback ",-1)),fe={class:"col no-wrap items-center"},pe={class:"q-gutter-md q-pt-md"},ve="https://cdn.pixabay.com/photo/2014/05/11/11/12/mailbox-341744_1280.jpg",he=H({__name:"FeedbackForm",setup(s){const x=re(),m=J(),f=F(""),o=F([]),l=F("");function u(){console.debug(`Submitted form for '${f.value}'`,l),m.go(-1),x.notify({color:"positive",textColor:"black",icon:"eva-checkmark-circle",message:"Submitted"}),h()}function g(){f.value||l.value?x.dialog({dark:!0,title:"Confirm",message:"Do you want to close it and dismiss the data?",cancel:!0,persistent:!0}).onOk(()=>{m.go(-1)}):m.go(-1)}function h(){f.value="",l.value=""}function y(){const d=o.value.length,e=d>0?o.value[d-1].id+1:0;console.log(o.value),console.log(e),o.value.push({value:"",id:e,placeholder:`URL ${e+1}`})}function _(d){o.value.splice(d,1)}const p=$(ve,{focal:"0.5,0.45",size:"800x300",quality:50});return console.log(p),(d,e)=>(k(),I(W,{class:"card",style:{"min-width":"400px",width:"500px","max-width":"700px"}},{default:i(()=>[n(ie,{onSubmit:u,onReset:h,class:"fit"},{default:i(()=>[n(A,{src:X(p)},{default:i(()=>[de,me]),_:1},8,["src"]),n(Y,{style:{"min-height":"200px",height:"500px","max-height":"600px"},class:"scroll"},{default:i(()=>[V("div",fe,[V("div",pe,[n(q,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=t=>f.value=t),outlined:"",placeholder:"name@domain.com",type:"email"},{prepend:i(()=>[n(C,{name:"eva-at"})]),_:1},8,["modelValue"]),n(q,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),placeholder:"Feedback Text",outlined:"",type:"textarea"},{prepend:i(()=>[n(C,{name:"eva-file-text-outline"})]),_:1},8,["modelValue"]),(k(!0),Z(te,null,ee(o.value,(t,v)=>(k(),I(q,{key:t.id,modelValue:t.value,"onUpdate:modelValue":b=>t.value=b,dense:"",outlined:"",placeholder:t.placeholder,type:"url"},{prepend:i(()=>[n(C,{name:"eva-link"})]),append:i(()=>[n(C,{name:"eva-close",onClick:b=>_(v),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]))),128)),o.value.length<4?(k(),I(S,{key:0,onClick:e[2]||(e[2]=t=>y()),color:"black",label:"URL",flat:"",icon:"eva-plus-square-outline"})):ae("",!0)])])]),_:1}),n(oe,null,{default:i(()=>[n(S,{label:"Close",color:"secondary-700",flat:"",onClick:e[3]||(e[3]=t=>g()),class:"q-ml-sm"}),n(S,{label:"Reset",type:"reset",color:"secondary-700",flat:"",class:"q-ml-sm"}),n(ce),n(S,{label:"Submit",flat:"",type:"submit",color:"accent"})]),_:1})]),_:1})]),_:1}))}}),ke=le(he,[["__scopeId","data-v-a3c73a00"],["__file","FeedbackForm.vue"]]);export{ke as default};
