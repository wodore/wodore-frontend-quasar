import{defineComponent as h,resolveComponent as v,useSSRContext as w,onMounted as R,getCurrentInstance as A,h as g,markRaw as S,createApp as I,unref as T}from"vue";import{Quasar as b,Notify as P,Dialog as q}from"quasar";import{ssrRenderComponent as E}from"vue/server-renderer";import{store as H,route as k}from"quasar/wrappers/index.mjs";import{createPinia as C}from"pinia";import{createRouter as N,createMemoryHistory as O}from"vue-router";import L from"quasar/icon-set/eva-icons.mjs";const l=h({name:"App",__name:"App",__ssrInlineRender:!0,setup(t){return(e,o,a,r)=>{const n=v("router-view");o(E(n,r,null,a))}}}),M=(t,e)=>{const o=t.__vccOpts||t;for(const[a,r]of e)o[a]=r;return o},_=l.setup;l.setup=(t,e)=>{const o=w();return(o.modules||(o.modules=new Set)).add("src/App.vue"),_?_(t,e):void 0};const U=M(l,[["__file","App.vue"]]),m=H(()=>C()),F=[{path:"/",redirect:"map",component:()=>import("./assets/MainLayout-3bYxbbDa.js"),children:[{path:"map/hut/:slug",name:"map-hut",meta:{content:!0},components:{default:()=>import("./assets/MapPage-CRiaa5HD.js"),menu:()=>import("./assets/MapMenu-BT7aSguM.js"),content:()=>import("./assets/HutView-C1NLeTn2.js")},props:{content:!0}},{path:"map",name:"map",components:{default:()=>import("./assets/MapPage-CRiaa5HD.js"),menu:()=>import("./assets/MapMenu-BT7aSguM.js"),content:()=>import("./assets/HutView-C1NLeTn2.js")}},{path:"feedback",name:"feedback",meta:{dialog:!0},components:{default:()=>import("./assets/MapPage-CRiaa5HD.js"),dialog:()=>import("./assets/FeedbackForm-kA-KzOEQ.js")}}]},{path:"/:catchAll(.*)*",component:()=>import("./assets/ErrorNotFound-C85lfoOt.js")}],f=k(function(){return N({scrollBehavior:()=>({left:0,top:0}),routes:F,history:O("/")})}),Q=h({name:"AppWrapper",setup(t){return R(()=>{const{proxy:{$q:e}}=A();e.onSSRHydrated!==void 0&&e.onSSRHydrated()}),()=>g(U,t)}});async function $(t,e,o){const a=t(Q);a.use(b,e,o);const r=typeof m=="function"?await m({ssrContext:o}):m;a.use(r),typeof window<"u"&&window.__INITIAL_STATE__!==void 0&&(r.state.value=window.__INITIAL_STATE__,delete window.__INITIAL_STATE__);const n=S(typeof f=="function"?await f({ssrContext:o,store:r}):f);return r.use(({store:c})=>{c.router=n}),{app:a,store:r,router:n}}const B={config:{},iconSet:L,plugins:{Notify:P,Dialog:q}},D="/",W=/^https?:\/\//;function x(t,e){if(typeof t=="string"&&W.test(t)===!0)return t;try{return e.resolve(t).href}catch{}return t}const{components:tt,directives:et,...z}=B,G=Promise.all([import("./assets/i18n-Dmjd0w3D.js"),import("./assets/axios-B1riyQhG.js")]).then(t=>t.map(e=>e.default).filter(e=>typeof e=="function")),ot=t=>new Promise(async(e,o)=>{const a=await G,{app:r,router:n,store:c}=await $(I,z,t);let i=!1;const y=(s,p)=>{i=!0,o({url:x(s,n),code:p})};for(let s=0;i===!1&&s<a.length;s++)try{await a[s]({app:r,router:n,store:c,ssrContext:t,redirect:y,urlPath:t.req.url,publicPath:D})}catch(p){o(p);return}if(i===!0)return;r.use(n);const u=t.req.url,{fullPath:d}=n.resolve(u);if(d!==u)return o({url:d});n.push(u).catch(()=>{}),n.isReady().then(()=>{if(n.currentRoute.value.matched.filter(p=>p.components!==void 0).flatMap(p=>Object.values(p.components)).length===0)return o({code:404});t.state=T(c.state),e(r)}).catch(o)});export{M as _,ot as default};
